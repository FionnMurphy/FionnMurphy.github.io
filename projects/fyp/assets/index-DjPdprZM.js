var lp=Object.defineProperty;var Wl=t=>{throw TypeError(t)};var up=(t,e,n)=>e in t?lp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Vl=(t,e,n)=>up(t,typeof e!="symbol"?e+"":e,n),Jo=(t,e,n)=>e.has(t)||Wl("Cannot "+n);var ct=(t,e,n)=>(Jo(t,e,"read from private field"),n?n.call(t):e.get(t)),es=(t,e,n)=>e.has(t)?Wl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),pi=(t,e,n,r)=>(Jo(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ts=(t,e,n)=>(Jo(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ai(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Gc={exports:{}},Lo={},Oc={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=Symbol.for("react.element"),cp=Symbol.for("react.portal"),hp=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),dp=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),gp=Symbol.for("react.context"),mp=Symbol.for("react.forward_ref"),vp=Symbol.for("react.suspense"),yp=Symbol.for("react.memo"),wp=Symbol.for("react.lazy"),Yl=Symbol.iterator;function Ep(t){return t===null||typeof t!="object"?null:(t=Yl&&t[Yl]||t["@@iterator"],typeof t=="function"?t:null)}var jc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$c=Object.assign,Uc={};function ar(t,e,n){this.props=t,this.context=e,this.refs=Uc,this.updater=n||jc}ar.prototype.isReactComponent={};ar.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ar.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bc(){}Bc.prototype=ar.prototype;function za(t,e,n){this.props=t,this.context=e,this.refs=Uc,this.updater=n||jc}var Ga=za.prototype=new Bc;Ga.constructor=za;$c(Ga,ar.prototype);Ga.isPureReactComponent=!0;var Kl=Array.isArray,Wc=Object.prototype.hasOwnProperty,Oa={current:null},Vc={key:!0,ref:!0,__self:!0,__source:!0};function Yc(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Wc.call(e,r)&&!Vc.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:li,type:t,key:o,ref:s,props:i,_owner:Oa.current}}function Sp(t,e){return{$$typeof:li,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ja(t){return typeof t=="object"&&t!==null&&t.$$typeof===li}function kp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ql=/\/+/g;function ns(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kp(""+t.key):e.toString(36)}function $i(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case li:case cp:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+ns(s,0):r,Kl(i)?(n="",t!=null&&(n=t.replace(ql,"$&/")+"/"),$i(i,e,n,"",function(u){return u})):i!=null&&(ja(i)&&(i=Sp(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ql,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Kl(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+ns(o,a);s+=$i(o,e,n,l,i)}else if(l=Ep(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+ns(o,a++),s+=$i(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function gi(t,e,n){if(t==null)return t;var r=[],i=0;return $i(t,r,"","",function(o){return e.call(n,o,i++)}),r}function _p(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ie={current:null},Ui={transition:null},Cp={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Ui,ReactCurrentOwner:Oa};function Kc(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:gi,forEach:function(t,e,n){gi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gi(t,function(){e++}),e},toArray:function(t){return gi(t,function(e){return e})||[]},only:function(t){if(!ja(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=ar;Q.Fragment=hp;Q.Profiler=dp;Q.PureComponent=za;Q.StrictMode=fp;Q.Suspense=vp;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cp;Q.act=Kc;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$c({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Oa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Wc.call(e,l)&&!Vc.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:li,type:t.type,key:i,ref:o,props:r,_owner:s}};Q.createContext=function(t){return t={$$typeof:gp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pp,_context:t},t.Consumer=t};Q.createElement=Yc;Q.createFactory=function(t){var e=Yc.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:mp,render:t}};Q.isValidElement=ja;Q.lazy=function(t){return{$$typeof:wp,_payload:{_status:-1,_result:t},_init:_p}};Q.memo=function(t,e){return{$$typeof:yp,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=Ui.transition;Ui.transition={};try{t()}finally{Ui.transition=e}};Q.unstable_act=Kc;Q.useCallback=function(t,e){return Ie.current.useCallback(t,e)};Q.useContext=function(t){return Ie.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return Ie.current.useDeferredValue(t)};Q.useEffect=function(t,e){return Ie.current.useEffect(t,e)};Q.useId=function(){return Ie.current.useId()};Q.useImperativeHandle=function(t,e,n){return Ie.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return Ie.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return Ie.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return Ie.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return Ie.current.useReducer(t,e,n)};Q.useRef=function(t){return Ie.current.useRef(t)};Q.useState=function(t){return Ie.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return Ie.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return Ie.current.useTransition()};Q.version="18.3.1";Oc.exports=Q;var Z=Oc.exports;const rs=ai(Z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=Z,Tp=Symbol.for("react.element"),Rp=Symbol.for("react.fragment"),Np=Object.prototype.hasOwnProperty,bp=xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lp={key:!0,ref:!0,__self:!0,__source:!0};function qc(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Np.call(e,r)&&!Lp.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Tp,type:t,key:o,ref:s,props:i,_owner:bp.current}}Lo.Fragment=Rp;Lo.jsx=qc;Lo.jsxs=qc;Gc.exports=Lo;var V=Gc.exports,Qc={exports:{}},Qe={},Hc={exports:{}},Xc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,G){var I=D.length;D.push(G);e:for(;0<I;){var K=I-1>>>1,ee=D[K];if(0<i(ee,G))D[K]=G,D[I]=ee,I=K;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var G=D[0],I=D.pop();if(I!==G){D[0]=I;e:for(var K=0,ee=D.length,$=ee>>>1;K<$;){var ie=2*(K+1)-1,pe=D[ie],ge=ie+1,le=D[ge];if(0>i(pe,I))ge<ee&&0>i(le,pe)?(D[K]=le,D[ge]=I,K=ge):(D[K]=pe,D[ie]=I,K=ie);else if(ge<ee&&0>i(le,I))D[K]=le,D[ge]=I,K=ge;else break e}}return G}function i(D,G){var I=D.sortIndex-G.sortIndex;return I!==0?I:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],h=1,c=null,f=3,g=!1,m=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var G=n(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=D)r(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(u)}}function E(D){if(y=!1,v(D),!m)if(n(l)!==null)m=!0,q(_);else{var G=n(u);G!==null&&X(E,G.startTime-D)}}function _(D,G){m=!1,y&&(y=!1,d(x),x=-1),g=!0;var I=f;try{for(v(G),c=n(l);c!==null&&(!(c.expirationTime>G)||D&&!C());){var K=c.callback;if(typeof K=="function"){c.callback=null,f=c.priorityLevel;var ee=K(c.expirationTime<=G);G=t.unstable_now(),typeof ee=="function"?c.callback=ee:c===n(l)&&r(l),v(G)}else r(l);c=n(l)}if(c!==null)var $=!0;else{var ie=n(u);ie!==null&&X(E,ie.startTime-G),$=!1}return $}finally{c=null,f=I,g=!1}}var T=!1,k=null,x=-1,O=5,w=-1;function C(){return!(t.unstable_now()-w<O)}function b(){if(k!==null){var D=t.unstable_now();w=D;var G=!0;try{G=k(!0,D)}finally{G?R():(T=!1,k=null)}}else T=!1}var R;if(typeof p=="function")R=function(){p(b)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,B=Y.port2;Y.port1.onmessage=b,R=function(){B.postMessage(null)}}else R=function(){S(b,0)};function q(D){k=D,T||(T=!0,R())}function X(D,G){x=S(function(){D(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,q(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var I=f;f=G;try{return D()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var I=f;f=D;try{return G()}finally{f=I}},t.unstable_scheduleCallback=function(D,G,I){var K=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?K+I:K):I=K,D){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=I+ee,D={id:h++,callback:G,priorityLevel:D,startTime:I,expirationTime:ee,sortIndex:-1},I>K?(D.sortIndex=I,e(u,D),n(l)===null&&D===n(u)&&(y?(d(x),x=-1):y=!0,X(E,I-K))):(D.sortIndex=ee,e(l,D),m||g||(m=!0,q(_))),D},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(D){var G=f;return function(){var I=f;f=G;try{return D.apply(this,arguments)}finally{f=I}}}})(Xc);Hc.exports=Xc;var Dp=Hc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=Z,Ke=Dp;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zc=new Set,Ur={};function Tn(t,e){Jn(t,e),Jn(t+"Capture",e)}function Jn(t,e){for(Ur[t]=e,t=0;t<e.length;t++)Zc.add(e[t])}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gs=Object.prototype.hasOwnProperty,Pp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ql={},Hl={};function Ap(t){return Gs.call(Hl,t)?!0:Gs.call(Ql,t)?!1:Pp.test(t)?Hl[t]=!0:(Ql[t]=!0,!1)}function Fp(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ip(t,e,n,r){if(e===null||typeof e>"u"||Fp(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ze(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Te[t]=new ze(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Te[e]=new ze(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Te[t]=new ze(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Te[t]=new ze(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Te[t]=new ze(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Te[t]=new ze(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Te[t]=new ze(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Te[t]=new ze(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Te[t]=new ze(t,5,!1,t.toLowerCase(),null,!1,!1)});var $a=/[\-:]([a-z])/g;function Ua(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($a,Ua);Te[e]=new ze(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($a,Ua);Te[e]=new ze(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($a,Ua);Te[e]=new ze(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Te[t]=new ze(t,1,!1,t.toLowerCase(),null,!1,!1)});Te.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Te[t]=new ze(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ba(t,e,n,r){var i=Te.hasOwnProperty(e)?Te[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ip(e,n,i,r)&&(n=null),r||i===null?Ap(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jt=Mp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mi=Symbol.for("react.element"),Pn=Symbol.for("react.portal"),An=Symbol.for("react.fragment"),Wa=Symbol.for("react.strict_mode"),Os=Symbol.for("react.profiler"),Jc=Symbol.for("react.provider"),eh=Symbol.for("react.context"),Va=Symbol.for("react.forward_ref"),js=Symbol.for("react.suspense"),$s=Symbol.for("react.suspense_list"),Ya=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),th=Symbol.for("react.offscreen"),Xl=Symbol.iterator;function dr(t){return t===null||typeof t!="object"?null:(t=Xl&&t[Xl]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,is;function Nr(t){if(is===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);is=e&&e[1]||""}return`
`+is+t}var os=!1;function ss(t,e){if(!t||os)return"";os=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{os=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nr(t):""}function zp(t){switch(t.tag){case 5:return Nr(t.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 2:case 15:return t=ss(t.type,!1),t;case 11:return t=ss(t.type.render,!1),t;case 1:return t=ss(t.type,!0),t;default:return""}}function Us(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case An:return"Fragment";case Pn:return"Portal";case Os:return"Profiler";case Wa:return"StrictMode";case js:return"Suspense";case $s:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eh:return(t.displayName||"Context")+".Consumer";case Jc:return(t._context.displayName||"Context")+".Provider";case Va:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ya:return e=t.displayName||null,e!==null?e:Us(t.type)||"Memo";case Vt:e=t._payload,t=t._init;try{return Us(t(e))}catch{}}return null}function Gp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Us(e);case 8:return e===Wa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Op(t){var e=nh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vi(t){t._valueTracker||(t._valueTracker=Op(t))}function rh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ro(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bs(t,e){var n=e.checked;return fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zl(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ih(t,e){e=e.checked,e!=null&&Ba(t,"checked",e,!1)}function Ws(t,e){ih(t,e);var n=sn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vs(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vs(t,e.type,sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jl(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vs(t,e,n){(e!=="number"||ro(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var br=Array.isArray;function Vn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ys(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(br(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sn(n)}}function oh(t,e){var n=sn(e.value),r=sn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ks(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yi,ah=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yi=yi||document.createElement("div"),yi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Br(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jp=["Webkit","ms","Moz","O"];Object.keys(Mr).forEach(function(t){jp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mr[e]=Mr[t]})});function lh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mr.hasOwnProperty(t)&&Mr[t]?(""+e).trim():e+"px"}function uh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var $p=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qs(t,e){if(e){if($p[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Qs(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hs=null;function Ka(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xs=null,Yn=null,Kn=null;function nu(t){if(t=hi(t)){if(typeof Xs!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Fo(e),Xs(t.stateNode,t.type,e))}}function ch(t){Yn?Kn?Kn.push(t):Kn=[t]:Yn=t}function hh(){if(Yn){var t=Yn,e=Kn;if(Kn=Yn=null,nu(t),e)for(t=0;t<e.length;t++)nu(e[t])}}function fh(t,e){return t(e)}function dh(){}var as=!1;function ph(t,e,n){if(as)return t(e,n);as=!0;try{return fh(t,e,n)}finally{as=!1,(Yn!==null||Kn!==null)&&(dh(),hh())}}function Wr(t,e){var n=t.stateNode;if(n===null)return null;var r=Fo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Zs=!1;if(It)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{Zs=!1}function Up(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Pr=!1,io=null,oo=!1,Js=null,Bp={onError:function(t){Pr=!0,io=t}};function Wp(t,e,n,r,i,o,s,a,l){Pr=!1,io=null,Up.apply(Bp,arguments)}function Vp(t,e,n,r,i,o,s,a,l){if(Wp.apply(this,arguments),Pr){if(Pr){var u=io;Pr=!1,io=null}else throw Error(L(198));oo||(oo=!0,Js=u)}}function Rn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ru(t){if(Rn(t)!==t)throw Error(L(188))}function Yp(t){var e=t.alternate;if(!e){if(e=Rn(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ru(i),t;if(o===r)return ru(i),e;o=o.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function mh(t){return t=Yp(t),t!==null?vh(t):null}function vh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vh(t);if(e!==null)return e;t=t.sibling}return null}var yh=Ke.unstable_scheduleCallback,iu=Ke.unstable_cancelCallback,Kp=Ke.unstable_shouldYield,qp=Ke.unstable_requestPaint,me=Ke.unstable_now,Qp=Ke.unstable_getCurrentPriorityLevel,qa=Ke.unstable_ImmediatePriority,wh=Ke.unstable_UserBlockingPriority,so=Ke.unstable_NormalPriority,Hp=Ke.unstable_LowPriority,Eh=Ke.unstable_IdlePriority,Do=null,Ct=null;function Xp(t){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Do,t,void 0,(t.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:eg,Zp=Math.log,Jp=Math.LN2;function eg(t){return t>>>=0,t===0?32:31-(Zp(t)/Jp|0)|0}var wi=64,Ei=4194304;function Lr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ao(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Lr(a):(o&=s,o!==0&&(r=Lr(o)))}else s=n&~i,s!==0?r=Lr(s):o!==0&&(r=Lr(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yt(e),i=1<<n,r|=t[n],e&=~i;return r}function tg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ng(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-yt(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=tg(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function ea(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sh(){var t=wi;return wi<<=1,!(wi&4194240)&&(wi=64),t}function ls(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ui(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yt(e),t[e]=n}function rg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Qa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var te=0;function kh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _h,Ha,Ch,xh,Th,ta=!1,Si=[],Xt=null,Zt=null,Jt=null,Vr=new Map,Yr=new Map,Kt=[],ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ou(t,e){switch(t){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":Jt=null;break;case"pointerover":case"pointerout":Vr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(e.pointerId)}}function gr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=hi(e),e!==null&&Ha(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function og(t,e,n,r,i){switch(e){case"focusin":return Xt=gr(Xt,t,e,n,r,i),!0;case"dragenter":return Zt=gr(Zt,t,e,n,r,i),!0;case"mouseover":return Jt=gr(Jt,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Vr.set(o,gr(Vr.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Yr.set(o,gr(Yr.get(o)||null,t,e,n,r,i)),!0}return!1}function Rh(t){var e=pn(t.target);if(e!==null){var n=Rn(e);if(n!==null){if(e=n.tag,e===13){if(e=gh(n),e!==null){t.blockedOn=e,Th(t.priority,function(){Ch(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=na(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hs=r,n.target.dispatchEvent(r),Hs=null}else return e=hi(n),e!==null&&Ha(e),t.blockedOn=n,!1;e.shift()}return!0}function su(t,e,n){Bi(t)&&n.delete(e)}function sg(){ta=!1,Xt!==null&&Bi(Xt)&&(Xt=null),Zt!==null&&Bi(Zt)&&(Zt=null),Jt!==null&&Bi(Jt)&&(Jt=null),Vr.forEach(su),Yr.forEach(su)}function mr(t,e){t.blockedOn===e&&(t.blockedOn=null,ta||(ta=!0,Ke.unstable_scheduleCallback(Ke.unstable_NormalPriority,sg)))}function Kr(t){function e(i){return mr(i,t)}if(0<Si.length){mr(Si[0],t);for(var n=1;n<Si.length;n++){var r=Si[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xt!==null&&mr(Xt,t),Zt!==null&&mr(Zt,t),Jt!==null&&mr(Jt,t),Vr.forEach(e),Yr.forEach(e),n=0;n<Kt.length;n++)r=Kt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kt.length&&(n=Kt[0],n.blockedOn===null);)Rh(n),n.blockedOn===null&&Kt.shift()}var qn=jt.ReactCurrentBatchConfig,lo=!0;function ag(t,e,n,r){var i=te,o=qn.transition;qn.transition=null;try{te=1,Xa(t,e,n,r)}finally{te=i,qn.transition=o}}function lg(t,e,n,r){var i=te,o=qn.transition;qn.transition=null;try{te=4,Xa(t,e,n,r)}finally{te=i,qn.transition=o}}function Xa(t,e,n,r){if(lo){var i=na(t,e,n,r);if(i===null)ys(t,e,r,uo,n),ou(t,r);else if(og(i,t,e,n,r))r.stopPropagation();else if(ou(t,r),e&4&&-1<ig.indexOf(t)){for(;i!==null;){var o=hi(i);if(o!==null&&_h(o),o=na(t,e,n,r),o===null&&ys(t,e,r,uo,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ys(t,e,r,null,n)}}var uo=null;function na(t,e,n,r){if(uo=null,t=Ka(r),t=pn(t),t!==null)if(e=Rn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uo=t,null}function Nh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qp()){case qa:return 1;case wh:return 4;case so:case Hp:return 16;case Eh:return 536870912;default:return 16}default:return 16}}var Qt=null,Za=null,Wi=null;function bh(){if(Wi)return Wi;var t,e=Za,n=e.length,r,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Wi=i.slice(t,1<r?1-r:void 0)}function Vi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ki(){return!0}function au(){return!1}function He(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ki:au,this.isPropagationStopped=au,this}return fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),e}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=He(lr),ci=fe({},lr,{view:0,detail:0}),ug=He(ci),us,cs,vr,Mo=fe({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vr&&(vr&&t.type==="mousemove"?(us=t.screenX-vr.screenX,cs=t.screenY-vr.screenY):cs=us=0,vr=t),us)},movementY:function(t){return"movementY"in t?t.movementY:cs}}),lu=He(Mo),cg=fe({},Mo,{dataTransfer:0}),hg=He(cg),fg=fe({},ci,{relatedTarget:0}),hs=He(fg),dg=fe({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),pg=He(dg),gg=fe({},lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mg=He(gg),vg=fe({},lr,{data:0}),uu=He(vg),yg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Eg[t])?!!e[t]:!1}function el(){return Sg}var kg=fe({},ci,{key:function(t){if(t.key){var e=yg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(t){return t.type==="keypress"?Vi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_g=He(kg),Cg=fe({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=He(Cg),xg=fe({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),Tg=He(xg),Rg=fe({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ng=He(Rg),bg=fe({},Mo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lg=He(bg),Dg=[9,13,27,32],tl=It&&"CompositionEvent"in window,Ar=null;It&&"documentMode"in document&&(Ar=document.documentMode);var Mg=It&&"TextEvent"in window&&!Ar,Lh=It&&(!tl||Ar&&8<Ar&&11>=Ar),hu=" ",fu=!1;function Dh(t,e){switch(t){case"keyup":return Dg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fn=!1;function Pg(t,e){switch(t){case"compositionend":return Mh(e);case"keypress":return e.which!==32?null:(fu=!0,hu);case"textInput":return t=e.data,t===hu&&fu?null:t;default:return null}}function Ag(t,e){if(Fn)return t==="compositionend"||!tl&&Dh(t,e)?(t=bh(),Wi=Za=Qt=null,Fn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lh&&e.locale!=="ko"?null:e.data;default:return null}}var Fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fg[t.type]:e==="textarea"}function Ph(t,e,n,r){ch(r),e=co(e,"onChange"),0<e.length&&(n=new Ja("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fr=null,qr=null;function Ig(t){Wh(t,0)}function Po(t){var e=Gn(t);if(rh(e))return t}function zg(t,e){if(t==="change")return e}var Ah=!1;if(It){var fs;if(It){var ds="oninput"in document;if(!ds){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),ds=typeof pu.oninput=="function"}fs=ds}else fs=!1;Ah=fs&&(!document.documentMode||9<document.documentMode)}function gu(){Fr&&(Fr.detachEvent("onpropertychange",Fh),qr=Fr=null)}function Fh(t){if(t.propertyName==="value"&&Po(qr)){var e=[];Ph(e,qr,t,Ka(t)),ph(Ig,e)}}function Gg(t,e,n){t==="focusin"?(gu(),Fr=e,qr=n,Fr.attachEvent("onpropertychange",Fh)):t==="focusout"&&gu()}function Og(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(qr)}function jg(t,e){if(t==="click")return Po(e)}function $g(t,e){if(t==="input"||t==="change")return Po(e)}function Ug(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Et=typeof Object.is=="function"?Object.is:Ug;function Qr(t,e){if(Et(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gs.call(e,i)||!Et(t[i],e[i]))return!1}return!0}function mu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vu(t,e){var n=mu(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mu(n)}}function Ih(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ih(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zh(){for(var t=window,e=ro();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ro(t.document)}return e}function nl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bg(t){var e=zh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ih(n.ownerDocument.documentElement,n)){if(r!==null&&nl(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=vu(n,o);var s=vu(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Wg=It&&"documentMode"in document&&11>=document.documentMode,In=null,ra=null,Ir=null,ia=!1;function yu(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ia||In==null||In!==ro(r)||(r=In,"selectionStart"in r&&nl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ir&&Qr(Ir,r)||(Ir=r,r=co(ra,"onSelect"),0<r.length&&(e=new Ja("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=In)))}function _i(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zn={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},ps={},Gh={};It&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition);function Ao(t){if(ps[t])return ps[t];if(!zn[t])return t;var e=zn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gh)return ps[t]=e[n];return t}var Oh=Ao("animationend"),jh=Ao("animationiteration"),$h=Ao("animationstart"),Uh=Ao("transitionend"),Bh=new Map,wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(t,e){Bh.set(t,e),Tn(e,[t])}for(var gs=0;gs<wu.length;gs++){var ms=wu[gs],Vg=ms.toLowerCase(),Yg=ms[0].toUpperCase()+ms.slice(1);ln(Vg,"on"+Yg)}ln(Oh,"onAnimationEnd");ln(jh,"onAnimationIteration");ln($h,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(Uh,"onTransitionEnd");Jn("onMouseEnter",["mouseout","mouseover"]);Jn("onMouseLeave",["mouseout","mouseover"]);Jn("onPointerEnter",["pointerout","pointerover"]);Jn("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Eu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Vp(r,e,void 0,t),t.currentTarget=null}function Wh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Eu(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Eu(i,a,u),o=l}}}if(oo)throw t=Js,oo=!1,Js=null,t}function se(t,e){var n=e[ua];n===void 0&&(n=e[ua]=new Set);var r=t+"__bubble";n.has(r)||(Vh(e,t,2,!1),n.add(r))}function vs(t,e,n){var r=0;e&&(r|=4),Vh(n,t,r,e)}var Ci="_reactListening"+Math.random().toString(36).slice(2);function Hr(t){if(!t[Ci]){t[Ci]=!0,Zc.forEach(function(n){n!=="selectionchange"&&(Kg.has(n)||vs(n,!1,t),vs(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ci]||(e[Ci]=!0,vs("selectionchange",!1,e))}}function Vh(t,e,n,r){switch(Nh(e)){case 1:var i=ag;break;case 4:i=lg;break;default:i=Xa}n=i.bind(null,e,n,t),i=void 0,!Zs||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ys(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=pn(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}ph(function(){var u=o,h=Ka(n),c=[];e:{var f=Bh.get(t);if(f!==void 0){var g=Ja,m=t;switch(t){case"keypress":if(Vi(n)===0)break e;case"keydown":case"keyup":g=_g;break;case"focusin":m="focus",g=hs;break;case"focusout":m="blur",g=hs;break;case"beforeblur":case"afterblur":g=hs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Tg;break;case Oh:case jh:case $h:g=pg;break;case Uh:g=Ng;break;case"scroll":g=ug;break;case"wheel":g=Lg;break;case"copy":case"cut":case"paste":g=mg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=cu}var y=(e&4)!==0,S=!y&&t==="scroll",d=y?f!==null?f+"Capture":null:f;y=[];for(var p=u,v;p!==null;){v=p;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,d!==null&&(E=Wr(p,d),E!=null&&y.push(Xr(p,E,v)))),S)break;p=p.return}0<y.length&&(f=new g(f,m,null,n,h),c.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Hs&&(m=n.relatedTarget||n.fromElement)&&(pn(m)||m[zt]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=u,m=m?pn(m):null,m!==null&&(S=Rn(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(y=lu,E="onMouseLeave",d="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=cu,E="onPointerLeave",d="onPointerEnter",p="pointer"),S=g==null?f:Gn(g),v=m==null?f:Gn(m),f=new y(E,p+"leave",g,n,h),f.target=S,f.relatedTarget=v,E=null,pn(h)===u&&(y=new y(d,p+"enter",m,n,h),y.target=v,y.relatedTarget=S,E=y),S=E,g&&m)t:{for(y=g,d=m,p=0,v=y;v;v=Nn(v))p++;for(v=0,E=d;E;E=Nn(E))v++;for(;0<p-v;)y=Nn(y),p--;for(;0<v-p;)d=Nn(d),v--;for(;p--;){if(y===d||d!==null&&y===d.alternate)break t;y=Nn(y),d=Nn(d)}y=null}else y=null;g!==null&&Su(c,f,g,y,!1),m!==null&&S!==null&&Su(c,S,m,y,!0)}}e:{if(f=u?Gn(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var _=zg;else if(du(f))if(Ah)_=$g;else{_=Og;var T=Gg}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=jg);if(_&&(_=_(t,u))){Ph(c,_,n,h);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Vs(f,"number",f.value)}switch(T=u?Gn(u):window,t){case"focusin":(du(T)||T.contentEditable==="true")&&(In=T,ra=u,Ir=null);break;case"focusout":Ir=ra=In=null;break;case"mousedown":ia=!0;break;case"contextmenu":case"mouseup":case"dragend":ia=!1,yu(c,n,h);break;case"selectionchange":if(Wg)break;case"keydown":case"keyup":yu(c,n,h)}var k;if(tl)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Fn?Dh(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Lh&&n.locale!=="ko"&&(Fn||x!=="onCompositionStart"?x==="onCompositionEnd"&&Fn&&(k=bh()):(Qt=h,Za="value"in Qt?Qt.value:Qt.textContent,Fn=!0)),T=co(u,x),0<T.length&&(x=new uu(x,t,null,n,h),c.push({event:x,listeners:T}),k?x.data=k:(k=Mh(n),k!==null&&(x.data=k)))),(k=Mg?Pg(t,n):Ag(t,n))&&(u=co(u,"onBeforeInput"),0<u.length&&(h=new uu("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=k))}Wh(c,e)})}function Xr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function co(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Wr(t,n),o!=null&&r.unshift(Xr(t,o,i)),o=Wr(t,e),o!=null&&r.push(Xr(t,o,i))),t=t.return}return r}function Nn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Su(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Wr(n,o),l!=null&&s.unshift(Xr(n,l,a))):i||(l=Wr(n,o),l!=null&&s.push(Xr(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var qg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function ku(t){return(typeof t=="string"?t:""+t).replace(qg,`
`).replace(Qg,"")}function xi(t,e,n){if(e=ku(e),ku(t)!==e&&n)throw Error(L(425))}function ho(){}var oa=null,sa=null;function aa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var la=typeof setTimeout=="function"?setTimeout:void 0,Hg=typeof clearTimeout=="function"?clearTimeout:void 0,_u=typeof Promise=="function"?Promise:void 0,Xg=typeof queueMicrotask=="function"?queueMicrotask:typeof _u<"u"?function(t){return _u.resolve(null).then(t).catch(Zg)}:la;function Zg(t){setTimeout(function(){throw t})}function ws(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Kr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kr(e)}function en(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ur=Math.random().toString(36).slice(2),_t="__reactFiber$"+ur,Zr="__reactProps$"+ur,zt="__reactContainer$"+ur,ua="__reactEvents$"+ur,Jg="__reactListeners$"+ur,em="__reactHandles$"+ur;function pn(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zt]||n[_t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cu(t);t!==null;){if(n=t[_t])return n;t=Cu(t)}return e}t=n,n=t.parentNode}return null}function hi(t){return t=t[_t]||t[zt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Fo(t){return t[Zr]||null}var ca=[],On=-1;function un(t){return{current:t}}function ae(t){0>On||(t.current=ca[On],ca[On]=null,On--)}function oe(t,e){On++,ca[On]=t.current,t.current=e}var an={},De=un(an),$e=un(!1),Sn=an;function er(t,e){var n=t.type.contextTypes;if(!n)return an;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(t){return t=t.childContextTypes,t!=null}function fo(){ae($e),ae(De)}function xu(t,e,n){if(De.current!==an)throw Error(L(168));oe(De,e),oe($e,n)}function Yh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,Gp(t)||"Unknown",i));return fe({},n,r)}function po(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Sn=De.current,oe(De,t),oe($e,$e.current),!0}function Tu(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=Yh(t,e,Sn),r.__reactInternalMemoizedMergedChildContext=t,ae($e),ae(De),oe(De,t)):ae($e),oe($e,n)}var bt=null,Io=!1,Es=!1;function Kh(t){bt===null?bt=[t]:bt.push(t)}function tm(t){Io=!0,Kh(t)}function cn(){if(!Es&&bt!==null){Es=!0;var t=0,e=te;try{var n=bt;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bt=null,Io=!1}catch(i){throw bt!==null&&(bt=bt.slice(t+1)),yh(qa,cn),i}finally{te=e,Es=!1}}return null}var jn=[],$n=0,go=null,mo=0,et=[],tt=0,kn=null,Mt=1,Pt="";function fn(t,e){jn[$n++]=mo,jn[$n++]=go,go=t,mo=e}function qh(t,e,n){et[tt++]=Mt,et[tt++]=Pt,et[tt++]=kn,kn=t;var r=Mt;t=Pt;var i=32-yt(r)-1;r&=~(1<<i),n+=1;var o=32-yt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Mt=1<<32-yt(e)+i|n<<i|r,Pt=o+t}else Mt=1<<o|n<<i|r,Pt=t}function rl(t){t.return!==null&&(fn(t,1),qh(t,1,0))}function il(t){for(;t===go;)go=jn[--$n],jn[$n]=null,mo=jn[--$n],jn[$n]=null;for(;t===kn;)kn=et[--tt],et[tt]=null,Pt=et[--tt],et[tt]=null,Mt=et[--tt],et[tt]=null}var Ye=null,Ve=null,ue=!1,mt=null;function Qh(t,e){var n=nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ru(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ye=t,Ve=en(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ye=t,Ve=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kn!==null?{id:Mt,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ye=t,Ve=null,!0):!1;default:return!1}}function ha(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fa(t){if(ue){var e=Ve;if(e){var n=e;if(!Ru(t,e)){if(ha(t))throw Error(L(418));e=en(n.nextSibling);var r=Ye;e&&Ru(t,e)?Qh(r,n):(t.flags=t.flags&-4097|2,ue=!1,Ye=t)}}else{if(ha(t))throw Error(L(418));t.flags=t.flags&-4097|2,ue=!1,Ye=t}}}function Nu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ye=t}function Ti(t){if(t!==Ye)return!1;if(!ue)return Nu(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!aa(t.type,t.memoizedProps)),e&&(e=Ve)){if(ha(t))throw Hh(),Error(L(418));for(;e;)Qh(t,e),e=en(e.nextSibling)}if(Nu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ve=en(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ve=null}}else Ve=Ye?en(t.stateNode.nextSibling):null;return!0}function Hh(){for(var t=Ve;t;)t=en(t.nextSibling)}function tr(){Ve=Ye=null,ue=!1}function ol(t){mt===null?mt=[t]:mt.push(t)}var nm=jt.ReactCurrentBatchConfig;function yr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Ri(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bu(t){var e=t._init;return e(t._payload)}function Xh(t){function e(d,p){if(t){var v=d.deletions;v===null?(d.deletions=[p],d.flags|=16):v.push(p)}}function n(d,p){if(!t)return null;for(;p!==null;)e(d,p),p=p.sibling;return null}function r(d,p){for(d=new Map;p!==null;)p.key!==null?d.set(p.key,p):d.set(p.index,p),p=p.sibling;return d}function i(d,p){return d=on(d,p),d.index=0,d.sibling=null,d}function o(d,p,v){return d.index=v,t?(v=d.alternate,v!==null?(v=v.index,v<p?(d.flags|=2,p):v):(d.flags|=2,p)):(d.flags|=1048576,p)}function s(d){return t&&d.alternate===null&&(d.flags|=2),d}function a(d,p,v,E){return p===null||p.tag!==6?(p=Rs(v,d.mode,E),p.return=d,p):(p=i(p,v),p.return=d,p)}function l(d,p,v,E){var _=v.type;return _===An?h(d,p,v.props.children,E,v.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vt&&bu(_)===p.type)?(E=i(p,v.props),E.ref=yr(d,p,v),E.return=d,E):(E=Zi(v.type,v.key,v.props,null,d.mode,E),E.ref=yr(d,p,v),E.return=d,E)}function u(d,p,v,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Ns(v,d.mode,E),p.return=d,p):(p=i(p,v.children||[]),p.return=d,p)}function h(d,p,v,E,_){return p===null||p.tag!==7?(p=yn(v,d.mode,E,_),p.return=d,p):(p=i(p,v),p.return=d,p)}function c(d,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Rs(""+p,d.mode,v),p.return=d,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case mi:return v=Zi(p.type,p.key,p.props,null,d.mode,v),v.ref=yr(d,null,p),v.return=d,v;case Pn:return p=Ns(p,d.mode,v),p.return=d,p;case Vt:var E=p._init;return c(d,E(p._payload),v)}if(br(p)||dr(p))return p=yn(p,d.mode,v,null),p.return=d,p;Ri(d,p)}return null}function f(d,p,v,E){var _=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(d,p,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case mi:return v.key===_?l(d,p,v,E):null;case Pn:return v.key===_?u(d,p,v,E):null;case Vt:return _=v._init,f(d,p,_(v._payload),E)}if(br(v)||dr(v))return _!==null?null:h(d,p,v,E,null);Ri(d,v)}return null}function g(d,p,v,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return d=d.get(v)||null,a(p,d,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case mi:return d=d.get(E.key===null?v:E.key)||null,l(p,d,E,_);case Pn:return d=d.get(E.key===null?v:E.key)||null,u(p,d,E,_);case Vt:var T=E._init;return g(d,p,v,T(E._payload),_)}if(br(E)||dr(E))return d=d.get(v)||null,h(p,d,E,_,null);Ri(p,E)}return null}function m(d,p,v,E){for(var _=null,T=null,k=p,x=p=0,O=null;k!==null&&x<v.length;x++){k.index>x?(O=k,k=null):O=k.sibling;var w=f(d,k,v[x],E);if(w===null){k===null&&(k=O);break}t&&k&&w.alternate===null&&e(d,k),p=o(w,p,x),T===null?_=w:T.sibling=w,T=w,k=O}if(x===v.length)return n(d,k),ue&&fn(d,x),_;if(k===null){for(;x<v.length;x++)k=c(d,v[x],E),k!==null&&(p=o(k,p,x),T===null?_=k:T.sibling=k,T=k);return ue&&fn(d,x),_}for(k=r(d,k);x<v.length;x++)O=g(k,d,x,v[x],E),O!==null&&(t&&O.alternate!==null&&k.delete(O.key===null?x:O.key),p=o(O,p,x),T===null?_=O:T.sibling=O,T=O);return t&&k.forEach(function(C){return e(d,C)}),ue&&fn(d,x),_}function y(d,p,v,E){var _=dr(v);if(typeof _!="function")throw Error(L(150));if(v=_.call(v),v==null)throw Error(L(151));for(var T=_=null,k=p,x=p=0,O=null,w=v.next();k!==null&&!w.done;x++,w=v.next()){k.index>x?(O=k,k=null):O=k.sibling;var C=f(d,k,w.value,E);if(C===null){k===null&&(k=O);break}t&&k&&C.alternate===null&&e(d,k),p=o(C,p,x),T===null?_=C:T.sibling=C,T=C,k=O}if(w.done)return n(d,k),ue&&fn(d,x),_;if(k===null){for(;!w.done;x++,w=v.next())w=c(d,w.value,E),w!==null&&(p=o(w,p,x),T===null?_=w:T.sibling=w,T=w);return ue&&fn(d,x),_}for(k=r(d,k);!w.done;x++,w=v.next())w=g(k,d,x,w.value,E),w!==null&&(t&&w.alternate!==null&&k.delete(w.key===null?x:w.key),p=o(w,p,x),T===null?_=w:T.sibling=w,T=w);return t&&k.forEach(function(b){return e(d,b)}),ue&&fn(d,x),_}function S(d,p,v,E){if(typeof v=="object"&&v!==null&&v.type===An&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case mi:e:{for(var _=v.key,T=p;T!==null;){if(T.key===_){if(_=v.type,_===An){if(T.tag===7){n(d,T.sibling),p=i(T,v.props.children),p.return=d,d=p;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vt&&bu(_)===T.type){n(d,T.sibling),p=i(T,v.props),p.ref=yr(d,T,v),p.return=d,d=p;break e}n(d,T);break}else e(d,T);T=T.sibling}v.type===An?(p=yn(v.props.children,d.mode,E,v.key),p.return=d,d=p):(E=Zi(v.type,v.key,v.props,null,d.mode,E),E.ref=yr(d,p,v),E.return=d,d=E)}return s(d);case Pn:e:{for(T=v.key;p!==null;){if(p.key===T)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(d,p.sibling),p=i(p,v.children||[]),p.return=d,d=p;break e}else{n(d,p);break}else e(d,p);p=p.sibling}p=Ns(v,d.mode,E),p.return=d,d=p}return s(d);case Vt:return T=v._init,S(d,p,T(v._payload),E)}if(br(v))return m(d,p,v,E);if(dr(v))return y(d,p,v,E);Ri(d,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(d,p.sibling),p=i(p,v),p.return=d,d=p):(n(d,p),p=Rs(v,d.mode,E),p.return=d,d=p),s(d)):n(d,p)}return S}var nr=Xh(!0),Zh=Xh(!1),vo=un(null),yo=null,Un=null,sl=null;function al(){sl=Un=yo=null}function ll(t){var e=vo.current;ae(vo),t._currentValue=e}function da(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qn(t,e){yo=t,sl=Un=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(je=!0),t.firstContext=null)}function ot(t){var e=t._currentValue;if(sl!==t)if(t={context:t,memoizedValue:e,next:null},Un===null){if(yo===null)throw Error(L(308));Un=t,yo.dependencies={lanes:0,firstContext:t}}else Un=Un.next=t;return e}var gn=null;function ul(t){gn===null?gn=[t]:gn.push(t)}function Jh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ul(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gt(t,r)}function Gt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yt=!1;function cl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ef(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function At(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gt(t,n)}return i=r.interleaved,i===null?(e.next=e,ul(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gt(t,n)}function Yi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qa(t,n)}}function Lu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wo(t,e,n,r){var i=t.updateQueue;Yt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==s&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(o!==null){var c=i.baseState;s=0,h=u=l=null,a=o;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(f=e,g=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){c=m.call(g,c,f);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(g,c,f):m,f==null)break e;c=fe({},c,f);break e;case 2:Yt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=c):h=h.next=g,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Cn|=s,t.lanes=s,t.memoizedState=c}}function Du(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var fi={},xt=un(fi),Jr=un(fi),ei=un(fi);function mn(t){if(t===fi)throw Error(L(174));return t}function hl(t,e){switch(oe(ei,e),oe(Jr,t),oe(xt,fi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ks(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ks(e,t)}ae(xt),oe(xt,e)}function rr(){ae(xt),ae(Jr),ae(ei)}function tf(t){mn(ei.current);var e=mn(xt.current),n=Ks(e,t.type);e!==n&&(oe(Jr,t),oe(xt,n))}function fl(t){Jr.current===t&&(ae(xt),ae(Jr))}var ce=un(0);function Eo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ss=[];function dl(){for(var t=0;t<Ss.length;t++)Ss[t]._workInProgressVersionPrimary=null;Ss.length=0}var Ki=jt.ReactCurrentDispatcher,ks=jt.ReactCurrentBatchConfig,_n=0,he=null,ye=null,Se=null,So=!1,zr=!1,ti=0,rm=0;function Re(){throw Error(L(321))}function pl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Et(t[n],e[n]))return!1;return!0}function gl(t,e,n,r,i,o){if(_n=o,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ki.current=t===null||t.memoizedState===null?am:lm,t=n(r,i),zr){o=0;do{if(zr=!1,ti=0,25<=o)throw Error(L(301));o+=1,Se=ye=null,e.updateQueue=null,Ki.current=um,t=n(r,i)}while(zr)}if(Ki.current=ko,e=ye!==null&&ye.next!==null,_n=0,Se=ye=he=null,So=!1,e)throw Error(L(300));return t}function ml(){var t=ti!==0;return ti=0,t}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?he.memoizedState=Se=t:Se=Se.next=t,Se}function st(){if(ye===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=ye.next;var e=Se===null?he.memoizedState:Se.next;if(e!==null)Se=e,ye=t;else{if(t===null)throw Error(L(310));ye=t,t={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Se===null?he.memoizedState=Se=t:Se=Se.next=t}return Se}function ni(t,e){return typeof e=="function"?e(t):e}function _s(t){var e=st(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=ye,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var h=u.lane;if((_n&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,s=r):l=l.next=c,he.lanes|=h,Cn|=h}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Et(r,e.memoizedState)||(je=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,he.lanes|=o,Cn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cs(t){var e=st(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Et(o,e.memoizedState)||(je=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function nf(){}function rf(t,e){var n=he,r=st(),i=e(),o=!Et(r.memoizedState,i);if(o&&(r.memoizedState=i,je=!0),r=r.queue,vl(af.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,ri(9,sf.bind(null,n,r,i,e),void 0,null),ke===null)throw Error(L(349));_n&30||of(n,e,i)}return i}function of(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sf(t,e,n,r){e.value=n,e.getSnapshot=r,lf(e)&&uf(t)}function af(t,e,n){return n(function(){lf(e)&&uf(t)})}function lf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Et(t,n)}catch{return!0}}function uf(t){var e=Gt(t,1);e!==null&&wt(e,t,1,-1)}function Mu(t){var e=kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:t},e.queue=t,t=t.dispatch=sm.bind(null,he,t),[e.memoizedState,t]}function ri(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cf(){return st().memoizedState}function qi(t,e,n,r){var i=kt();he.flags|=t,i.memoizedState=ri(1|e,n,void 0,r===void 0?null:r)}function zo(t,e,n,r){var i=st();r=r===void 0?null:r;var o=void 0;if(ye!==null){var s=ye.memoizedState;if(o=s.destroy,r!==null&&pl(r,s.deps)){i.memoizedState=ri(e,n,o,r);return}}he.flags|=t,i.memoizedState=ri(1|e,n,o,r)}function Pu(t,e){return qi(8390656,8,t,e)}function vl(t,e){return zo(2048,8,t,e)}function hf(t,e){return zo(4,2,t,e)}function ff(t,e){return zo(4,4,t,e)}function df(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pf(t,e,n){return n=n!=null?n.concat([t]):null,zo(4,4,df.bind(null,e,t),n)}function yl(){}function gf(t,e){var n=st();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pl(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mf(t,e){var n=st();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pl(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vf(t,e,n){return _n&21?(Et(n,e)||(n=Sh(),he.lanes|=n,Cn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,je=!0),t.memoizedState=n)}function im(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=ks.transition;ks.transition={};try{t(!1),e()}finally{te=n,ks.transition=r}}function yf(){return st().memoizedState}function om(t,e,n){var r=rn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wf(t))Ef(e,n);else if(n=Jh(t,e,n,r),n!==null){var i=Fe();wt(n,t,r,i),Sf(n,e,r)}}function sm(t,e,n){var r=rn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wf(t))Ef(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Et(a,s)){var l=e.interleaved;l===null?(i.next=i,ul(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Jh(t,e,i,r),n!==null&&(i=Fe(),wt(n,t,r,i),Sf(n,e,r))}}function wf(t){var e=t.alternate;return t===he||e!==null&&e===he}function Ef(t,e){zr=So=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sf(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qa(t,n)}}var ko={readContext:ot,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},am={readContext:ot,useCallback:function(t,e){return kt().memoizedState=[t,e===void 0?null:e],t},useContext:ot,useEffect:Pu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qi(4194308,4,df.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qi(4194308,4,t,e)},useInsertionEffect:function(t,e){return qi(4,2,t,e)},useMemo:function(t,e){var n=kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=om.bind(null,he,t),[r.memoizedState,t]},useRef:function(t){var e=kt();return t={current:t},e.memoizedState=t},useState:Mu,useDebugValue:yl,useDeferredValue:function(t){return kt().memoizedState=t},useTransition:function(){var t=Mu(!1),e=t[0];return t=im.bind(null,t[1]),kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=he,i=kt();if(ue){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),ke===null)throw Error(L(349));_n&30||of(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Pu(af.bind(null,r,o,t),[t]),r.flags|=2048,ri(9,sf.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=kt(),e=ke.identifierPrefix;if(ue){var n=Pt,r=Mt;n=(r&~(1<<32-yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ti++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rm++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lm={readContext:ot,useCallback:gf,useContext:ot,useEffect:vl,useImperativeHandle:pf,useInsertionEffect:hf,useLayoutEffect:ff,useMemo:mf,useReducer:_s,useRef:cf,useState:function(){return _s(ni)},useDebugValue:yl,useDeferredValue:function(t){var e=st();return vf(e,ye.memoizedState,t)},useTransition:function(){var t=_s(ni)[0],e=st().memoizedState;return[t,e]},useMutableSource:nf,useSyncExternalStore:rf,useId:yf,unstable_isNewReconciler:!1},um={readContext:ot,useCallback:gf,useContext:ot,useEffect:vl,useImperativeHandle:pf,useInsertionEffect:hf,useLayoutEffect:ff,useMemo:mf,useReducer:Cs,useRef:cf,useState:function(){return Cs(ni)},useDebugValue:yl,useDeferredValue:function(t){var e=st();return ye===null?e.memoizedState=t:vf(e,ye.memoizedState,t)},useTransition:function(){var t=Cs(ni)[0],e=st().memoizedState;return[t,e]},useMutableSource:nf,useSyncExternalStore:rf,useId:yf,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Go={isMounted:function(t){return(t=t._reactInternals)?Rn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fe(),i=rn(t),o=At(r,i);o.payload=e,n!=null&&(o.callback=n),e=tn(t,o,i),e!==null&&(wt(e,t,i,r),Yi(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fe(),i=rn(t),o=At(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=tn(t,o,i),e!==null&&(wt(e,t,i,r),Yi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fe(),r=rn(t),i=At(n,r);i.tag=2,e!=null&&(i.callback=e),e=tn(t,i,r),e!==null&&(wt(e,t,r,n),Yi(e,t,r))}};function Au(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Qr(n,r)||!Qr(i,o):!0}function kf(t,e,n){var r=!1,i=an,o=e.contextType;return typeof o=="object"&&o!==null?o=ot(o):(i=Ue(e)?Sn:De.current,r=e.contextTypes,o=(r=r!=null)?er(t,i):an),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Go,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Fu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Go.enqueueReplaceState(e,e.state,null)}function ga(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},cl(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ot(o):(o=Ue(e)?Sn:De.current,i.context=er(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(pa(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Go.enqueueReplaceState(i,i.state,null),wo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ir(t,e){try{var n="",r=e;do n+=zp(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function xs(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ma(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cm=typeof WeakMap=="function"?WeakMap:Map;function _f(t,e,n){n=At(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Co||(Co=!0,Ta=r),ma(t,e)},n}function Cf(t,e,n){n=At(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ma(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ma(t,e),typeof r!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Iu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cm;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Cm.bind(null,t,e,n),e.then(t,t))}function zu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gu(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=At(-1,1),e.tag=2,tn(n,e,1))),n.lanes|=1),t)}var hm=jt.ReactCurrentOwner,je=!1;function Ae(t,e,n,r){e.child=t===null?Zh(e,null,n,r):nr(e,t.child,n,r)}function Ou(t,e,n,r,i){n=n.render;var o=e.ref;return Qn(e,i),r=gl(t,e,n,r,o,i),n=ml(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ot(t,e,i)):(ue&&n&&rl(e),e.flags|=1,Ae(t,e,r,i),e.child)}function ju(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Tl(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,xf(t,e,o,r,i)):(t=Zi(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Qr,n(s,r)&&t.ref===e.ref)return Ot(t,e,i)}return e.flags|=1,t=on(o,r),t.ref=e.ref,t.return=e,e.child=t}function xf(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Qr(o,r)&&t.ref===e.ref)if(je=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(je=!0);else return e.lanes=t.lanes,Ot(t,e,i)}return va(t,e,n,r,i)}function Tf(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Wn,We),We|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(Wn,We),We|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,oe(Wn,We),We|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,oe(Wn,We),We|=r;return Ae(t,e,i,n),e.child}function Rf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function va(t,e,n,r,i){var o=Ue(n)?Sn:De.current;return o=er(e,o),Qn(e,i),n=gl(t,e,n,r,o,i),r=ml(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ot(t,e,i)):(ue&&r&&rl(e),e.flags|=1,Ae(t,e,n,i),e.child)}function $u(t,e,n,r,i){if(Ue(n)){var o=!0;po(e)}else o=!1;if(Qn(e,i),e.stateNode===null)Qi(t,e),kf(e,n,r),ga(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=Ue(n)?Sn:De.current,u=er(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Fu(e,s,r,u),Yt=!1;var f=e.memoizedState;s.state=f,wo(e,r,s,i),l=e.memoizedState,a!==r||f!==l||$e.current||Yt?(typeof h=="function"&&(pa(e,n,h,r),l=e.memoizedState),(a=Yt||Au(e,n,a,r,f,l,u))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,ef(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:pt(e.type,a),s.props=u,c=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=ot(l):(l=Ue(n)?Sn:De.current,l=er(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==c||f!==l)&&Fu(e,s,r,l),Yt=!1,f=e.memoizedState,s.state=f,wo(e,r,s,i);var m=e.memoizedState;a!==c||f!==m||$e.current||Yt?(typeof g=="function"&&(pa(e,n,g,r),m=e.memoizedState),(u=Yt||Au(e,n,u,r,f,m,l)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ya(t,e,n,r,o,i)}function ya(t,e,n,r,i,o){Rf(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Tu(e,n,!1),Ot(t,e,o);r=e.stateNode,hm.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=nr(e,t.child,null,o),e.child=nr(e,null,a,o)):Ae(t,e,a,o),e.memoizedState=r.state,i&&Tu(e,n,!0),e.child}function Nf(t){var e=t.stateNode;e.pendingContext?xu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xu(t,e.context,!1),hl(t,e.containerInfo)}function Uu(t,e,n,r,i){return tr(),ol(i),e.flags|=256,Ae(t,e,n,r),e.child}var wa={dehydrated:null,treeContext:null,retryLane:0};function Ea(t){return{baseLanes:t,cachePool:null,transitions:null}}function bf(t,e,n){var r=e.pendingProps,i=ce.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),oe(ce,i&1),t===null)return fa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=$o(s,r,0,null),t=yn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ea(n),e.memoizedState=wa,t):wl(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fm(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=on(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=on(a,o):(o=yn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Ea(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=wa,r}return o=t.child,t=o.sibling,r=on(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wl(t,e){return e=$o({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ni(t,e,n,r){return r!==null&&ol(r),nr(e,t.child,null,n),t=wl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fm(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=xs(Error(L(422))),Ni(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=$o({mode:"visible",children:r.children},i,0,null),o=yn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&nr(e,t.child,null,s),e.child.memoizedState=Ea(s),e.memoizedState=wa,o);if(!(e.mode&1))return Ni(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(L(419)),r=xs(o,r,void 0),Ni(t,e,s,r)}if(a=(s&t.childLanes)!==0,je||a){if(r=ke,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Gt(t,i),wt(r,t,i,-1))}return xl(),r=xs(Error(L(421))),Ni(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=xm.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ve=en(i.nextSibling),Ye=e,ue=!0,mt=null,t!==null&&(et[tt++]=Mt,et[tt++]=Pt,et[tt++]=kn,Mt=t.id,Pt=t.overflow,kn=e),e=wl(e,r.children),e.flags|=4096,e)}function Bu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),da(t.return,e,n)}function Ts(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Lf(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ae(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bu(t,n,e);else if(t.tag===19)Bu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(oe(ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Eo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ts(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Eo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ts(e,!0,n,null,o);break;case"together":Ts(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ot(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=on(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=on(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dm(t,e,n){switch(e.tag){case 3:Nf(e),tr();break;case 5:tf(e);break;case 1:Ue(e.type)&&po(e);break;case 4:hl(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;oe(vo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(oe(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?bf(t,e,n):(oe(ce,ce.current&1),t=Ot(t,e,n),t!==null?t.sibling:null);oe(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Lf(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oe(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Tf(t,e,n)}return Ot(t,e,n)}var Df,Sa,Mf,Pf;Df=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sa=function(){};Mf=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,mn(xt.current);var o=null;switch(n){case"input":i=Bs(t,i),r=Bs(t,r),o=[];break;case"select":i=fe({},i,{value:void 0}),r=fe({},r,{value:void 0}),o=[];break;case"textarea":i=Ys(t,i),r=Ys(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ho)}qs(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ur.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ur.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&se("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Pf=function(t,e,n,r){n!==r&&(e.flags|=4)};function wr(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pm(t,e,n){var r=e.pendingProps;switch(il(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return Ue(e.type)&&fo(),Ne(e),null;case 3:return r=e.stateNode,rr(),ae($e),ae(De),dl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ti(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mt!==null&&(ba(mt),mt=null))),Sa(t,e),Ne(e),null;case 5:fl(e);var i=mn(ei.current);if(n=e.type,t!==null&&e.stateNode!=null)Mf(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Ne(e),null}if(t=mn(xt.current),Ti(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[_t]=e,r[Zr]=o,t=(e.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)se(Dr[i],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":Zl(r,o),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},se("invalid",r);break;case"textarea":eu(r,o),se("invalid",r)}qs(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&xi(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&xi(r.textContent,a,t),i=["children",""+a]):Ur.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&se("scroll",r)}switch(n){case"input":vi(r),Jl(r,o,!0);break;case"textarea":vi(r),tu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ho)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[_t]=e,t[Zr]=r,Df(t,e,!1,!1),e.stateNode=t;e:{switch(s=Qs(n,r),n){case"dialog":se("cancel",t),se("close",t),i=r;break;case"iframe":case"object":case"embed":se("load",t),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)se(Dr[i],t);i=r;break;case"source":se("error",t),i=r;break;case"img":case"image":case"link":se("error",t),se("load",t),i=r;break;case"details":se("toggle",t),i=r;break;case"input":Zl(t,r),i=Bs(t,r),se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=fe({},r,{value:void 0}),se("invalid",t);break;case"textarea":eu(t,r),i=Ys(t,r),se("invalid",t);break;default:i=r}qs(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?uh(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ah(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Br(t,l):typeof l=="number"&&Br(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ur.hasOwnProperty(o)?l!=null&&o==="onScroll"&&se("scroll",t):l!=null&&Ba(t,o,l,s))}switch(n){case"input":vi(t),Jl(t,r,!1);break;case"textarea":vi(t),tu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vn(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ho)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(t&&e.stateNode!=null)Pf(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=mn(ei.current),mn(xt.current),Ti(e)){if(r=e.stateNode,n=e.memoizedProps,r[_t]=e,(o=r.nodeValue!==n)&&(t=Ye,t!==null))switch(t.tag){case 3:xi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xi(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return Ne(e),null;case 13:if(ae(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&Ve!==null&&e.mode&1&&!(e.flags&128))Hh(),tr(),e.flags|=98560,o=!1;else if(o=Ti(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(L(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(L(317));o[_t]=e}else tr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),o=!1}else mt!==null&&(ba(mt),mt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?Ee===0&&(Ee=3):xl())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return rr(),Sa(t,e),t===null&&Hr(e.stateNode.containerInfo),Ne(e),null;case 10:return ll(e.type._context),Ne(e),null;case 17:return Ue(e.type)&&fo(),Ne(e),null;case 19:if(ae(ce),o=e.memoizedState,o===null)return Ne(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)wr(o,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Eo(t),s!==null){for(e.flags|=128,wr(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(ce,ce.current&1|2),e.child}t=t.sibling}o.tail!==null&&me()>or&&(e.flags|=128,r=!0,wr(o,!1),e.lanes=4194304)}else{if(!r)if(t=Eo(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ue)return Ne(e),null}else 2*me()-o.renderingStartTime>or&&n!==1073741824&&(e.flags|=128,r=!0,wr(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=me(),e.sibling=null,n=ce.current,oe(ce,r?n&1|2:n&1),e):(Ne(e),null);case 22:case 23:return Cl(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?We&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function gm(t,e){switch(il(e),e.tag){case 1:return Ue(e.type)&&fo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rr(),ae($e),ae(De),dl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fl(e),null;case 13:if(ae(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));tr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ae(ce),null;case 4:return rr(),null;case 10:return ll(e.type._context),null;case 22:case 23:return Cl(),null;case 24:return null;default:return null}}var bi=!1,Le=!1,mm=typeof WeakSet=="function"?WeakSet:Set,z=null;function Bn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(t,e,r)}else n.current=null}function ka(t,e,n){try{n()}catch(r){de(t,e,r)}}var Wu=!1;function vm(t,e){if(oa=lo,t=zh(),nl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,h=0,c=t,f=null;t:for(;;){for(var g;c!==n||i!==0&&c.nodeType!==3||(a=s+i),c!==o||r!==0&&c.nodeType!==3||(l=s+r),c.nodeType===3&&(s+=c.nodeValue.length),(g=c.firstChild)!==null;)f=c,c=g;for(;;){if(c===t)break t;if(f===n&&++u===i&&(a=s),f===o&&++h===r&&(l=s),(g=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sa={focusedElem:t,selectionRange:n},lo=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,S=m.memoizedState,d=e.stateNode,p=d.getSnapshotBeforeUpdate(e.elementType===e.type?y:pt(e.type,y),S);d.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){de(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return m=Wu,Wu=!1,m}function Gr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&ka(e,n,o)}i=i.next}while(i!==r)}}function Oo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _a(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Af(t){var e=t.alternate;e!==null&&(t.alternate=null,Af(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_t],delete e[Zr],delete e[ua],delete e[Jg],delete e[em])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ff(t){return t.tag===5||t.tag===3||t.tag===4}function Vu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ff(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ca(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ho));else if(r!==4&&(t=t.child,t!==null))for(Ca(t,e,n),t=t.sibling;t!==null;)Ca(t,e,n),t=t.sibling}function xa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xa(t,e,n),t=t.sibling;t!==null;)xa(t,e,n),t=t.sibling}var _e=null,gt=!1;function Bt(t,e,n){for(n=n.child;n!==null;)If(t,e,n),n=n.sibling}function If(t,e,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Do,n)}catch{}switch(n.tag){case 5:Le||Bn(n,e);case 6:var r=_e,i=gt;_e=null,Bt(t,e,n),_e=r,gt=i,_e!==null&&(gt?(t=_e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(gt?(t=_e,n=n.stateNode,t.nodeType===8?ws(t.parentNode,n):t.nodeType===1&&ws(t,n),Kr(t)):ws(_e,n.stateNode));break;case 4:r=_e,i=gt,_e=n.stateNode.containerInfo,gt=!0,Bt(t,e,n),_e=r,gt=i;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&ka(n,e,s),i=i.next}while(i!==r)}Bt(t,e,n);break;case 1:if(!Le&&(Bn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){de(n,e,a)}Bt(t,e,n);break;case 21:Bt(t,e,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,Bt(t,e,n),Le=r):Bt(t,e,n);break;default:Bt(t,e,n)}}function Yu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mm),e.forEach(function(r){var i=Tm.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ht(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:_e=a.stateNode,gt=!1;break e;case 3:_e=a.stateNode.containerInfo,gt=!0;break e;case 4:_e=a.stateNode.containerInfo,gt=!0;break e}a=a.return}if(_e===null)throw Error(L(160));If(o,s,i),_e=null,gt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){de(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zf(e,t),e=e.sibling}function zf(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ht(e,t),St(t),r&4){try{Gr(3,t,t.return),Oo(3,t)}catch(y){de(t,t.return,y)}try{Gr(5,t,t.return)}catch(y){de(t,t.return,y)}}break;case 1:ht(e,t),St(t),r&512&&n!==null&&Bn(n,n.return);break;case 5:if(ht(e,t),St(t),r&512&&n!==null&&Bn(n,n.return),t.flags&32){var i=t.stateNode;try{Br(i,"")}catch(y){de(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&ih(i,o),Qs(a,s);var u=Qs(a,o);for(s=0;s<l.length;s+=2){var h=l[s],c=l[s+1];h==="style"?uh(i,c):h==="dangerouslySetInnerHTML"?ah(i,c):h==="children"?Br(i,c):Ba(i,h,c,u)}switch(a){case"input":Ws(i,o);break;case"textarea":oh(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Vn(i,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?Vn(i,!!o.multiple,o.defaultValue,!0):Vn(i,!!o.multiple,o.multiple?[]:"",!1))}i[Zr]=o}catch(y){de(t,t.return,y)}}break;case 6:if(ht(e,t),St(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){de(t,t.return,y)}}break;case 3:if(ht(e,t),St(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kr(e.containerInfo)}catch(y){de(t,t.return,y)}break;case 4:ht(e,t),St(t);break;case 13:ht(e,t),St(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(kl=me())),r&4&&Yu(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Le=(u=Le)||h,ht(e,t),Le=u):ht(e,t),St(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(z=t,h=t.child;h!==null;){for(c=z=h;z!==null;){switch(f=z,g=f.child,f.tag){case 0:case 11:case 14:case 15:Gr(4,f,f.return);break;case 1:Bn(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){de(r,n,y)}}break;case 5:Bn(f,f.return);break;case 22:if(f.memoizedState!==null){qu(c);continue}}g!==null?(g.return=f,z=g):qu(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=c.stateNode,l=c.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lh("display",s))}catch(y){de(t,t.return,y)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(y){de(t,t.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:ht(e,t),St(t),r&4&&Yu(t);break;case 21:break;default:ht(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ff(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Br(i,""),r.flags&=-33);var o=Vu(t);xa(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Vu(t);Ca(t,a,s);break;default:throw Error(L(161))}}catch(l){de(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ym(t,e,n){z=t,Gf(t)}function Gf(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||bi;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Le;a=bi;var u=Le;if(bi=s,(Le=l)&&!u)for(z=i;z!==null;)s=z,l=s.child,s.tag===22&&s.memoizedState!==null?Qu(i):l!==null?(l.return=s,z=l):Qu(i);for(;o!==null;)z=o,Gf(o),o=o.sibling;z=i,bi=a,Le=u}Ku(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,z=o):Ku(t)}}function Ku(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Le||Oo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Le)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Du(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Du(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Kr(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Le||e.flags&512&&_a(e)}catch(f){de(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function qu(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function Qu(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Oo(4,e)}catch(l){de(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){de(e,i,l)}}var o=e.return;try{_a(e)}catch(l){de(e,o,l)}break;case 5:var s=e.return;try{_a(e)}catch(l){de(e,s,l)}}}catch(l){de(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var wm=Math.ceil,_o=jt.ReactCurrentDispatcher,El=jt.ReactCurrentOwner,rt=jt.ReactCurrentBatchConfig,J=0,ke=null,ve=null,xe=0,We=0,Wn=un(0),Ee=0,ii=null,Cn=0,jo=0,Sl=0,Or=null,Ge=null,kl=0,or=1/0,Nt=null,Co=!1,Ta=null,nn=null,Li=!1,Ht=null,xo=0,jr=0,Ra=null,Hi=-1,Xi=0;function Fe(){return J&6?me():Hi!==-1?Hi:Hi=me()}function rn(t){return t.mode&1?J&2&&xe!==0?xe&-xe:nm.transition!==null?(Xi===0&&(Xi=Sh()),Xi):(t=te,t!==0||(t=window.event,t=t===void 0?16:Nh(t.type)),t):1}function wt(t,e,n,r){if(50<jr)throw jr=0,Ra=null,Error(L(185));ui(t,n,r),(!(J&2)||t!==ke)&&(t===ke&&(!(J&2)&&(jo|=n),Ee===4&&qt(t,xe)),Be(t,r),n===1&&J===0&&!(e.mode&1)&&(or=me()+500,Io&&cn()))}function Be(t,e){var n=t.callbackNode;ng(t,e);var r=ao(t,t===ke?xe:0);if(r===0)n!==null&&iu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iu(n),e===1)t.tag===0?tm(Hu.bind(null,t)):Kh(Hu.bind(null,t)),Xg(function(){!(J&6)&&cn()}),n=null;else{switch(kh(r)){case 1:n=qa;break;case 4:n=wh;break;case 16:n=so;break;case 536870912:n=Eh;break;default:n=so}n=Yf(n,Of.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Of(t,e){if(Hi=-1,Xi=0,J&6)throw Error(L(327));var n=t.callbackNode;if(Hn()&&t.callbackNode!==n)return null;var r=ao(t,t===ke?xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=To(t,r);else{e=r;var i=J;J|=2;var o=$f();(ke!==t||xe!==e)&&(Nt=null,or=me()+500,vn(t,e));do try{km();break}catch(a){jf(t,a)}while(!0);al(),_o.current=o,J=i,ve!==null?e=0:(ke=null,xe=0,e=Ee)}if(e!==0){if(e===2&&(i=ea(t),i!==0&&(r=i,e=Na(t,i))),e===1)throw n=ii,vn(t,0),qt(t,r),Be(t,me()),n;if(e===6)qt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Em(i)&&(e=To(t,r),e===2&&(o=ea(t),o!==0&&(r=o,e=Na(t,o))),e===1))throw n=ii,vn(t,0),qt(t,r),Be(t,me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:dn(t,Ge,Nt);break;case 3:if(qt(t,r),(r&130023424)===r&&(e=kl+500-me(),10<e)){if(ao(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=la(dn.bind(null,t,Ge,Nt),e);break}dn(t,Ge,Nt);break;case 4:if(qt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-yt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wm(r/1960))-r,10<r){t.timeoutHandle=la(dn.bind(null,t,Ge,Nt),r);break}dn(t,Ge,Nt);break;case 5:dn(t,Ge,Nt);break;default:throw Error(L(329))}}}return Be(t,me()),t.callbackNode===n?Of.bind(null,t):null}function Na(t,e){var n=Or;return t.current.memoizedState.isDehydrated&&(vn(t,e).flags|=256),t=To(t,e),t!==2&&(e=Ge,Ge=n,e!==null&&ba(e)),t}function ba(t){Ge===null?Ge=t:Ge.push.apply(Ge,t)}function Em(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Et(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qt(t,e){for(e&=~Sl,e&=~jo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yt(e),r=1<<n;t[n]=-1,e&=~r}}function Hu(t){if(J&6)throw Error(L(327));Hn();var e=ao(t,0);if(!(e&1))return Be(t,me()),null;var n=To(t,e);if(t.tag!==0&&n===2){var r=ea(t);r!==0&&(e=r,n=Na(t,r))}if(n===1)throw n=ii,vn(t,0),qt(t,e),Be(t,me()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dn(t,Ge,Nt),Be(t,me()),null}function _l(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(or=me()+500,Io&&cn())}}function xn(t){Ht!==null&&Ht.tag===0&&!(J&6)&&Hn();var e=J;J|=1;var n=rt.transition,r=te;try{if(rt.transition=null,te=1,t)return t()}finally{te=r,rt.transition=n,J=e,!(J&6)&&cn()}}function Cl(){We=Wn.current,ae(Wn)}function vn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Hg(n)),ve!==null)for(n=ve.return;n!==null;){var r=n;switch(il(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fo();break;case 3:rr(),ae($e),ae(De),dl();break;case 5:fl(r);break;case 4:rr();break;case 13:ae(ce);break;case 19:ae(ce);break;case 10:ll(r.type._context);break;case 22:case 23:Cl()}n=n.return}if(ke=t,ve=t=on(t.current,null),xe=We=e,Ee=0,ii=null,Sl=jo=Cn=0,Ge=Or=null,gn!==null){for(e=0;e<gn.length;e++)if(n=gn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}gn=null}return t}function jf(t,e){do{var n=ve;try{if(al(),Ki.current=ko,So){for(var r=he.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}So=!1}if(_n=0,Se=ye=he=null,zr=!1,ti=0,El.current=null,n===null||n.return===null){Ee=1,ii=e,ve=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=xe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=zu(s);if(g!==null){g.flags&=-257,Gu(g,s,a,o,e),g.mode&1&&Iu(o,u,e),e=g,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){Iu(o,u,e),xl();break e}l=Error(L(426))}}else if(ue&&a.mode&1){var S=zu(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Gu(S,s,a,o,e),ol(ir(l,a));break e}}o=l=ir(l,a),Ee!==4&&(Ee=2),Or===null?Or=[o]:Or.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var d=_f(o,l,e);Lu(o,d);break e;case 1:a=l;var p=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(nn===null||!nn.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=Cf(o,a,e);Lu(o,E);break e}}o=o.return}while(o!==null)}Bf(n)}catch(_){e=_,ve===n&&n!==null&&(ve=n=n.return);continue}break}while(!0)}function $f(){var t=_o.current;return _o.current=ko,t===null?ko:t}function xl(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),ke===null||!(Cn&268435455)&&!(jo&268435455)||qt(ke,xe)}function To(t,e){var n=J;J|=2;var r=$f();(ke!==t||xe!==e)&&(Nt=null,vn(t,e));do try{Sm();break}catch(i){jf(t,i)}while(!0);if(al(),J=n,_o.current=r,ve!==null)throw Error(L(261));return ke=null,xe=0,Ee}function Sm(){for(;ve!==null;)Uf(ve)}function km(){for(;ve!==null&&!Kp();)Uf(ve)}function Uf(t){var e=Vf(t.alternate,t,We);t.memoizedProps=t.pendingProps,e===null?Bf(t):ve=e,El.current=null}function Bf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gm(n,e),n!==null){n.flags&=32767,ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,ve=null;return}}else if(n=pm(n,e,We),n!==null){ve=n;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);Ee===0&&(Ee=5)}function dn(t,e,n){var r=te,i=rt.transition;try{rt.transition=null,te=1,_m(t,e,n,r)}finally{rt.transition=i,te=r}return null}function _m(t,e,n,r){do Hn();while(Ht!==null);if(J&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(rg(t,o),t===ke&&(ve=ke=null,xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Li||(Li=!0,Yf(so,function(){return Hn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=rt.transition,rt.transition=null;var s=te;te=1;var a=J;J|=4,El.current=null,vm(t,n),zf(n,t),Bg(sa),lo=!!oa,sa=oa=null,t.current=n,ym(n),qp(),J=a,te=s,rt.transition=o}else t.current=n;if(Li&&(Li=!1,Ht=t,xo=i),o=t.pendingLanes,o===0&&(nn=null),Xp(n.stateNode),Be(t,me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Co)throw Co=!1,t=Ta,Ta=null,t;return xo&1&&t.tag!==0&&Hn(),o=t.pendingLanes,o&1?t===Ra?jr++:(jr=0,Ra=t):jr=0,cn(),null}function Hn(){if(Ht!==null){var t=kh(xo),e=rt.transition,n=te;try{if(rt.transition=null,te=16>t?16:t,Ht===null)var r=!1;else{if(t=Ht,Ht=null,xo=0,J&6)throw Error(L(331));var i=J;for(J|=4,z=t.current;z!==null;){var o=z,s=o.child;if(z.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(z=u;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:Gr(8,h,o)}var c=h.child;if(c!==null)c.return=h,z=c;else for(;z!==null;){h=z;var f=h.sibling,g=h.return;if(Af(h),h===u){z=null;break}if(f!==null){f.return=g,z=f;break}z=g}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}z=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,z=s;else e:for(;z!==null;){if(o=z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Gr(9,o,o.return)}var d=o.sibling;if(d!==null){d.return=o.return,z=d;break e}z=o.return}}var p=t.current;for(z=p;z!==null;){s=z;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,z=v;else e:for(s=p;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Oo(9,a)}}catch(_){de(a,a.return,_)}if(a===s){z=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,z=E;break e}z=a.return}}if(J=i,cn(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Do,t)}catch{}r=!0}return r}finally{te=n,rt.transition=e}}return!1}function Xu(t,e,n){e=ir(n,e),e=_f(t,e,1),t=tn(t,e,1),e=Fe(),t!==null&&(ui(t,1,e),Be(t,e))}function de(t,e,n){if(t.tag===3)Xu(t,t,n);else for(;e!==null;){if(e.tag===3){Xu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nn===null||!nn.has(r))){t=ir(n,t),t=Cf(e,t,1),e=tn(e,t,1),t=Fe(),e!==null&&(ui(e,1,t),Be(e,t));break}}e=e.return}}function Cm(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fe(),t.pingedLanes|=t.suspendedLanes&n,ke===t&&(xe&n)===n&&(Ee===4||Ee===3&&(xe&130023424)===xe&&500>me()-kl?vn(t,0):Sl|=n),Be(t,e)}function Wf(t,e){e===0&&(t.mode&1?(e=Ei,Ei<<=1,!(Ei&130023424)&&(Ei=4194304)):e=1);var n=Fe();t=Gt(t,e),t!==null&&(ui(t,e,n),Be(t,n))}function xm(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Wf(t,n)}function Tm(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),Wf(t,n)}var Vf;Vf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$e.current)je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return je=!1,dm(t,e,n);je=!!(t.flags&131072)}else je=!1,ue&&e.flags&1048576&&qh(e,mo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qi(t,e),t=e.pendingProps;var i=er(e,De.current);Qn(e,n),i=gl(null,e,r,t,i,n);var o=ml();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(o=!0,po(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cl(e),i.updater=Go,e.stateNode=i,i._reactInternals=e,ga(e,r,t,n),e=ya(null,e,r,!0,o,n)):(e.tag=0,ue&&o&&rl(e),Ae(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qi(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Nm(r),t=pt(r,t),i){case 0:e=va(null,e,r,t,n);break e;case 1:e=$u(null,e,r,t,n);break e;case 11:e=Ou(null,e,r,t,n);break e;case 14:e=ju(null,e,r,pt(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),va(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),$u(t,e,r,i,n);case 3:e:{if(Nf(e),t===null)throw Error(L(387));r=e.pendingProps,o=e.memoizedState,i=o.element,ef(t,e),wo(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ir(Error(L(423)),e),e=Uu(t,e,r,n,i);break e}else if(r!==i){i=ir(Error(L(424)),e),e=Uu(t,e,r,n,i);break e}else for(Ve=en(e.stateNode.containerInfo.firstChild),Ye=e,ue=!0,mt=null,n=Zh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tr(),r===i){e=Ot(t,e,n);break e}Ae(t,e,r,n)}e=e.child}return e;case 5:return tf(e),t===null&&fa(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,aa(r,i)?s=null:o!==null&&aa(r,o)&&(e.flags|=32),Rf(t,e),Ae(t,e,s,n),e.child;case 6:return t===null&&fa(e),null;case 13:return bf(t,e,n);case 4:return hl(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nr(e,null,r,n):Ae(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),Ou(t,e,r,i,n);case 7:return Ae(t,e,e.pendingProps,n),e.child;case 8:return Ae(t,e,e.pendingProps.children,n),e.child;case 12:return Ae(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,oe(vo,r._currentValue),r._currentValue=s,o!==null)if(Et(o.value,s)){if(o.children===i.children&&!$e.current){e=Ot(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=At(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),da(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(L(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),da(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ae(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qn(e,n),i=ot(i),r=r(i),e.flags|=1,Ae(t,e,r,n),e.child;case 14:return r=e.type,i=pt(r,e.pendingProps),i=pt(r.type,i),ju(t,e,r,i,n);case 15:return xf(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),Qi(t,e),e.tag=1,Ue(r)?(t=!0,po(e)):t=!1,Qn(e,n),kf(e,r,i),ga(e,r,i,n),ya(null,e,r,!0,t,n);case 19:return Lf(t,e,n);case 22:return Tf(t,e,n)}throw Error(L(156,e.tag))};function Yf(t,e){return yh(t,e)}function Rm(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,n,r){return new Rm(t,e,n,r)}function Tl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nm(t){if(typeof t=="function")return Tl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Va)return 11;if(t===Ya)return 14}return 2}function on(t,e){var n=t.alternate;return n===null?(n=nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zi(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Tl(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case An:return yn(n.children,i,o,e);case Wa:s=8,i|=8;break;case Os:return t=nt(12,n,e,i|2),t.elementType=Os,t.lanes=o,t;case js:return t=nt(13,n,e,i),t.elementType=js,t.lanes=o,t;case $s:return t=nt(19,n,e,i),t.elementType=$s,t.lanes=o,t;case th:return $o(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jc:s=10;break e;case eh:s=9;break e;case Va:s=11;break e;case Ya:s=14;break e;case Vt:s=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=nt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function yn(t,e,n,r){return t=nt(7,t,r,e),t.lanes=n,t}function $o(t,e,n,r){return t=nt(22,t,r,e),t.elementType=th,t.lanes=n,t.stateNode={isHidden:!1},t}function Rs(t,e,n){return t=nt(6,t,null,e),t.lanes=n,t}function Ns(t,e,n){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bm(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ls(0),this.expirationTimes=ls(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rl(t,e,n,r,i,o,s,a,l){return t=new bm(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=nt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cl(o),t}function Lm(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Kf(t){if(!t)return an;t=t._reactInternals;e:{if(Rn(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Ue(n))return Yh(t,n,e)}return e}function qf(t,e,n,r,i,o,s,a,l){return t=Rl(n,r,!0,t,i,o,s,a,l),t.context=Kf(null),n=t.current,r=Fe(),i=rn(n),o=At(r,i),o.callback=e??null,tn(n,o,i),t.current.lanes=i,ui(t,i,r),Be(t,r),t}function Uo(t,e,n,r){var i=e.current,o=Fe(),s=rn(i);return n=Kf(n),e.context===null?e.context=n:e.pendingContext=n,e=At(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tn(i,e,s),t!==null&&(wt(t,i,s,o),Yi(t,i,s)),s}function Ro(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nl(t,e){Zu(t,e),(t=t.alternate)&&Zu(t,e)}function Dm(){return null}var Qf=typeof reportError=="function"?reportError:function(t){console.error(t)};function bl(t){this._internalRoot=t}Bo.prototype.render=bl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Uo(t,e,null,null)};Bo.prototype.unmount=bl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xn(function(){Uo(null,t,null,null)}),e[zt]=null}};function Bo(t){this._internalRoot=t}Bo.prototype.unstable_scheduleHydration=function(t){if(t){var e=xh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kt.length&&e!==0&&e<Kt[n].priority;n++);Kt.splice(n,0,t),n===0&&Rh(t)}};function Ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ju(){}function Mm(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Ro(s);o.call(u)}}var s=qf(e,r,t,0,null,!1,!1,"",Ju);return t._reactRootContainer=s,t[zt]=s.current,Hr(t.nodeType===8?t.parentNode:t),xn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Ro(l);a.call(u)}}var l=Rl(t,0,!1,null,null,!1,!1,"",Ju);return t._reactRootContainer=l,t[zt]=l.current,Hr(t.nodeType===8?t.parentNode:t),xn(function(){Uo(e,l,n,r)}),l}function Vo(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Ro(s);a.call(l)}}Uo(e,s,t,i)}else s=Mm(n,e,t,i,r);return Ro(s)}_h=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lr(e.pendingLanes);n!==0&&(Qa(e,n|1),Be(e,me()),!(J&6)&&(or=me()+500,cn()))}break;case 13:xn(function(){var r=Gt(t,1);if(r!==null){var i=Fe();wt(r,t,1,i)}}),Nl(t,1)}};Ha=function(t){if(t.tag===13){var e=Gt(t,134217728);if(e!==null){var n=Fe();wt(e,t,134217728,n)}Nl(t,134217728)}};Ch=function(t){if(t.tag===13){var e=rn(t),n=Gt(t,e);if(n!==null){var r=Fe();wt(n,t,e,r)}Nl(t,e)}};xh=function(){return te};Th=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Xs=function(t,e,n){switch(e){case"input":if(Ws(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fo(r);if(!i)throw Error(L(90));rh(r),Ws(r,i)}}}break;case"textarea":oh(t,n);break;case"select":e=n.value,e!=null&&Vn(t,!!n.multiple,e,!1)}};fh=_l;dh=xn;var Pm={usingClientEntryPoint:!1,Events:[hi,Gn,Fo,ch,hh,_l]},Er={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Am={bundleType:Er.bundleType,version:Er.version,rendererPackageName:Er.rendererPackageName,rendererConfig:Er.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mh(t),t===null?null:t.stateNode},findFiberByHostInstance:Er.findFiberByHostInstance||Dm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Di.isDisabled&&Di.supportsFiber)try{Do=Di.inject(Am),Ct=Di}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pm;Qe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ll(e))throw Error(L(200));return Lm(t,e,null,n)};Qe.createRoot=function(t,e){if(!Ll(t))throw Error(L(299));var n=!1,r="",i=Qf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rl(t,1,!1,null,null,n,!1,r,i),t[zt]=e.current,Hr(t.nodeType===8?t.parentNode:t),new bl(e)};Qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=mh(e),t=t===null?null:t.stateNode,t};Qe.flushSync=function(t){return xn(t)};Qe.hydrate=function(t,e,n){if(!Wo(e))throw Error(L(200));return Vo(null,t,e,!0,n)};Qe.hydrateRoot=function(t,e,n){if(!Ll(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Qf;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=qf(e,null,t,1,n??null,i,!1,o,s),t[zt]=e.current,Hr(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bo(e)};Qe.render=function(t,e,n){if(!Wo(e))throw Error(L(200));return Vo(null,t,e,!1,n)};Qe.unmountComponentAtNode=function(t){if(!Wo(t))throw Error(L(40));return t._reactRootContainer?(xn(function(){Vo(null,null,t,!1,function(){t._reactRootContainer=null,t[zt]=null})}),!0):!1};Qe.unstable_batchedUpdates=_l;Qe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wo(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Vo(t,e,n,!1,r)};Qe.version="18.3.1-next-f1338f8080-20240426";function Hf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hf)}catch(t){console.error(t)}}Hf(),Qc.exports=Qe;var Fm=Qc.exports,Xf,ec=Fm;Xf=ec.createRoot,ec.hydrateRoot;var Dl={exports:{}},Xn=typeof Reflect=="object"?Reflect:null,tc=Xn&&typeof Xn.apply=="function"?Xn.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Ji;Xn&&typeof Xn.ownKeys=="function"?Ji=Xn.ownKeys:Object.getOwnPropertySymbols?Ji=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ji=function(e){return Object.getOwnPropertyNames(e)};function Im(t){console&&console.warn&&console.warn(t)}var Zf=Number.isNaN||function(e){return e!==e};function re(){re.init.call(this)}Dl.exports=re;Dl.exports.once=jm;re.EventEmitter=re;re.prototype._events=void 0;re.prototype._eventsCount=0;re.prototype._maxListeners=void 0;var nc=10;function Yo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(re,"defaultMaxListeners",{enumerable:!0,get:function(){return nc},set:function(t){if(typeof t!="number"||t<0||Zf(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nc=t}});re.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};re.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Zf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Jf(t){return t._maxListeners===void 0?re.defaultMaxListeners:t._maxListeners}re.prototype.getMaxListeners=function(){return Jf(this)};re.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")tc(l,this,n);else for(var u=l.length,h=id(l,u),r=0;r<u;++r)tc(h[r],this,n);return!0};function ed(t,e,n,r){var i,o,s;if(Yo(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Jf(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,Im(a)}return t}re.prototype.addListener=function(e,n){return ed(this,e,n,!1)};re.prototype.on=re.prototype.addListener;re.prototype.prependListener=function(e,n){return ed(this,e,n,!0)};function zm(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function td(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=zm.bind(r);return i.listener=n,r.wrapFn=i,i}re.prototype.once=function(e,n){return Yo(n),this.on(e,td(this,e,n)),this};re.prototype.prependOnceListener=function(e,n){return Yo(n),this.prependListener(e,td(this,e,n)),this};re.prototype.removeListener=function(e,n){var r,i,o,s,a;if(Yo(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():Gm(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};re.prototype.off=re.prototype.removeListener;re.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function nd(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Om(i):id(i,i.length)}re.prototype.listeners=function(e){return nd(this,e,!0)};re.prototype.rawListeners=function(e){return nd(this,e,!1)};re.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):rd.call(t,e)};re.prototype.listenerCount=rd;function rd(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}re.prototype.eventNames=function(){return this._eventsCount>0?Ji(this._events):[]};function id(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Gm(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Om(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function jm(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}od(t,e,o,{once:!0}),e!=="error"&&$m(t,i,{once:!0})})}function $m(t,e,n){typeof t.on=="function"&&od(t,"error",e,n)}function od(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var sd=Dl.exports;function Tt(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Tt.prototype[Symbol.iterator]=function(){return this});Tt.of=function(){var t=arguments,e=t.length,n=0;return new Tt(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Tt.empty=function(){var t=new Tt(function(){return{done:!0}});return t};Tt.fromSequence=function(t){var e=0,n=t.length;return new Tt(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Tt.is=function(t){return t instanceof Tt?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Ml=Tt;const at=ai(Ml);var Pl={};Pl.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Pl.SYMBOL_SUPPORT=typeof Symbol<"u";var Um=Ml,ad=Pl,Bm=ad.ARRAY_BUFFER_SUPPORT,Wm=ad.SYMBOL_SUPPORT;function Vm(t){return typeof t=="string"||Array.isArray(t)||Bm&&ArrayBuffer.isView(t)?Um.fromSequence(t):typeof t!="object"||t===null?null:Wm&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var ld=function(e){var n=Vm(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Ym=ld,Km=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],o,s=0,a=Ym(e);;){if(s===r)return i;if(o=a.next(),o.done)return s!==n&&(i.length=s),i;i[s++]=o.value}};const ud=ai(Km);var qm=Ml,Qm=ld,Hm=function(){var e=arguments,n=null,r=-1;return new qm(function(){var o=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=Qm(e[r])}if(o=n.next(),o.done===!0){n=null;continue}break}while(!0);return o})};const Ft=ai(Hm);function Xm(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let we=Xm;typeof Object.assign=="function"&&(we=Object.assign);function it(t,e,n,r){const i=t._nodes.get(e);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?o=i.out&&i.out[n]:o=i.undirected&&i.undirected[n]),o}function Ce(t){return typeof t=="object"&&t!==null}function cd(t){let e;for(e in t)return!1;return!0}function Xe(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ft(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function rc(t){return!(!Ce(t)||t.attributes&&!Array.isArray(t.attributes))}function Zm(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Al extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class F extends Al{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,F.prototype.constructor)}}class P extends Al{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,P.prototype.constructor)}}class U extends Al{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,U.prototype.constructor)}}function hd(t,e){this.key=t,this.attributes=e,this.clear()}hd.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function fd(t,e){this.key=t,this.attributes=e,this.clear()}fd.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function dd(t,e){this.key=t,this.attributes=e,this.clear()}dd.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function cr(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}cr.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};cr.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[e][n]=this};cr.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};cr.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const pd=0,gd=1,Jm=2,md=3;function $t(t,e,n,r,i,o,s){let a,l,u,h;if(r=""+r,n===pd){if(a=t._nodes.get(r),!a)throw new P(`Graph.${e}: could not find the "${r}" node in the graph.`);u=i,h=o}else if(n===md){if(i=""+i,l=t._edges.get(i),!l)throw new P(`Graph.${e}: could not find the "${i}" edge in the graph.`);const c=l.source.key,f=l.target.key;if(r===c)a=l.target;else if(r===f)a=l.source;else throw new P(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${c}, ${f}).`);u=o,h=s}else{if(l=t._edges.get(r),!l)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===gd?a=l.source:a=l.target,u=i,h=o}return[a,u,h]}function ev(t,e,n){t.prototype[e]=function(r,i,o){const[s,a]=$t(this,e,n,r,i,o);return s.attributes[a]}}function tv(t,e,n){t.prototype[e]=function(r,i){const[o]=$t(this,e,n,r,i);return o.attributes}}function nv(t,e,n){t.prototype[e]=function(r,i,o){const[s,a]=$t(this,e,n,r,i,o);return s.attributes.hasOwnProperty(a)}}function rv(t,e,n){t.prototype[e]=function(r,i,o,s){const[a,l,u]=$t(this,e,n,r,i,o,s);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function iv(t,e,n){t.prototype[e]=function(r,i,o,s){const[a,l,u]=$t(this,e,n,r,i,o,s);if(typeof u!="function")throw new F(`Graph.${e}: updater should be a function.`);const h=a.attributes,c=u(h[l]);return h[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function ov(t,e,n){t.prototype[e]=function(r,i,o){const[s,a]=$t(this,e,n,r,i,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function sv(t,e,n){t.prototype[e]=function(r,i,o){const[s,a]=$t(this,e,n,r,i,o);if(!Ce(a))throw new F(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function av(t,e,n){t.prototype[e]=function(r,i,o){const[s,a]=$t(this,e,n,r,i,o);if(!Ce(a))throw new F(`Graph.${e}: provided attributes are not a plain object.`);return we(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function lv(t,e,n){t.prototype[e]=function(r,i,o){const[s,a]=$t(this,e,n,r,i,o);if(typeof a!="function")throw new F(`Graph.${e}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const uv=[{name:t=>`get${t}Attribute`,attacher:ev},{name:t=>`get${t}Attributes`,attacher:tv},{name:t=>`has${t}Attribute`,attacher:nv},{name:t=>`set${t}Attribute`,attacher:rv},{name:t=>`update${t}Attribute`,attacher:iv},{name:t=>`remove${t}Attribute`,attacher:ov},{name:t=>`replace${t}Attributes`,attacher:sv},{name:t=>`merge${t}Attributes`,attacher:av},{name:t=>`update${t}Attributes`,attacher:lv}];function cv(t){uv.forEach(function({name:e,attacher:n}){n(t,e("Node"),pd),n(t,e("Source"),gd),n(t,e("Target"),Jm),n(t,e("Opposite"),md)})}function hv(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=it(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function fv(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+arguments[1];if(i=it(this,o,s,n),!i)throw new P(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function dv(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=it(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function pv(t,e,n){t.prototype[e]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],o=arguments[3],s=it(this,a,l,n),!s)throw new P(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function gv(t,e,n){t.prototype[e]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],o=arguments[3],s=it(this,a,l,n),!s)throw new P(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new F(`Graph.${e}: updater should be a function.`);return s.attributes[i]=o(s.attributes[i]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function mv(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=it(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function vv(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=it(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ce(i))throw new F(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function yv(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=it(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ce(i))throw new F(`Graph.${e}: provided attributes are not a plain object.`);return we(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function wv(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=it(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new F(`Graph.${e}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Ev=[{name:t=>`get${t}Attribute`,attacher:hv},{name:t=>`get${t}Attributes`,attacher:fv},{name:t=>`has${t}Attribute`,attacher:dv},{name:t=>`set${t}Attribute`,attacher:pv},{name:t=>`update${t}Attribute`,attacher:gv},{name:t=>`remove${t}Attribute`,attacher:mv},{name:t=>`replace${t}Attributes`,attacher:vv},{name:t=>`merge${t}Attributes`,attacher:yv},{name:t=>`update${t}Attributes`,attacher:wv}];function Sv(t){Ev.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const kv=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function _v(t,e,n,r){let i=!1;for(const o in e){if(o===r)continue;const s=e[o];if(i=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),t&&i)return s.key}}function Cv(t,e,n,r){let i,o,s,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(o=i.source,s=i.target,a=n(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function bs(t,e){const n=Object.keys(t),r=n.length;let i,o=0;return new at(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const a=n[o++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function xv(t,e,n,r){const i=e[n];if(!i)return;const o=i.source,s=i.target;if(r(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected)&&t)return i.key}function Tv(t,e,n,r){let i=e[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(i!==void 0)}function Ls(t,e){let n=t[e];return n.next!==void 0?new at(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):at.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Rv(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):ud(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",o=t._edges.values();let s=0,a,l;for(;a=o.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[s++]=l.key);return r}function vd(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,o=n==="undirected";let s,a,l=!1;const u=e._edges.values();for(;s=u.next(),s.done!==!0;){if(a=s.value,i&&a.undirected!==o)continue;const{key:h,attributes:c,source:f,target:g}=a;if(l=r(h,c,f.key,g.key,f.attributes,g.attributes,a.undirected),t&&l)return h}}function Nv(t,e){if(t.size===0)return at.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new at(function(){let s,a;for(;;){if(s=i.next(),s.done)return s;if(a=s.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function Fl(t,e,n,r,i,o){const s=e?Cv:_v;let a;if(n!=="undirected"&&(r!=="out"&&(a=s(t,i.in,o),t&&a)||r!=="in"&&(a=s(t,i.out,o,r?void 0:i.key),t&&a))||n!=="directed"&&(a=s(t,i.undirected,o),t&&a))return a}function bv(t,e,n,r){const i=[];return Fl(!1,t,e,n,r,function(o){i.push(o)}),i}function Lv(t,e,n){let r=at.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Ft(r,bs(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Ft(r,bs(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Ft(r,bs(n.undirected))),r}function Il(t,e,n,r,i,o,s){const a=n?Tv:xv;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,o,s),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(l=a(t,i.out,o,s),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,o,s),t&&l))return l}function Dv(t,e,n,r,i){const o=[];return Il(!1,t,e,n,r,i,function(s){o.push(s)}),o}function Mv(t,e,n,r){let i=at.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Ft(i,Ls(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Ft(i,Ls(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Ft(i,Ls(n.undirected,r))),i}function Pv(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Rv(this,r);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new P(`Graph.${n}: could not find the "${o}" node in the graph.`);return bv(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){o=""+o,s=""+s;const a=this._nodes.get(o);if(!a)throw new P(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new P(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return Dv(r,this.multi,i,a,s)}throw new F(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Av(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(u,h,c){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return c=u,vd(!1,this,r,c);if(arguments.length===2){u=""+u,c=h;const f=this._nodes.get(u);if(typeof f>"u")throw new P(`Graph.${o}: could not find the "${u}" node in the graph.`);return Fl(!1,this.multi,r==="mixed"?this.type:r,i,f,c)}if(arguments.length===3){u=""+u,h=""+h;const f=this._nodes.get(u);if(!f)throw new P(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(h))throw new P(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return Il(!1,r,this.multi,i,f,h,c)}throw new F(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop();let c;if(u.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),c=new Array(f);let g=0;u.push((m,y,S,d,p,v,E)=>{c[g++]=h(m,y,S,d,p,v,E)})}else c=[],u.push((f,g,m,y,S,d,p)=>{c.push(h(f,g,m,y,S,d,p))});return this[o].apply(this,u),c};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop(),c=[];return u.push((f,g,m,y,S,d,p)=>{h(f,g,m,y,S,d,p)&&c.push(f)}),this[o].apply(this,u),c};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new F(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new F(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h,c;u.length===2?(h=u[0],c=u[1],u=[]):u.length===3?(h=u[1],c=u[2],u=[u[0]]):u.length===4&&(h=u[2],c=u[3],u=[u[0],u[1]]);let f=c;return u.push((g,m,y,S,d,p,v)=>{f=h(f,g,m,y,S,d,p,v)}),this[o].apply(this,u),f}}function Fv(t,e){const{name:n,type:r,direction:i}=e,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(l,u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return h=l,vd(!0,this,r,h);if(arguments.length===2){l=""+l,h=u;const c=this._nodes.get(l);if(typeof c>"u")throw new P(`Graph.${o}: could not find the "${l}" node in the graph.`);return Fl(!0,this.multi,r==="mixed"?this.type:r,i,c,h)}if(arguments.length===3){l=""+l,u=""+u;const c=this._nodes.get(l);if(!c)throw new P(`Graph.${o}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new P(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return Il(!0,r,this.multi,i,c,u,h)}throw new F(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((c,f,g,m,y,S,d)=>u(c,f,g,m,y,S,d)),!!this[o].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((c,f,g,m,y,S,d)=>!u(c,f,g,m,y,S,d)),!this[o].apply(this,l)}}function Iv(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return at.empty();if(!arguments.length)return Nv(this,r);if(arguments.length===1){s=""+s;const l=this._nodes.get(s);if(!l)throw new P(`Graph.${o}: could not find the "${s}" node in the graph.`);return Lv(r,i,l)}if(arguments.length===2){s=""+s,a=""+a;const l=this._nodes.get(s);if(!l)throw new P(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new P(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return Mv(r,i,l,a)}throw new F(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function zv(t){kv.forEach(e=>{Pv(t,e),Av(t,e),Fv(t,e),Iv(t,e)})}const Gv=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ko(){this.A=null,this.B=null}Ko.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Ko.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Sr(t,e,n,r,i){for(const o in r){const s=r[o],a=s.source,l=s.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const h=i(u.key,u.attributes);if(t&&h)return u.key}}function zl(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Sr(t,null,r,r.undirected,i);if(typeof n=="string")return Sr(t,null,r,r[n],i)}const o=new Ko;let s;if(e!=="undirected"){if(n!=="out"){if(s=Sr(t,null,r,r.in,i),t&&s)return s;o.wrap(r.in)}if(n!=="in"){if(s=Sr(t,o,r,r.out,i),t&&s)return s;o.wrap(r.out)}}if(e!=="directed"&&(s=Sr(t,o,r,r.undirected,i),t&&s))return s}function Ov(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return zl(!1,t,e,n,function(i){r.push(i)}),r}function kr(t,e,n){const r=Object.keys(n),i=r.length;let o=0;return new at(function(){let a=null;do{if(o>=i)return t&&t.wrap(n),{done:!0};const l=n[r[o++]],u=l.source,h=l.target;if(a=u===e?h:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function jv(t,e,n){if(t!=="mixed"){if(t==="undirected")return kr(null,n,n.undirected);if(typeof e=="string")return kr(null,n,n[e])}let r=at.empty();const i=new Ko;return t!=="undirected"&&(e!=="out"&&(r=Ft(r,kr(i,n,n.in))),e!=="in"&&(r=Ft(r,kr(i,n,n.out)))),t!=="directed"&&(r=Ft(r,kr(i,n,n.undirected))),r}function $v(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new P(`Graph.${n}: could not find the "${o}" node in the graph.`);return Ov(r==="mixed"?this.type:r,i,s)}}function Uv(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const c=this._nodes.get(u);if(typeof c>"u")throw new P(`Graph.${o}: could not find the "${u}" node in the graph.`);zl(!1,r==="mixed"?this.type:r,i,c,h)};const s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(u,h){const c=[];return this[o](u,(f,g)=>{c.push(h(f,g))}),c};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,h){const c=[];return this[o](u,(f,g)=>{h(f,g)&&c.push(f)}),c};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,h,c){if(arguments.length<3)throw new F(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=c;return this[o](u,(g,m)=>{f=h(f,g,m)}),f}}function Bv(t,e){const{name:n,type:r,direction:i}=e,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;t.prototype[s]=function(u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const c=this._nodes.get(u);if(typeof c>"u")throw new P(`Graph.${s}: could not find the "${u}" node in the graph.`);return zl(!0,r==="mixed"?this.type:r,i,c,h)};const a="some"+o;t.prototype[a]=function(u,h){return!!this[s](u,h)};const l="every"+o;t.prototype[l]=function(u,h){return!this[s](u,(f,g)=>!h(f,g))}}function Wv(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return at.empty();s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new P(`Graph.${o}: could not find the "${s}" node in the graph.`);return jv(r==="mixed"?this.type:r,i,a)}}function Vv(t){Gv.forEach(e=>{$v(t,e),Uv(t,e),Bv(t,e),Wv(t,e)})}function Mi(t,e,n,r,i){const o=r._nodes.values(),s=r.type;let a,l,u,h,c,f;for(;a=o.next(),a.done!==!0;){let g=!1;if(l=a.value,s!=="undirected"){h=l.out;for(u in h){c=h[u];do f=c.target,g=!0,i(l.key,f.key,l.attributes,f.attributes,c.key,c.attributes,c.undirected),c=c.next;while(c)}}if(s!=="directed"){h=l.undirected;for(u in h)if(!(e&&l.key>u)){c=h[u];do f=c.target,f.key!==u&&(f=c.source),g=!0,i(l.key,f.key,l.attributes,f.attributes,c.key,c.attributes,c.undirected),c=c.next;while(c)}}n&&!g&&i(l.key,null,l.attributes,null,null,null,null)}}function Yv(t,e){const n={key:t};return cd(e.attributes)||(n.attributes=we({},e.attributes)),n}function Kv(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return cd(n.attributes)||(r.attributes=we({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function qv(t){if(!Ce(t))throw new F('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new F("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Ce(t.attributes)||t.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Qv(t){if(!Ce(t))throw new F('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new F("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new F("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Ce(t.attributes)||t.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new F("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Hv=Zm(),Xv=new Set(["directed","undirected","mixed"]),ic=new Set(["domain","_events","_eventsCount","_maxListeners"]),Zv=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Jv={allowSelfLoops:!0,multi:!1,type:"mixed"};function ey(t,e,n){if(n&&!Ce(n))throw new F(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new U(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function oc(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function yd(t,e,n,r,i,o,s,a){if(!r&&t.type==="undirected")throw new U(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new U(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Ce(a))throw new F(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!t.allowSelfLoops&&o===s)throw new U(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(o),u=t._nodes.get(s);if(!l)throw new P(`Graph.${e}: source node "${o}" not found.`);if(!u)throw new P(`Graph.${e}: target node "${s}" not found.`);const h={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new U(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[s]<"u":typeof l.out[s]<"u"))throw new U(`Graph.${e}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const c=new cr(r,i,l,u,a);t._edges.set(i,c);const f=o===s;return r?(l.undirectedDegree++,u.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?c.attachMulti():c.attach(),r?t._undirectedSize++:t._directedSize++,h.key=i,t.emit("edgeAdded",h),i}function ty(t,e,n,r,i,o,s,a,l){if(!r&&t.type==="undirected")throw new U(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new U(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new F(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Ce(a))throw new F(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&o===s)throw new U(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let h=t._nodes.get(o),c=t._nodes.get(s),f,g;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==o||f.target.key!==s)&&(!r||f.source.key!==s||f.target.key!==o))throw new U(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${s}" target vs. ("${f.source.key}", "${f.target.key}").`);g=f}if(!g&&!t.multi&&h&&(g=r?h.undirected[s]:h.out[s]),g){const p=[g.key,!1,!1,!1];if(l?!u:!a)return p;if(l){const v=g.attributes;g.attributes=u(v),t.emit("edgeAttributesUpdated",{type:"replace",key:g.key,attributes:g.attributes})}else we(g.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:g.key,attributes:g.attributes,data:a});return p}a=a||{},l&&u&&(a=u(a));const m={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new U(`Graph.${e}: the "${i}" edge already exists in the graph.`);let y=!1,S=!1;h||(h=oc(t,o,{}),y=!0,o===s&&(c=h,S=!0)),c||(c=oc(t,s,{}),S=!0),f=new cr(r,i,h,c,a),t._edges.set(i,f);const d=o===s;return r?(h.undirectedDegree++,c.undirectedDegree++,d&&(h.undirectedLoops++,t._undirectedSelfLoopCount++)):(h.outDegree++,c.inDegree++,d&&(h.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,m.key=i,t.emit("edgeAdded",m),[i,!0,y,S]}function bn(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,o=e.undirected,s=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,s&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,s&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:o})}class ne extends sd.EventEmitter{constructor(e){if(super(),e=we({},Jv,e),typeof e.multi!="boolean")throw new F(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Xv.has(e.type))throw new F(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new F(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?hd:e.type==="directed"?fd:dd;Xe(this,"NodeDataClass",n);const r="geid_"+Hv()+"_";let i=0;const o=()=>{let s;do s=r+i++;while(this._edges.has(s));return s};Xe(this,"_attributes",{}),Xe(this,"_nodes",new Map),Xe(this,"_edges",new Map),Xe(this,"_directedSize",0),Xe(this,"_undirectedSize",0),Xe(this,"_directedSelfLoopCount",0),Xe(this,"_undirectedSelfLoopCount",0),Xe(this,"_edgeKeyGenerator",o),Xe(this,"_options",e),ic.forEach(s=>Xe(this,s,this[s])),ft(this,"order",()=>this._nodes.size),ft(this,"size",()=>this._edges.size),ft(this,"directedSize",()=>this._directedSize),ft(this,"undirectedSize",()=>this._undirectedSize),ft(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ft(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ft(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ft(this,"multi",this._options.multi),ft(this,"type",this._options.type),ft(this,"allowSelfLoops",this._options.allowSelfLoops),ft(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new F(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new U("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new P(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new P(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new U("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new P(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new P(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new U("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new P(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new P(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new P(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new P(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new P(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new P(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(e===i)return o;if(e===o)return i;throw new P(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new P(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new P(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new P(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new P(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return ey(this,e,n).key}mergeNode(e,n){if(n&&!Ce(n))throw new F(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(we(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new F(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const o=r.attributes;r.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new P(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do bn(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do bn(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do bn(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=it(this,r,i,this.type),!n)throw new P(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new P(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return bn(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new U("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new U("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=it(this,e,n,"directed");if(!r)throw new P(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return bn(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new U("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new U("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=it(this,e,n,"undirected");if(!r)throw new P(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return bn(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new F("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ce(e))throw new F("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ce(e))throw new F("Graph.mergeAttributes: provided attributes are not a plain object.");return we(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new F("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new F("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!rc(n))throw new F("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new F("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!rc(n))throw new F("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,s,a;for(;i=r.next(),i.done!==!0;)o=i.value,s=o.source,a=o.target,o.attributes=e(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new F("Graph.forEachAdjacencyEntry: expecting a callback.");Mi(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new F("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Mi(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new F("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Mi(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new F("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Mi(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):ud(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new F("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new F("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new F("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const o=new Array(this.order);let s=0;for(;r=n.next(),r.done!==!0;)i=r.value,o[s++]=e(i.key,i.attributes);return o}someNode(e){if(typeof e!="function")throw new F("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new F("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new F("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const o=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,n){if(typeof e!="function")throw new F("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new F("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let o,s;for(;o=i.next(),o.done!==!0;)s=o.value,r=e(r,s.key,s.attributes);return r}nodeEntries(){const e=this._nodes.values();return new at(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,o)=>{e[n++]=Yv(o,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=Kv(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof ne)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,h,c,f,g,m)=>{n?m?this.mergeUndirectedEdgeWithKey(l,h,c,u):this.mergeDirectedEdgeWithKey(l,h,c,u):m?this.addUndirectedEdgeWithKey(l,h,c,u):this.addDirectedEdgeWithKey(l,h,c,u)}),this;if(!Ce(e))throw new F("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ce(e.attributes))throw new F("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,o,s,a;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new F("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],qv(s);const{key:l,attributes:u}=s;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),o=e.edges,!Array.isArray(o))throw new F("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],Qv(a);const{source:u,target:h,attributes:c,undirected:f=l}=a;let g;"key"in a?(g=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,g.call(this,a.key,u,h,c)):(g=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,g.call(this,u,h,c))}}return this}nullCopy(e){const n=new ne(we({},this._options,e));return n.replaceAttributes(we({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const o=we({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new U(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new U("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new U("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,yd(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,we({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,s)=>{e[s]=o.attributes});const n={},r={};this._edges.forEach((o,s)=>{const a=o.undirected?"--":"->";let l="",u=o.source.key,h=o.target.key,c;o.undirected&&u>h&&(c=u,u=h,h=c);const f=`(${u})${a}(${h})`;s.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,l+=`${r[f]}. `):l+=`[${s}]: `,l+=f,n[l]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!ic.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,Xe(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(ne.prototype[Symbol.for("nodejs.util.inspect.custom")]=ne.prototype.inspect);Zv.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?yd:ty;t.generateKey?ne.prototype[n]=function(i,o,s){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,o,s,e==="update")}:ne.prototype[n]=function(i,o,s,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,o,s,a,e==="update")}})});cv(ne);Sv(ne);zv(ne);Vv(ne);class wd extends ne{constructor(e){const n=we({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new F("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new F('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Ed extends ne{constructor(e){const n=we({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new F("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new F('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Sd extends ne{constructor(e){const n=we({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new F("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class kd extends ne{constructor(e){const n=we({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new F("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new F('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class _d extends ne{constructor(e){const n=we({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new F("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new F('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function hr(t){t.from=function(e,n){const r=we({},e.options,n),i=new t(r);return i.import(e),i}}hr(ne);hr(wd);hr(Ed);hr(Sd);hr(kd);hr(_d);ne.Graph=ne;ne.DirectedGraph=wd;ne.UndirectedGraph=Ed;ne.MultiGraph=Sd;ne.MultiDirectedGraph=kd;ne.MultiUndirectedGraph=_d;ne.InvalidArgumentsGraphError=F;ne.NotFoundGraphError=P;ne.UsageGraphError=U;function ny(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $r(t){var e=ny(t,"string");return typeof e=="symbol"?e:e+""}function Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$r(r.key),r)}}function Pe(t,e,n){return e&&sc(t.prototype,e),n&&sc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sr(t){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(t)}function Cd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cd=function(){return!!t})()}function M(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ry(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(t)}function lt(t,e,n){return e=sr(e),ry(t,Cd()?Reflect.construct(e,n||[],sr(t).constructor):e.apply(t,n))}function La(t,e){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},La(t,e)}function ut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&La(t,e)}function iy(t){if(Array.isArray(t))return t}function oy(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Da(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function xd(t,e){if(t){if(typeof t=="string")return Da(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Da(t,e):void 0}}function sy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(t,e){return iy(t)||oy(t,e)||xd(t,e)||sy()}var Ds={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},Td=new Int8Array(4),Ms=new Int32Array(Td.buffer,0,1),ay=new Float32Array(Td.buffer,0,1),ly=/^\s*rgba?\s*\(/,uy=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function cy(t){var e=0,n=0,r=0,i=1;if(t[0]==="#")t.length===4?(e=parseInt(t.charAt(1)+t.charAt(1),16),n=parseInt(t.charAt(2)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(4),16),r=parseInt(t.charAt(5)+t.charAt(6),16)),t.length===9&&(i=parseInt(t.charAt(7)+t.charAt(8),16)/255);else if(ly.test(t)){var o=t.match(uy);o&&(e=+o[1],n=+o[2],r=+o[3],o[4]&&(i=+o[4]))}return{r:e,g:n,b:r,a:i}}var Zn={};for(var Pi in Ds)Zn[Pi]=di(Ds[Pi]),Zn[Ds[Pi]]=Zn[Pi];function Rd(t,e,n,r,i){return Ms[0]=r<<24|n<<16|e<<8|t,Ms[0]=Ms[0]&4278190079,ay[0]}function di(t){if(t=t.toLowerCase(),typeof Zn[t]<"u")return Zn[t];var e=cy(t),n=e.r,r=e.g,i=e.b,o=e.a;o=o*255|0;var s=Rd(n,r,i,o);return Zn[t]=s,s}var Ps={};function Nd(t){if(typeof Ps[t]<"u")return Ps[t];var e=(t&16711680)>>>16,n=(t&65280)>>>8,r=t&255,i=255,o=Rd(e,n,r,i);return Ps[t]=o,o}function ac(t,e,n,r){return n+(e<<8)+(t<<16)}function lc(t,e,n,r,i,o){var s=Math.floor(n/o*i),a=Math.floor(t.drawingBufferHeight/o-r/o*i),l=new Uint8Array(4);t.bindFramebuffer(t.FRAMEBUFFER,e),t.readPixels(s,a,1,1,t.RGBA,t.UNSIGNED_BYTE,l);var u=No(l,4),h=u[0],c=u[1],f=u[2],g=u[3];return[h,c,f,g]}function N(t,e,n){return(e=$r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uc(Object(n),!0).forEach(function(r){N(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hy(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=sr(t))!==null;);return t}function Ma(){return Ma=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=hy(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Ma.apply(null,arguments)}function bd(t,e,n,r){var i=Ma(sr(t.prototype),e,n);return typeof i=="function"?function(o){return i.apply(n,o)}:i}function fy(t){return t.normalized?1:t.size}function As(t){var e=0;return t.forEach(function(n){return e+=fy(n)}),e}function Ld(t,e,n){var r=t==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,i=e.createShader(r);if(i===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(i,n),e.compileShader(i);var o=e.getShaderParameter(i,e.COMPILE_STATUS);if(!o){var s=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`loadShader: error while compiling the shader:
`.concat(s,`
`).concat(n))}return i}function dy(t,e){return Ld("VERTEX",t,e)}function py(t,e){return Ld("FRAGMENT",t,e)}function gy(t,e){var n=t.createProgram();if(n===null)throw new Error("loadProgram: error while creating the program.");var r,i;for(r=0,i=e.length;r<i;r++)t.attachShader(n,e[r]);t.linkProgram(n);var o=t.getProgramParameter(n,t.LINK_STATUS);if(!o)throw t.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}function cc(t){var e=t.gl,n=t.buffer,r=t.program,i=t.vertexShader,o=t.fragmentShader;e.deleteShader(i),e.deleteShader(o),e.deleteProgram(r),e.deleteBuffer(n)}var hc=`#define PICKING_MODE
`,my=N(N(N(N(N(N(N(N({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),Dd=function(){function t(e,n,r){Me(this,t),N(this,"array",new Float32Array),N(this,"constantArray",new Float32Array),N(this,"capacity",0),N(this,"verticesCount",0);var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=As(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=r,this.normalProgram=this.getProgramInfo("normal",e,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",e,hc+i.VERTEX_SHADER_SOURCE,hc+i.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var o=As(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var s=0;s<this.CONSTANT_DATA.length;s++){var a=this.CONSTANT_DATA[s];if(a.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(o,")"));for(var l=0;l<a.length;l++)this.constantArray[s*o+l]=a[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return Pe(t,[{key:"kill",value:function(){cc(this.normalProgram),this.pickProgram&&(cc(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(n,r,i,o,s){var a=this.getDefinition(),l=r.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var u=dy(r,i),h=py(r,o),c=gy(r,[u,h]),f={};a.UNIFORMS.forEach(function(y){var S=r.getUniformLocation(c,y);S&&(f[y]=S)});var g={};a.ATTRIBUTES.forEach(function(y){g[y.name]=r.getAttribLocation(c,y.name)});var m;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(y){g[y.name]=r.getAttribLocation(c,y.name)}),m=r.createBuffer(),m===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:c,gl:r,frameBuffer:s,buffer:l,constantBuffer:m||{},uniformLocations:f,attributeLocations:g,isPicking:n==="pick",vertexShader:u,fragmentShader:h}}},{key:"bindProgram",value:function(n){var r=this,i=0,o=n.gl,s=n.buffer;this.isInstanced?(o.bindBuffer(o.ARRAY_BUFFER,n.constantBuffer),i=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!1)}),o.bufferData(o.ARRAY_BUFFER,this.constantArray,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,n.buffer),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!0)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)):(o.bindBuffer(o.ARRAY_BUFFER,s),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)),o.bindBuffer(o.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var r=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!1)}),this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!0)})):this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n)})}},{key:"bindAttribute",value:function(n,r,i,o){var s=my[n.type];if(typeof s!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var a=r.attributeLocations[n.name],l=r.gl;if(a!==-1){l.enableVertexAttribArray(a);var u=this.isInstanced?(o?this.ATTRIBUTES_ITEMS_COUNT:As(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(a,n.size,n.type,n.normalized||!1,u,i),this.isInstanced&&o)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(a,1);else{var h=l.getExtension("ANGLE_instanced_arrays");h&&h.vertexAttribDivisorANGLE(a,1)}}return n.size*s}},{key:"unbindAttribute",value:function(n,r,i){var o=r.attributeLocations[n.name],s=r.gl;if(o!==-1&&(s.disableVertexAttribArray(o),this.isInstanced&&i))if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(o,0);else{var a=s.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(o,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(n,r){var i=r.gl,o=r.program;i.enable(i.BLEND),i.useProgram(o),this.setUniforms(n,r),this.drawWebGL(this.METHOD,r)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(j(j({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,r){var i=r.gl,o=r.frameBuffer;if(i.bindFramebuffer(i.FRAMEBUFFER,o),!this.isInstanced)i.drawArrays(n,0,this.verticesCount);else if(i instanceof WebGL2RenderingContext)i.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var s=i.getExtension("ANGLE_instanced_arrays");s&&s.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}}}]),t}(),vy=function(t){ut(e,t);function e(){return Me(this,e),lt(this,e,arguments)}return Pe(e,[{key:"kill",value:function(){bd(e,"kill",this)([])}},{key:"process",value:function(r,i,o){var s=i*this.STRIDE;if(o.hidden){for(var a=s+this.STRIDE;s<a;s++)this.array[s]=0;return}return this.processVisibleItem(Nd(r),s,o)}}]),e}(Dd),Gl=function(t){ut(e,t);function e(){var n;Me(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=lt(this,e,[].concat(i)),N(M(n),"drawLabel",void 0),n}return Pe(e,[{key:"kill",value:function(){bd(e,"kill",this)([])}},{key:"process",value:function(r,i,o,s,a){var l=i*this.STRIDE;if(a.hidden||o.hidden||s.hidden){for(var u=l+this.STRIDE;l<u;l++)this.array[l]=0;return}return this.processVisibleItem(Nd(r),l,o,s,a)}}]),e}(Dd);function yy(t,e){return function(){function n(r,i,o){Me(this,n),N(this,"drawLabel",e),this.programs=t.map(function(s){return new s(r,i,o)})}return Pe(n,[{key:"reallocate",value:function(i){this.programs.forEach(function(o){return o.reallocate(i)})}},{key:"process",value:function(i,o,s,a,l){this.programs.forEach(function(u){return u.process(i,o,s,a,l)})}},{key:"render",value:function(i){this.programs.forEach(function(o){return o.render(i)})}},{key:"kill",value:function(){this.programs.forEach(function(i){return i.kill()})}}]),n}()}function wy(t,e,n,r,i){var o=i.edgeLabelSize,s=i.edgeLabelFont,a=i.edgeLabelWeight,l=i.edgeLabelColor.attribute?e[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,u=e.label;if(u){t.fillStyle=l,t.font="".concat(a," ").concat(o,"px ").concat(s);var h=n.size,c=r.size,f=n.x,g=n.y,m=r.x,y=r.y,S=(f+m)/2,d=(g+y)/2,p=m-f,v=y-g,E=Math.sqrt(p*p+v*v);if(!(E<h+c)){f+=p*h/E,g+=v*h/E,m-=p*c/E,y-=v*c/E,S=(f+m)/2,d=(g+y)/2,p=m-f,v=y-g,E=Math.sqrt(p*p+v*v);var _=t.measureText(u).width;if(_>E){var T="…";for(u=u+T,_=t.measureText(u).width;_>E&&u.length>1;)u=u.slice(0,-2)+T,_=t.measureText(u).width;if(u.length<4)return}var k;p>0?v>0?k=Math.acos(p/E):k=Math.asin(v/E):v>0?k=Math.acos(p/E)+Math.PI:k=Math.asin(p/E)+Math.PI/2,t.save(),t.translate(S,d),t.rotate(k),t.fillText(u,-_/2,e.size/2+o),t.restore()}}}function Md(t,e,n){if(e.label){var r=n.labelSize,i=n.labelFont,o=n.labelWeight,s=n.labelColor.attribute?e[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color;t.fillStyle=s,t.font="".concat(o," ").concat(r,"px ").concat(i),t.fillText(e.label,e.x+e.size+3,e.y+r/3)}}function Ey(t,e,n){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;t.font="".concat(o," ").concat(r,"px ").concat(i),t.fillStyle="#FFF",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var s=2;if(typeof e.label=="string"){var a=t.measureText(e.label).width,l=Math.round(a+5),u=Math.round(r+2*s),h=Math.max(e.size,r/2)+s,c=Math.asin(u/2/h),f=Math.sqrt(Math.abs(Math.pow(h,2)-Math.pow(u/2,2)));t.beginPath(),t.moveTo(e.x+f,e.y+u/2),t.lineTo(e.x+h+l,e.y+u/2),t.lineTo(e.x+h+l,e.y-u/2),t.lineTo(e.x+f,e.y-u/2),t.arc(e.x,e.y,h,c,-c),t.closePath(),t.fill()}else t.beginPath(),t.arc(e.x,e.y,e.size+s,0,Math.PI*2),t.closePath(),t.fill();t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,Md(t,e,n)}var Sy=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,ky=Sy,_y=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Cy=_y,Pd=WebGLRenderingContext,fc=Pd.UNSIGNED_BYTE,Fs=Pd.FLOAT,xy=["u_sizeRatio","u_correctionRatio","u_matrix"],qo=function(t){ut(e,t);function e(){return Me(this,e),lt(this,e,arguments)}return Pe(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Cy,FRAGMENT_SHADER_SOURCE:ky,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:xy,ATTRIBUTES:[{name:"a_position",size:2,type:Fs},{name:"a_size",size:1,type:Fs},{name:"a_color",size:4,type:fc,normalized:!0},{name:"a_id",size:4,type:fc,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Fs}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(r,i,o){var s=this.array,a=di(o.color);s[i++]=o.x,s[i++]=o.y,s[i++]=o.size,s[i++]=a,s[i++]=r}},{key:"setUniforms",value:function(r,i){var o=i.gl,s=i.uniformLocations,a=s.u_sizeRatio,l=s.u_correctionRatio,u=s.u_matrix;o.uniform1f(l,r.correctionRatio),o.uniform1f(a,r.sizeRatio),o.uniformMatrix3fv(u,!1,r.matrix)}}]),e}(vy);N(qo,"ANGLE_1",0);N(qo,"ANGLE_2",2*Math.PI/3);N(qo,"ANGLE_3",4*Math.PI/3);var Ty=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,Ry=Ty,Ny=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,by=Ny,Ad=WebGLRenderingContext,dc=Ad.UNSIGNED_BYTE,Ai=Ad.FLOAT,Ly=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],Fd={lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function Id(t){var e=j(j({},Fd),{});return function(n){ut(r,n);function r(){return Me(this,r),lt(this,r,arguments)}return Pe(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:by,FRAGMENT_SHADER_SOURCE:Ry,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Ly,ATTRIBUTES:[{name:"a_position",size:2,type:Ai},{name:"a_normal",size:2,type:Ai},{name:"a_radius",size:1,type:Ai},{name:"a_color",size:4,type:dc,normalized:!0},{name:"a_id",size:4,type:dc,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Ai}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(o,s,a,l,u){var h=u.size||1,c=l.size||1,f=a.x,g=a.y,m=l.x,y=l.y,S=di(u.color),d=m-f,p=y-g,v=d*d+p*p,E=0,_=0;v&&(v=1/Math.sqrt(v),E=-p*v*h,_=d*v*h);var T=this.array;T[s++]=m,T[s++]=y,T[s++]=-E,T[s++]=-_,T[s++]=c,T[s++]=S,T[s++]=o}},{key:"setUniforms",value:function(o,s){var a=s.gl,l=s.uniformLocations,u=l.u_matrix,h=l.u_sizeRatio,c=l.u_correctionRatio,f=l.u_minEdgeThickness,g=l.u_lengthToThicknessRatio,m=l.u_widenessToThicknessRatio;a.uniformMatrix3fv(u,!1,o.matrix),a.uniform1f(h,o.sizeRatio),a.uniform1f(c,o.correctionRatio),a.uniform1f(f,o.minEdgeThickness),a.uniform1f(g,e.lengthToThicknessRatio),a.uniform1f(m,e.widenessToThicknessRatio)}}]),r}(Gl)}Id();var Dy=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,zd=Dy,My=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Py=My,Gd=WebGLRenderingContext,pc=Gd.UNSIGNED_BYTE,hn=Gd.FLOAT,Ay=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],Fy={lengthToThicknessRatio:Fd.lengthToThicknessRatio};function Od(t){var e=j(j({},Fy),{});return function(n){ut(r,n);function r(){return Me(this,r),lt(this,r,arguments)}return Pe(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Py,FRAGMENT_SHADER_SOURCE:zd,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Ay,ATTRIBUTES:[{name:"a_positionStart",size:2,type:hn},{name:"a_positionEnd",size:2,type:hn},{name:"a_normal",size:2,type:hn},{name:"a_color",size:4,type:pc,normalized:!0},{name:"a_id",size:4,type:pc,normalized:!0},{name:"a_radius",size:1,type:hn}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:hn},{name:"a_normalCoef",size:1,type:hn},{name:"a_radiusCoef",size:1,type:hn}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(o,s,a,l,u){var h=u.size||1,c=a.x,f=a.y,g=l.x,m=l.y,y=di(u.color),S=g-c,d=m-f,p=l.size||1,v=S*S+d*d,E=0,_=0;v&&(v=1/Math.sqrt(v),E=-d*v*h,_=S*v*h);var T=this.array;T[s++]=c,T[s++]=f,T[s++]=g,T[s++]=m,T[s++]=E,T[s++]=_,T[s++]=y,T[s++]=o,T[s++]=p}},{key:"setUniforms",value:function(o,s){var a=s.gl,l=s.uniformLocations,u=l.u_matrix,h=l.u_zoomRatio,c=l.u_feather,f=l.u_pixelRatio,g=l.u_correctionRatio,m=l.u_sizeRatio,y=l.u_minEdgeThickness,S=l.u_lengthToThicknessRatio;a.uniformMatrix3fv(u,!1,o.matrix),a.uniform1f(h,o.zoomRatio),a.uniform1f(m,o.sizeRatio),a.uniform1f(g,o.correctionRatio),a.uniform1f(f,o.pixelRatio),a.uniform1f(c,o.antiAliasingFeather),a.uniform1f(y,o.minEdgeThickness),a.uniform1f(S,e.lengthToThicknessRatio)}}]),r}(Gl)}Od();function Iy(t){return yy([Od(),Id()])}var zy=Iy(),Gy=zy,Oy=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,jy=Oy,jd=WebGLRenderingContext,gc=jd.UNSIGNED_BYTE,_r=jd.FLOAT,$y=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],Uy=function(t){ut(e,t);function e(){return Me(this,e),lt(this,e,arguments)}return Pe(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:jy,FRAGMENT_SHADER_SOURCE:zd,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:$y,ATTRIBUTES:[{name:"a_positionStart",size:2,type:_r},{name:"a_positionEnd",size:2,type:_r},{name:"a_normal",size:2,type:_r},{name:"a_color",size:4,type:gc,normalized:!0},{name:"a_id",size:4,type:gc,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:_r},{name:"a_normalCoef",size:1,type:_r}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(r,i,o,s,a){var l=a.size||1,u=o.x,h=o.y,c=s.x,f=s.y,g=di(a.color),m=c-u,y=f-h,S=m*m+y*y,d=0,p=0;S&&(S=1/Math.sqrt(S),d=-y*S*l,p=m*S*l);var v=this.array;v[i++]=u,v[i++]=h,v[i++]=c,v[i++]=f,v[i++]=d,v[i++]=p,v[i++]=g,v[i++]=r}},{key:"setUniforms",value:function(r,i){var o=i.gl,s=i.uniformLocations,a=s.u_matrix,l=s.u_zoomRatio,u=s.u_feather,h=s.u_pixelRatio,c=s.u_correctionRatio,f=s.u_sizeRatio,g=s.u_minEdgeThickness;o.uniformMatrix3fv(a,!1,r.matrix),o.uniform1f(l,r.zoomRatio),o.uniform1f(f,r.sizeRatio),o.uniform1f(c,r.correctionRatio),o.uniform1f(h,r.pixelRatio),o.uniform1f(u,r.antiAliasingFeather),o.uniform1f(g,r.minEdgeThickness)}}]),e}(Gl),Ol=function(t){ut(e,t);function e(){var n;return Me(this,e),n=lt(this,e),n.rawEmitter=M(n),n}return Pe(e)}(sd.EventEmitter),By=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"};const Wy=ai(By);var Vy=function(e){return e},Yy=function(e){return e*e},Ky=function(e){return e*(2-e)},qy=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},Qy=function(e){return e*e*e},Hy=function(e){return--e*e*e+1},Xy=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},Zy={linear:Vy,quadraticIn:Yy,quadraticOut:Ky,quadraticInOut:qy,cubicIn:Qy,cubicOut:Hy,cubicInOut:Xy},Jy={easing:"quadraticInOut",duration:150};function dt(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function Fi(t,e,n){return t[0]=e,t[4]=typeof n=="number"?n:e,t}function mc(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[3]=-n,t[4]=r,t}function vc(t,e,n){return t[6]=e,t[7]=n,t}function Wt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],h=t[8],c=e[0],f=e[1],g=e[2],m=e[3],y=e[4],S=e[5],d=e[6],p=e[7],v=e[8];return t[0]=c*n+f*o+g*l,t[1]=c*r+f*s+g*u,t[2]=c*i+f*a+g*h,t[3]=m*n+y*o+S*l,t[4]=m*r+y*s+S*u,t[5]=m*i+y*a+S*h,t[6]=d*n+p*o+v*l,t[7]=d*r+p*s+v*u,t[8]=d*i+p*a+v*h,t}function Pa(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=t[0],i=t[1],o=t[3],s=t[4],a=t[6],l=t[7],u=e.x,h=e.y;return{x:u*r+h*o+a*n,y:u*i+h*s+l*n}}function e0(t,e){var n=t.height/t.width,r=e.height/e.width;return n<1&&r>1||n>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/n,n))}function Cr(t,e,n,r,i){var o=t.angle,s=t.ratio,a=t.x,l=t.y,u=e.width,h=e.height,c=dt(),f=Math.min(u,h)-2*r,g=e0(e,n);return i?(Wt(c,vc(dt(),a,l)),Wt(c,Fi(dt(),s)),Wt(c,mc(dt(),o)),Wt(c,Fi(dt(),u/f/2/g,h/f/2/g))):(Wt(c,Fi(dt(),2*(f/u)*g,2*(f/h)*g)),Wt(c,mc(dt(),-o)),Wt(c,Fi(dt(),1/s)),Wt(c,vc(dt(),-a,-l))),c}function t0(t,e,n){var r=Pa(t,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),i=r.x,o=r.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(o,2))/n.width}function n0(t){if(!t.order)return{x:[0,1],y:[0,1]};var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEachNode(function(o,s){var a=s.x,l=s.y;a<e&&(e=a),a>n&&(n=a),l<r&&(r=l),l>i&&(i=l)}),{x:[e,n],y:[r,i]}}function r0(t){if(!Wy(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode(function(e,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function i0(t,e,n){var r=document.createElement(t);if(e)for(var i in e)r.style[i]=e[i];if(n)for(var o in n)r.setAttribute(o,n[o]);return r}function yc(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function wc(t,e,n){return n.sort(function(r,i){var o=e(r)||0,s=e(i)||0;return o<s?-1:o>s?1:0})}function Ec(t){var e=No(t.x,2),n=e[0],r=e[1],i=No(t.y,2),o=i[0],s=i[1],a=Math.max(r-n,s-o),l=(r+n)/2,u=(s+o)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(l)&&(l=0),isNaN(u)&&(u=0);var h=function(f){return{x:.5+(f.x-l)/a,y:.5+(f.y-u)/a}};return h.applyTo=function(c){c.x=.5+(c.x-l)/a,c.y=.5+(c.y-u)/a},h.inverse=function(c){return{x:l+a*(c.x-.5),y:u+a*(c.y-.5)}},h.ratio=a,h}function Sc(t,e){var n=e.size;if(n!==0){var r=t.length;t.length+=n;var i=0;e.forEach(function(o){t[r+i]=o,i++})}}function Is(t){t=t||{};for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;e++){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];r&&Object.assign(t,r)}return t}var jl={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:wy,defaultDrawNodeLabel:Md,defaultDrawNodeHover:Ey,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraRotation:!0,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},o0={circle:qo},s0={arrow:Gy,line:Uy};function kc(t){if(typeof t.labelDensity!="number"||t.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=t.minCameraRatio,n=t.maxCameraRatio;if(typeof e=="number"&&typeof n=="number"&&n<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function a0(t){var e=Is({},jl,t);return e.nodeProgramClasses=Is({},o0,e.nodeProgramClasses),e.edgeProgramClasses=Is({},s0,e.edgeProgramClasses),e}var Ii=1.5,_c=function(t){ut(e,t);function e(){var n;return Me(this,e),n=lt(this,e),N(M(n),"x",.5),N(M(n),"y",.5),N(M(n),"angle",0),N(M(n),"ratio",1),N(M(n),"minRatio",null),N(M(n),"maxRatio",null),N(M(n),"enabledRotation",!0),N(M(n),"nextFrame",null),N(M(n),"previousState",null),N(M(n),"enabled",!0),n.previousState=n.getState(),n}return Pe(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(r){return this.x===r.x&&this.y===r.y&&this.ratio===r.ratio&&this.angle===r.angle}},{key:"getPreviousState",value:function(){var r=this.previousState;return r?{x:r.x,y:r.y,angle:r.angle,ratio:r.ratio}:null}},{key:"getBoundedRatio",value:function(r){var i=r;return typeof this.minRatio=="number"&&(i=Math.max(i,this.minRatio)),typeof this.maxRatio=="number"&&(i=Math.min(i,this.maxRatio)),i}},{key:"validateState",value:function(r){var i={};return typeof r.x=="number"&&(i.x=r.x),typeof r.y=="number"&&(i.y=r.y),this.enabledRotation&&typeof r.angle=="number"&&(i.angle=r.angle),typeof r.ratio=="number"&&(i.ratio=this.getBoundedRatio(r.ratio)),i}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(r){if(!this.enabled)return this;this.previousState=this.getState();var i=this.validateState(r);return typeof i.x=="number"&&(this.x=i.x),typeof i.y=="number"&&(this.y=i.y),this.enabledRotation&&typeof i.angle=="number"&&(this.angle=i.angle),typeof i.ratio=="number"&&(this.ratio=i.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(r){return this.setState(r(this.getState())),this}},{key:"animate",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(!s)return new Promise(function(g){return i.animate(r,o,g)});if(this.enabled){var a=j(j({},Jy),o),l=this.validateState(r),u=typeof a.easing=="function"?a.easing:Zy[a.easing],h=Date.now(),c=this.getState(),f=function g(){var m=(Date.now()-h)/a.duration;if(m>=1){i.nextFrame=null,i.setState(l),i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0);return}var y=u(m),S={};typeof l.x=="number"&&(S.x=c.x+(l.x-c.x)*y),typeof l.y=="number"&&(S.y=c.y+(l.y-c.y)*y),i.enabledRotation&&typeof l.angle=="number"&&(S.angle=c.angle+(l.angle-c.angle)*y),typeof l.ratio=="number"&&(S.ratio=c.ratio+(l.ratio-c.ratio)*y),i.setState(S),i.nextFrame=requestAnimationFrame(g)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(f)):f(),this.animationCallback=s}}},{key:"animatedZoom",value:function(r){return r?typeof r=="number"?this.animate({ratio:this.ratio/r}):this.animate({ratio:this.ratio/(r.factor||Ii)},r):this.animate({ratio:this.ratio/Ii})}},{key:"animatedUnzoom",value:function(r){return r?typeof r=="number"?this.animate({ratio:this.ratio*r}):this.animate({ratio:this.ratio*(r.factor||Ii)},r):this.animate({ratio:this.ratio*Ii})}},{key:"animatedReset",value:function(r){return this.animate({x:.5,y:.5,ratio:1,angle:0},r)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(r){var i=new e;return i.setState(r)}}]),e}(Ol);function vt(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function Rt(t,e){var n=j(j({},vt(t,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:t});return n}function xr(t){var e="x"in t?t:j(j({},t.touches[0]||t.previousTouches[0]),{},{original:t.original,sigmaDefaultPrevented:t.sigmaDefaultPrevented,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function l0(t,e){return j(j({},Rt(t,e)),{},{delta:$d(t)})}var u0=2;function eo(t){for(var e=[],n=0,r=Math.min(t.length,u0);n<r;n++)e.push(t[n]);return e}function Tr(t,e,n){var r={touches:eo(t.touches).map(function(i){return vt(i,n)}),previousTouches:e.map(function(i){return vt(i,n)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:t};return r}function $d(t){if(typeof t.deltaY<"u")return t.deltaY*-3/360;if(typeof t.detail<"u")return t.detail/-9;throw new Error("Captor: could not extract delta from event.")}var Ud=function(t){ut(e,t);function e(n,r){var i;return Me(this,e),i=lt(this,e),i.container=n,i.renderer=r,i}return Pe(e)}(Ol),c0=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],h0=c0.reduce(function(t,e){return j(j({},t),{},N({},e,jl[e]))},{}),f0=function(t){ut(e,t);function e(n,r){var i;return Me(this,e),i=lt(this,e,[n,r]),N(M(i),"enabled",!0),N(M(i),"draggedEvents",0),N(M(i),"downStartTime",null),N(M(i),"lastMouseX",null),N(M(i),"lastMouseY",null),N(M(i),"isMouseDown",!1),N(M(i),"isMoving",!1),N(M(i),"movingTimeout",null),N(M(i),"startCameraState",null),N(M(i),"clicks",0),N(M(i),"doubleClickTimeout",null),N(M(i),"currentWheelDirection",0),N(M(i),"settings",h0),i.handleClick=i.handleClick.bind(M(i)),i.handleRightClick=i.handleRightClick.bind(M(i)),i.handleDown=i.handleDown.bind(M(i)),i.handleUp=i.handleUp.bind(M(i)),i.handleMove=i.handleMove.bind(M(i)),i.handleWheel=i.handleWheel.bind(M(i)),i.handleLeave=i.handleLeave.bind(M(i)),i.handleEnter=i.handleEnter.bind(M(i)),n.addEventListener("click",i.handleClick,{capture:!1}),n.addEventListener("contextmenu",i.handleRightClick,{capture:!1}),n.addEventListener("mousedown",i.handleDown,{capture:!1}),n.addEventListener("wheel",i.handleWheel,{capture:!1}),n.addEventListener("mouseleave",i.handleLeave,{capture:!1}),n.addEventListener("mouseenter",i.handleEnter,{capture:!1}),document.addEventListener("mousemove",i.handleMove,{capture:!1}),document.addEventListener("mouseup",i.handleUp,{capture:!1}),i}return Pe(e,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("click",this.handleClick),r.removeEventListener("contextmenu",this.handleRightClick),r.removeEventListener("mousedown",this.handleDown),r.removeEventListener("wheel",this.handleWheel),r.removeEventListener("mouseleave",this.handleLeave),r.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(r){var i=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(r);setTimeout(function(){i.clicks=0,i.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Rt(r,this.container))}}},{key:"handleRightClick",value:function(r){this.enabled&&this.emit("rightClick",Rt(r,this.container))}},{key:"handleDoubleClick",value:function(r){if(this.enabled){r.preventDefault(),r.stopPropagation();var i=Rt(r,this.container);if(this.emit("doubleClick",i),!i.sigmaDefaultPrevented){var o=this.renderer.getCamera(),s=o.getBoundedRatio(o.getState().ratio/this.settings.doubleClickZoomingRatio);o.animate(this.renderer.getViewportZoomedState(vt(r,this.container),s),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(r){if(this.enabled){if(r.button===0){this.startCameraState=this.renderer.getCamera().getState();var i=vt(r,this.container),o=i.x,s=i.y;this.lastMouseX=o,this.lastMouseY=s,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Rt(r,this.container))}}},{key:"handleUp",value:function(r){var i=this;if(!(!this.enabled||!this.isMouseDown)){var o=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var s=vt(r,this.container),a=s.x,l=s.y,u=o.getState(),h=o.getPreviousState()||{x:0,y:0};this.isMoving?o.animate({x:u.x+this.settings.inertiaRatio*(u.x-h.x),y:u.y+this.settings.inertiaRatio*(u.y-h.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==l)&&o.setState({x:u.x,y:u.y}),this.isMoving=!1,setTimeout(function(){var c=i.draggedEvents>0;i.draggedEvents=0,c&&i.renderer.refresh()},0),this.emit("mouseup",Rt(r,this.container))}}},{key:"handleMove",value:function(r){var i=this;if(this.enabled){var o=Rt(r,this.container);if(this.emit("mousemovebody",o),(r.target===this.container||r.composedPath()[0]===this.container)&&this.emit("mousemove",o),!o.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.movingTimeout=null,i.isMoving=!1},this.settings.dragTimeout);var s=this.renderer.getCamera(),a=vt(r,this.container),l=a.x,u=a.y,h=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),c=this.renderer.viewportToFramedGraph({x:l,y:u}),f=h.x-c.x,g=h.y-c.y,m=s.getState(),y=m.x+f,S=m.y+g;s.setState({x:y,y:S}),this.lastMouseX=l,this.lastMouseY=u,r.preventDefault(),r.stopPropagation()}}}},{key:"handleLeave",value:function(r){this.emit("mouseleave",Rt(r,this.container))}},{key:"handleEnter",value:function(r){this.emit("mouseenter",Rt(r,this.container))}},{key:"handleWheel",value:function(r){var i=this;if(this.enabled){r.preventDefault(),r.stopPropagation();var o=$d(r);if(o){var s=l0(r,this.container);if(this.emit("wheel",s),!s.sigmaDefaultPrevented){var a=o>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,l=this.renderer.getCamera(),u=l.getBoundedRatio(l.getState().ratio*a),h=o>0?1:-1,c=Date.now();this.currentWheelDirection===h&&this.lastWheelTriggerTime&&c-this.lastWheelTriggerTime<this.settings.zoomDuration/5||(l.animate(this.renderer.getViewportZoomedState(vt(r,this.container),u),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){i.currentWheelDirection=0}),this.currentWheelDirection=h,this.lastWheelTriggerTime=c)}}}}},{key:"setSettings",value:function(r){this.settings=r}}]),e}(Ud),d0=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],p0=d0.reduce(function(t,e){return j(j({},t),{},N({},e,jl[e]))},{}),g0=function(t){ut(e,t);function e(n,r){var i;return Me(this,e),i=lt(this,e,[n,r]),N(M(i),"enabled",!0),N(M(i),"isMoving",!1),N(M(i),"hasMoved",!1),N(M(i),"touchMode",0),N(M(i),"startTouchesPositions",[]),N(M(i),"lastTouches",[]),N(M(i),"lastTap",null),N(M(i),"settings",p0),i.handleStart=i.handleStart.bind(M(i)),i.handleLeave=i.handleLeave.bind(M(i)),i.handleMove=i.handleMove.bind(M(i)),n.addEventListener("touchstart",i.handleStart,{capture:!1}),n.addEventListener("touchcancel",i.handleLeave,{capture:!1}),document.addEventListener("touchend",i.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",i.handleMove,{capture:!1,passive:!1}),i}return Pe(e,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("touchstart",this.handleStart),r.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(r){var i=this;if(this.enabled){r.preventDefault();var o=eo(r.touches);if(this.touchMode=o.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=o.map(function(g){return vt(g,i.container)}),this.touchMode===2){var s=No(this.startTouchesPositions,2),a=s[0],l=a.x,u=a.y,h=s[1],c=h.x,f=h.y;this.startTouchesAngle=Math.atan2(f-u,c-l),this.startTouchesDistance=Math.sqrt(Math.pow(c-l,2)+Math.pow(f-u,2))}this.emit("touchdown",Tr(r,this.lastTouches,this.container)),this.lastTouches=o,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(r){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(r.cancelable&&r.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(r.touches.length===1){this.handleStart(r),r.preventDefault();break}case 1:if(this.isMoving){var i=this.renderer.getCamera(),o=i.getState(),s=i.getPreviousState()||{x:0,y:0};i.animate({x:o.x+this.settings.inertiaRatio*(o.x-s.x),y:o.y+this.settings.inertiaRatio*(o.y-s.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Tr(r,this.lastTouches,this.container)),!r.touches.length){var a=vt(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],u=Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2);if(!r.touches.length&&u<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var h=Tr(r,this.lastTouches,this.container);if(this.emit("doubletap",h),this.lastTap=null,!h.sigmaDefaultPrevented){var c=this.renderer.getCamera(),f=c.getBoundedRatio(c.getState().ratio/this.settings.doubleClickZoomingRatio);c.animate(this.renderer.getViewportZoomedState(a,f),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var g=Tr(r,this.lastTouches,this.container);this.emit("tap",g),this.lastTap={time:Date.now(),position:g.touches[0]||g.previousTouches[0]}}}this.lastTouches=eo(r.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(r){var i=this;if(!(!this.enabled||!this.startTouchesPositions.length)){r.preventDefault();var o=eo(r.touches),s=o.map(function(K){return vt(K,i.container)}),a=this.lastTouches;this.lastTouches=o,this.lastTouchesPositions=s;var l=Tr(r,a,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=s.some(function(K,ee){var $=i.startTouchesPositions[ee];return $&&(K.x!==$.x||K.y!==$.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},this.settings.dragTimeout);var u=this.renderer.getCamera(),h=this.startCameraState,c=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var f=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),g=f.x,m=f.y,y=this.renderer.viewportToFramedGraph(s[0]),S=y.x,d=y.y;u.setState({x:h.x+g-S,y:h.y+m-d});break}case 2:{var p={x:.5,y:.5,angle:0,ratio:1},v=s[0],E=v.x,_=v.y,T=s[1],k=T.x,x=T.y,O=Math.atan2(x-_,k-E)-this.startTouchesAngle,w=Math.hypot(x-_,k-E)/this.startTouchesDistance,C=u.getBoundedRatio(h.ratio/w);p.ratio=C,p.angle=h.angle+O;var b=this.getDimensions(),R=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:h}),Y=Math.min(b.width,b.height)-2*c,B=Y/b.width,q=Y/b.height,X=C/Y,D=E-Y/2/B,G=_-Y/2/q,I=[D*Math.cos(-p.angle)-G*Math.sin(-p.angle),G*Math.cos(-p.angle)+D*Math.sin(-p.angle)];D=I[0],G=I[1],p.x=R.x-D*X,p.y=R.y+G*X,u.setState(p);break}}}}}},{key:"setSettings",value:function(r){this.settings=r}}]),e}(Ud);function m0(t){if(Array.isArray(t))return Da(t)}function v0(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function y0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cc(t){return m0(t)||v0(t)||xd(t)||y0()}function w0(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function zs(t,e){if(t==null)return{};var n,r,i=w0(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var xc=function(){function t(e,n){Me(this,t),this.key=e,this.size=n}return Pe(t,null,[{key:"compare",value:function(n,r){return n.size>r.size?-1:n.size<r.size||n.key>r.key?1:-1}}]),t}(),Tc=function(){function t(){Me(this,t),N(this,"width",0),N(this,"height",0),N(this,"cellSize",0),N(this,"columns",0),N(this,"rows",0),N(this,"cells",{})}return Pe(t,[{key:"resizeAndClear",value:function(n,r){this.width=n.width,this.height=n.height,this.cellSize=r,this.columns=Math.ceil(n.width/r),this.rows=Math.ceil(n.height/r),this.cells={}}},{key:"getIndex",value:function(n){var r=Math.floor(n.x/this.cellSize),i=Math.floor(n.y/this.cellSize);return i*this.columns+r}},{key:"add",value:function(n,r,i){var o=new xc(n,r),s=this.getIndex(i),a=this.cells[s];a||(a=[],this.cells[s]=a),a.push(o)}},{key:"organize",value:function(){for(var n in this.cells){var r=this.cells[n];r.sort(xc.compare)}}},{key:"getLabelsToDisplay",value:function(n,r){var i=this.cellSize*this.cellSize,o=i/n/n,s=o*r/i,a=Math.ceil(s),l=[];for(var u in this.cells)for(var h=this.cells[u],c=0;c<Math.min(a,h.length);c++)l.push(h[c].key);return l}}]),t}();function E0(t){var e=t.graph,n=t.hoveredNode,r=t.highlightedNodes,i=t.displayedNodeLabels,o=[];return e.forEachEdge(function(s,a,l,u){(l===n||u===n||r.has(l)||r.has(u)||i.has(l)&&i.has(u))&&o.push(s)}),o}var Rc=150,Nc=50,Dt=Object.prototype.hasOwnProperty;function S0(t,e,n){if(!Dt.call(n,"x")||!Dt.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=t.defaultNodeColor),!n.label&&n.label!==""&&(n.label=null),n.label!==void 0&&n.label!==null?n.label=""+n.label:n.label=null,n.size||(n.size=2),Dt.call(n,"hidden")||(n.hidden=!1),Dt.call(n,"highlighted")||(n.highlighted=!1),Dt.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultNodeType),n.zIndex||(n.zIndex=0),n}function k0(t,e,n){return n.color||(n.color=t.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),Dt.call(n,"hidden")||(n.hidden=!1),Dt.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultEdgeType),n.zIndex||(n.zIndex=0),n}var _0=function(t){ut(e,t);function e(n,r){var i,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Me(this,e),i=lt(this,e),N(M(i),"elements",{}),N(M(i),"canvasContexts",{}),N(M(i),"webGLContexts",{}),N(M(i),"pickingLayers",new Set),N(M(i),"textures",{}),N(M(i),"frameBuffers",{}),N(M(i),"activeListeners",{}),N(M(i),"labelGrid",new Tc),N(M(i),"nodeDataCache",{}),N(M(i),"edgeDataCache",{}),N(M(i),"nodeProgramIndex",{}),N(M(i),"edgeProgramIndex",{}),N(M(i),"nodesWithForcedLabels",new Set),N(M(i),"edgesWithForcedLabels",new Set),N(M(i),"nodeExtent",{x:[0,1],y:[0,1]}),N(M(i),"nodeZExtent",[1/0,-1/0]),N(M(i),"edgeZExtent",[1/0,-1/0]),N(M(i),"matrix",dt()),N(M(i),"invMatrix",dt()),N(M(i),"correctionRatio",1),N(M(i),"customBBox",null),N(M(i),"normalizationFunction",Ec({x:[0,1],y:[0,1]})),N(M(i),"graphToViewportRatio",1),N(M(i),"itemIDsIndex",{}),N(M(i),"nodeIndices",{}),N(M(i),"edgeIndices",{}),N(M(i),"width",0),N(M(i),"height",0),N(M(i),"pixelRatio",yc()),N(M(i),"pickingDownSizingRatio",2*i.pixelRatio),N(M(i),"displayedNodeLabels",new Set),N(M(i),"displayedEdgeLabels",new Set),N(M(i),"highlightedNodes",new Set),N(M(i),"hoveredNode",null),N(M(i),"hoveredEdge",null),N(M(i),"renderFrame",null),N(M(i),"renderHighlightedNodesFrame",null),N(M(i),"needToProcess",!1),N(M(i),"checkEdgesEventsFrame",null),N(M(i),"nodePrograms",{}),N(M(i),"nodeHoverPrograms",{}),N(M(i),"edgePrograms",{}),i.settings=a0(o),kc(i.settings),r0(n),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");i.graph=n,i.container=r,i.createWebGLContext("edges",{picking:o.enableEdgeEvents}),i.createCanvasContext("edgeLabels"),i.createWebGLContext("nodes",{picking:!0}),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createWebGLContext("hoverNodes"),i.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),i.resize();for(var s in i.settings.nodeProgramClasses)i.registerNodeProgram(s,i.settings.nodeProgramClasses[s],i.settings.nodeHoverProgramClasses[s]);for(var a in i.settings.edgeProgramClasses)i.registerEdgeProgram(a,i.settings.edgeProgramClasses[a]);return i.camera=new _c,i.bindCameraHandlers(),i.mouseCaptor=new f0(i.elements.mouse,M(i)),i.mouseCaptor.setSettings(i.settings),i.touchCaptor=new g0(i.elements.mouse,M(i)),i.touchCaptor.setSettings(i.settings),i.bindEventHandlers(),i.bindGraphHandlers(),i.handleSettingsUpdate(),i.refresh(),i}return Pe(e,[{key:"registerNodeProgram",value:function(r,i,o){return this.nodePrograms[r]&&this.nodePrograms[r].kill(),this.nodeHoverPrograms[r]&&this.nodeHoverPrograms[r].kill(),this.nodePrograms[r]=new i(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[r]=new(o||i)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(r,i){return this.edgePrograms[r]&&this.edgePrograms[r].kill(),this.edgePrograms[r]=new i(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(r){if(this.nodePrograms[r]){var i=this.nodePrograms,o=i[r],s=zs(i,[r].map($r));o.kill(),this.nodePrograms=s}if(this.nodeHoverPrograms[r]){var a=this.nodeHoverPrograms,l=a[r],u=zs(a,[r].map($r));l.kill(),this.nodePrograms=u}return this}},{key:"unregisterEdgeProgram",value:function(r){if(this.edgePrograms[r]){var i=this.edgePrograms,o=i[r],s=zs(i,[r].map($r));o.kill(),this.edgePrograms=s}return this}},{key:"resetWebGLTexture",value:function(r){var i=this.webGLContexts[r],o=this.frameBuffers[r],s=this.textures[r];s&&i.deleteTexture(s);var a=i.createTexture();return i.bindFramebuffer(i.FRAMEBUFFER,o),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),this.textures[r]=a,this}},{key:"bindCameraHandlers",value:function(){var r=this;return this.activeListeners.camera=function(){r.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(r){var i=r.x,o=r.y,s=lc(this.webGLContexts.nodes,this.frameBuffers.nodes,i,o,this.pixelRatio,this.pickingDownSizingRatio),a=ac.apply(void 0,Cc(s)),l=this.itemIDsIndex[a];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var r=this;this.activeListeners.handleResize=function(){r.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(o){var s=xr(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}},l=r.getNodeAtPosition(s);if(l&&r.hoveredNode!==l&&!r.nodeDataCache[l].hidden){r.hoveredNode&&r.emit("leaveNode",j(j({},a),{},{node:r.hoveredNode})),r.hoveredNode=l,r.emit("enterNode",j(j({},a),{},{node:l})),r.scheduleHighlightedNodesRender();return}if(r.hoveredNode&&r.getNodeAtPosition(s)!==r.hoveredNode){var u=r.hoveredNode;r.hoveredNode=null,r.emit("leaveNode",j(j({},a),{},{node:u})),r.scheduleHighlightedNodesRender();return}if(r.settings.enableEdgeEvents){var h=r.hoveredNode?null:r.getEdgeAtPoint(a.event.x,a.event.y);h!==r.hoveredEdge&&(r.hoveredEdge&&r.emit("leaveEdge",j(j({},a),{},{edge:r.hoveredEdge})),h&&r.emit("enterEdge",j(j({},a),{},{edge:h})),r.hoveredEdge=h)}},this.activeListeners.handleMoveBody=function(o){var s=xr(o);r.emit("moveBody",{event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(o){var s=xr(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};r.hoveredNode&&(r.emit("leaveNode",j(j({},a),{},{node:r.hoveredNode})),r.scheduleHighlightedNodesRender()),r.settings.enableEdgeEvents&&r.hoveredEdge&&(r.emit("leaveEdge",j(j({},a),{},{edge:r.hoveredEdge})),r.scheduleHighlightedNodesRender()),r.emit("leaveStage",j({},a))},this.activeListeners.handleEnter=function(o){var s=xr(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};r.emit("enterStage",j({},a))};var i=function(s){return function(a){var l=xr(a),u={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},h=r.getNodeAtPosition(l);if(h)return r.emit("".concat(s,"Node"),j(j({},u),{},{node:h}));if(r.settings.enableEdgeEvents){var c=r.getEdgeAtPoint(l.x,l.y);if(c)return r.emit("".concat(s,"Edge"),j(j({},u),{},{edge:c}))}return r.emit("".concat(s,"Stage"),u)}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDoubleClick=i("doubleClick"),this.activeListeners.handleWheel=i("wheel"),this.activeListeners.handleDown=i("down"),this.activeListeners.handleUp=i("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var r=this,i=this.graph,o=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(s){var a,l=(a=s.hints)===null||a===void 0?void 0:a.attributes;r.graph.forEachNode(function(h){return r.updateNode(h)});var u=!l||l.some(function(h){return o.has(h)});r.refresh({partialGraph:{nodes:i.nodes()},skipIndexation:!u,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(s){var a,l=(a=s.hints)===null||a===void 0?void 0:a.attributes;r.graph.forEachEdge(function(h){return r.updateEdge(h)});var u=l&&["zIndex","type"].some(function(h){return l==null?void 0:l.includes(h)});r.refresh({partialGraph:{edges:i.edges()},skipIndexation:!u,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(s){var a=s.key;r.addNode(a),r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(s){var a=s.key;r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(s){var a=s.key;r.removeNode(a),r.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(s){var a=s.key;r.addEdge(a),r.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(s){var a=s.key;r.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(s){var a=s.key;r.removeEdge(a),r.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){r.clearEdgeState(),r.clearEdgeIndices(),r.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){r.clearEdgeState(),r.clearNodeState(),r.clearEdgeIndices(),r.clearNodeIndices(),r.refresh({schedule:!0})},i.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var r=this.graph;r.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(r,i){var o=lc(this.webGLContexts.edges,this.frameBuffers.edges,r,i,this.pixelRatio,this.pickingDownSizingRatio),s=ac.apply(void 0,Cc(o)),a=this.itemIDsIndex[s];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var r=this;this.emit("beforeProcess");var i=this.graph,o=this.settings,s=this.getDimensions();if(this.nodeExtent=n0(this.graph),!this.settings.autoRescale){var a=s.width,l=s.height,u=this.nodeExtent,h=u.x,c=u.y;this.nodeExtent={x:[(h[0]+h[1])/2-a/2,(h[0]+h[1])/2+a/2],y:[(c[0]+c[1])/2-l/2,(c[0]+c[1])/2+l/2]}}this.normalizationFunction=Ec(this.customBBox||this.nodeExtent);var f=new _c,g=Cr(f.getState(),s,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(s,o.labelGridCellSize);for(var m={},y={},S={},d={},p=1,v=i.nodes(),E=0,_=v.length;E<_;E++){var T=v[E],k=this.nodeDataCache[T],x=i.getNodeAttributes(T);k.x=x.x,k.y=x.y,this.normalizationFunction.applyTo(k),typeof k.label=="string"&&!k.hidden&&this.labelGrid.add(T,k.size,this.framedGraphToViewport(k,{matrix:g})),m[k.type]=(m[k.type]||0)+1}this.labelGrid.organize();for(var O in this.nodePrograms){if(!Dt.call(this.nodePrograms,O))throw new Error('Sigma: could not find a suitable program for node type "'.concat(O,'"!'));this.nodePrograms[O].reallocate(m[O]||0),m[O]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(v=wc(this.nodeZExtent,function(pe){return r.nodeDataCache[pe].zIndex},v));for(var w=0,C=v.length;w<C;w++){var b=v[w];y[b]=p,d[y[b]]={type:"node",id:b},p++;var R=this.nodeDataCache[b];this.addNodeToProgram(b,y[b],m[R.type]++)}for(var Y={},B=i.edges(),q=0,X=B.length;q<X;q++){var D=B[q],G=this.edgeDataCache[D];Y[G.type]=(Y[G.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(B=wc(this.edgeZExtent,function(pe){return r.edgeDataCache[pe].zIndex},B));for(var I in this.edgePrograms){if(!Dt.call(this.edgePrograms,I))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(I,'"!'));this.edgePrograms[I].reallocate(Y[I]||0),Y[I]=0}for(var K=0,ee=B.length;K<ee;K++){var $=B[K];S[$]=p,d[S[$]]={type:"edge",id:$},p++;var ie=this.edgeDataCache[$];this.addEdgeToProgram($,S[$],Y[ie.type]++)}return this.itemIDsIndex=d,this.nodeIndices=y,this.edgeIndices=S,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(r){var i=this.settings;if(this.camera.minRatio=i.minCameraRatio,this.camera.maxRatio=i.maxCameraRatio,this.camera.enabledRotation=i.enableCameraRotation,this.camera.setState(this.camera.validateState(this.camera.getState())),r){if(r.edgeProgramClasses!==i.edgeProgramClasses){for(var o in i.edgeProgramClasses)i.edgeProgramClasses[o]!==r.edgeProgramClasses[o]&&this.registerEdgeProgram(o,i.edgeProgramClasses[o]);for(var s in r.edgeProgramClasses)i.edgeProgramClasses[s]||this.unregisterEdgeProgram(s)}if(r.nodeProgramClasses!==i.nodeProgramClasses||r.nodeHoverProgramClasses!==i.nodeHoverProgramClasses){for(var a in i.nodeProgramClasses)(i.nodeProgramClasses[a]!==r.nodeProgramClasses[a]||i.nodeHoverProgramClasses[a]!==r.nodeHoverProgramClasses[a])&&this.registerNodeProgram(a,i.nodeProgramClasses[a],i.nodeHoverProgramClasses[a]);for(var l in r.nodeProgramClasses)i.nodeProgramClasses[l]||this.unregisterNodeProgram(l)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var r=this.camera.getState(),i=this.labelGrid.getLabelsToDisplay(r.ratio,this.settings.labelDensity);Sc(i,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var o=this.canvasContexts.labels,s=0,a=i.length;s<a;s++){var l=i[s],u=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!u.hidden){var h=this.framedGraphToViewport(u),c=h.x,f=h.y,g=this.scaleSize(u.size);if(!(!u.forceLabel&&g<this.settings.labelRenderedSizeThreshold)&&!(c<-Rc||c>this.width+Rc||f<-Nc||f>this.height+Nc)){this.displayedNodeLabels.add(l);var m=this.settings.defaultDrawNodeLabel,y=this.nodePrograms[u.type],S=(y==null?void 0:y.drawLabel)||m;S(o,j(j({key:l},u),{},{size:g,x:c,y:f}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var r=this.canvasContexts.edgeLabels;r.clearRect(0,0,this.width,this.height);var i=E0({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});Sc(i,this.edgesWithForcedLabels);for(var o=new Set,s=0,a=i.length;s<a;s++){var l=i[s],u=this.graph.extremities(l),h=this.nodeDataCache[u[0]],c=this.nodeDataCache[u[1]],f=this.edgeDataCache[l];if(!o.has(l)&&!(f.hidden||h.hidden||c.hidden)){var g=this.settings.defaultDrawEdgeLabel,m=this.edgePrograms[f.type],y=(m==null?void 0:m.drawLabel)||g;y(r,j(j({key:l},f),{},{size:this.scaleSize(f.size)}),j(j(j({key:u[0]},h),this.framedGraphToViewport(h)),{},{size:this.scaleSize(h.size)}),j(j(j({key:u[1]},c),this.framedGraphToViewport(c)),{},{size:this.scaleSize(c.size)}),this.settings),o.add(l)}}return this.displayedEdgeLabels=o,this}},{key:"renderHighlightedNodes",value:function(){var r=this,i=this.canvasContexts.hovers;i.clearRect(0,0,this.width,this.height);var o=function(g){var m=r.nodeDataCache[g],y=r.framedGraphToViewport(m),S=y.x,d=y.y,p=r.scaleSize(m.size),v=r.settings.defaultDrawNodeHover,E=r.nodePrograms[m.type],_=(E==null?void 0:E.drawHover)||v;_(i,j(j({key:g},m),{},{size:p,x:S,y:d}),r.settings)},s=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&s.push(this.hoveredNode),this.highlightedNodes.forEach(function(f){f!==r.hoveredNode&&s.push(f)}),s.forEach(function(f){return o(f)});var a={};s.forEach(function(f){var g=r.nodeDataCache[f].type;a[g]=(a[g]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(a[l]||0),a[l]=0;s.forEach(function(f){var g=r.nodeDataCache[f];r.nodeHoverPrograms[g.type].process(0,a[g.type]++,g)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var u=this.getRenderParams();for(var h in this.nodeHoverPrograms){var c=this.nodeHoverPrograms[h];c.render(u)}}},{key:"scheduleHighlightedNodesRender",value:function(){var r=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){r.renderHighlightedNodesFrame=null,r.renderHighlightedNodes(),r.renderEdgeLabels()}))}},{key:"render",value:function(){var r=this;this.emit("beforeRender");var i=function(){return r.emit("afterRender"),r};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(S){return r.resetWebGLTexture(S)}),!this.graph.order)return i();var o=this.mouseCaptor,s=this.camera.isAnimated()||o.isMoving||o.draggedEvents||o.currentWheelDirection,a=this.camera.getState(),l=this.getDimensions(),u=this.getGraphDimensions(),h=this.getStagePadding();this.matrix=Cr(a,l,u,h),this.invMatrix=Cr(a,l,u,h,!0),this.correctionRatio=t0(this.matrix,a,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var c=this.getRenderParams();for(var f in this.nodePrograms){var g=this.nodePrograms[f];g.render(c)}if(!this.settings.hideEdgesOnMove||!s)for(var m in this.edgePrograms){var y=this.edgePrograms[m];y.render(c)}return this.settings.hideLabelsOnMove&&s||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),i()}},{key:"addNode",value:function(r){var i=Object.assign({},this.graph.getNodeAttributes(r));this.settings.nodeReducer&&(i=this.settings.nodeReducer(r,i));var o=S0(this.settings,r,i);this.nodeDataCache[r]=o,this.nodesWithForcedLabels.delete(r),o.forceLabel&&!o.hidden&&this.nodesWithForcedLabels.add(r),this.highlightedNodes.delete(r),o.highlighted&&!o.hidden&&this.highlightedNodes.add(r),this.settings.zIndex&&(o.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=o.zIndex),o.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=o.zIndex))}},{key:"updateNode",value:function(r){this.addNode(r);var i=this.nodeDataCache[r];this.normalizationFunction.applyTo(i)}},{key:"removeNode",value:function(r){delete this.nodeDataCache[r],delete this.nodeProgramIndex[r],this.highlightedNodes.delete(r),this.hoveredNode===r&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(r)}},{key:"addEdge",value:function(r){var i=Object.assign({},this.graph.getEdgeAttributes(r));this.settings.edgeReducer&&(i=this.settings.edgeReducer(r,i));var o=k0(this.settings,r,i);this.edgeDataCache[r]=o,this.edgesWithForcedLabels.delete(r),o.forceLabel&&!o.hidden&&this.edgesWithForcedLabels.add(r),this.settings.zIndex&&(o.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=o.zIndex),o.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=o.zIndex))}},{key:"updateEdge",value:function(r){this.addEdge(r)}},{key:"removeEdge",value:function(r){delete this.edgeDataCache[r],delete this.edgeProgramIndex[r],this.hoveredEdge===r&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(r)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new Tc,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(r,i,o){var s=this.nodeDataCache[r],a=this.nodePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(s.type,'"!'));a.process(i,o,s),this.nodeProgramIndex[r]=o}},{key:"addEdgeToProgram",value:function(r,i,o){var s=this.edgeDataCache[r],a=this.edgePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(s.type,'"!'));var l=this.graph.extremities(r),u=this.nodeDataCache[l[0]],h=this.nodeDataCache[l[1]];a.process(i,o,u,h,s),this.edgeProgramIndex[r]=o}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var r=this.settings,i=r.stagePadding,o=r.autoRescale;return o&&i||0}},{key:"createCanvas",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.elements[r])throw new Error('Sigma: a layer named "'.concat(r,'" already exists'));var o=i0("canvas",{position:"absolute"},{class:"sigma-".concat(r)});return i.style&&Object.assign(o.style,i.style),this.elements[r]=o,"beforeLayer"in i&&i.beforeLayer?this.elements[i.beforeLayer].before(o):"afterLayer"in i&&i.afterLayer?this.elements[i.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvasContext",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.createCanvas(r,i),s={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[r]=o.getContext("2d",s),this}},{key:"createWebGLContext",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=(i==null?void 0:i.canvas)||this.createCanvas(r,i);i.hidden&&o.remove();var s=j({preserveDrawingBuffer:!1,antialias:!1},i),a;a=o.getContext("webgl2",s),a||(a=o.getContext("webgl",s)),a||(a=o.getContext("experimental-webgl",s));var l=a;if(this.webGLContexts[r]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),i.picking){this.pickingLayers.add(r);var u=l.createFramebuffer();if(!u)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(r));this.frameBuffers[r]=u}return l}},{key:"killLayer",value:function(r){var i=this.elements[r];if(!i)throw new Error("Sigma: cannot kill layer ".concat(r,", which does not exist"));if(this.webGLContexts[r]){var o,s=this.webGLContexts[r];(o=s.getExtension("WEBGL_lose_context"))===null||o===void 0||o.loseContext(),delete this.webGLContexts[r]}else delete this.canvasContexts[r];return i.remove(),delete this.elements[r],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(r){this.unbindCameraHandlers(),this.camera=r,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(r){r!==this.graph&&(this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=r,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var r=this.customBBox||this.nodeExtent;return{width:r.x[1]-r.x[0]||1,height:r.y[1]-r.y[0]||1}}},{key:"getNodeDisplayData",value:function(r){var i=this.nodeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getEdgeDisplayData",value:function(r){var i=this.edgeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return j({},this.settings)}},{key:"getSetting",value:function(r){return this.settings[r]}},{key:"setSetting",value:function(r,i){var o=j({},this.settings);return this.settings[r]=i,kc(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(r,i){return this.setSetting(r,i(this.settings[r])),this}},{key:"resize",value:function(r){var i=this.width,o=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=yc(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!r&&i===this.width&&o===this.height)return this;this.emit("resize");for(var s in this.elements){var a=this.elements[s];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var u in this.webGLContexts){this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px");var h=this.webGLContexts[u];if(h.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(u)){var c=this.textures[u];c&&h.deleteTexture(c)}}return this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(r){var i=this,o=(r==null?void 0:r.skipIndexation)!==void 0?r==null?void 0:r.skipIndexation:!1,s=(r==null?void 0:r.schedule)!==void 0?r.schedule:!1,a=!r||!r.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(E){return i.addNode(E)}),this.graph.forEachEdge(function(E){return i.addEdge(E)});else{for(var l,u,h=((l=r.partialGraph)===null||l===void 0?void 0:l.nodes)||[],c=0,f=(h==null?void 0:h.length)||0;c<f;c++){var g=h[c];if(this.updateNode(g),o){var m=this.nodeProgramIndex[g];if(m===void 0)throw new Error('Sigma: node "'.concat(g,`" can't be repaint`));this.addNodeToProgram(g,this.nodeIndices[g],m)}}for(var y=(r==null||(u=r.partialGraph)===null||u===void 0?void 0:u.edges)||[],S=0,d=y.length;S<d;S++){var p=y[S];if(this.updateEdge(p),o){var v=this.edgeProgramIndex[p];if(v===void 0)throw new Error('Sigma: edge "'.concat(p,`" can't be repaint`));this.addEdgeToProgram(p,this.edgeIndices[p],v)}}}return(a||!o)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var r=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){r.render()})),this}},{key:"scheduleRefresh",value:function(r){return this.refresh(j(j({},r),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(r,i){var o=this.camera.getState(),s=o.ratio,a=o.angle,l=o.x,u=o.y,h=this.settings,c=h.minCameraRatio,f=h.maxCameraRatio;typeof f=="number"&&(i=Math.min(i,f)),typeof c=="number"&&(i=Math.max(i,c));var g=i/s,m={x:this.width/2,y:this.height/2},y=this.viewportToFramedGraph(r),S=this.viewportToFramedGraph(m);return{angle:a,x:(y.x-S.x)*(1-g)+l,y:(y.y-S.y)*(1-g)+u,ratio:i}}},{key:"viewRectangle",value:function(){var r=this.viewportToFramedGraph({x:0,y:0}),i=this.viewportToFramedGraph({x:this.width,y:0}),o=this.viewportToFramedGraph({x:0,y:this.height});return{x1:r.x,y1:r.y,x2:i.x,y2:i.y,height:i.y-o.y}}},{key:"framedGraphToViewport",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!i.cameraState||!!i.viewportDimensions||!!i.graphDimensions,s=i.matrix?i.matrix:o?Cr(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding()):this.matrix,a=Pa(s,r);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!i.cameraState||!!i.viewportDimensions||!i.graphDimensions,s=i.matrix?i.matrix:o?Cr(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding(),!0):this.invMatrix,a=Pa(s,{x:r.x/this.width*2-1,y:1-r.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(r,i))}},{key:"graphToViewport",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(r),i)}},{key:"getGraphToViewportRatio",value:function(){var r={x:0,y:0},i={x:1,y:1},o=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),s=this.graphToViewport(r),a=this.graphToViewport(i),l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return l/o}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(r){return this.customBBox=r,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={};for(var i in this.nodePrograms)this.nodePrograms[i].kill();for(var o in this.nodeHoverPrograms)this.nodeHoverPrograms[o].kill();for(var s in this.edgePrograms)this.edgePrograms[s].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a)}},{key:"scaleSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return r/this.settings.zoomToSizeRatioFunction(i)*(this.getSetting("itemSizesReference")==="positions"?i*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){return j({},this.elements)}}]),e}(Ol);const Bd=Z.createContext(null),C0=Bd.Provider;function x0(){const t=Z.useContext(Bd);if(t==null)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return t}function T0(){return x0().sigma}function Qo(t){return new Set(Object.keys(t))}Qo({clickNode:!0,rightClickNode:!0,downNode:!0,enterNode:!0,leaveNode:!0,doubleClickNode:!0,wheelNode:!0,clickEdge:!0,rightClickEdge:!0,downEdge:!0,enterEdge:!0,leaveEdge:!0,doubleClickEdge:!0,wheelEdge:!0,clickStage:!0,rightClickStage:!0,downStage:!0,doubleClickStage:!0,wheelStage:!0,beforeRender:!0,afterRender:!0,kill:!0,upStage:!0,upEdge:!0,upNode:!0,enterStage:!0,leaveStage:!0,resize:!0,afterClear:!0,afterProcess:!0,beforeClear:!0,beforeProcess:!0});Qo({click:!0,rightClick:!0,doubleClick:!0,mouseup:!0,mousedown:!0,mousemove:!0,mousemovebody:!0,mouseleave:!0,mouseenter:!0,wheel:!0});Qo({touchup:!0,touchdown:!0,touchmove:!0});Qo({updated:!0});function R0(){const t=T0();return Z.useCallback((e,n=!0)=>{t&&e&&(n&&t.getGraph().order>0&&t.getGraph().clear(),t.getGraph().import(e),t.refresh())},[t])}function Wd(t,e){if(t===e)return!0;if(typeof t=="object"&&t!=null&&typeof e=="object"&&e!=null){if(Object.keys(t).length!=Object.keys(e).length)return!1;for(const n in t)if(!Object.hasOwn(e,n)||!Wd(t[n],e[n]))return!1;return!0}return!1}const N0=Z.forwardRef(({graph:t,id:e,className:n,style:r,settings:i={},children:o},s)=>{const a=Z.useRef(null),l=Z.useRef(null),u={className:`react-sigma ${n||""}`,id:e,style:r},[h,c]=Z.useState(null),[f,g]=Z.useState(i);Z.useEffect(()=>{Wd(f,i)||g(i)},[i]),Z.useEffect(()=>{let S=null;if(l.current!==null){let d=new ne;t&&(d=typeof t=="function"?new t:t),S=new _0(d,l.current,f),h&&S.getCamera().setState(h.getCamera().getState())}return c(S),()=>{S&&S.kill(),c(null)}},[l,t,f]),Z.useImperativeHandle(s,()=>h,[h]);const m=Z.useMemo(()=>h&&a.current?{sigma:h,container:a.current}:null,[h,a.current]),y=m!==null?rs.createElement(C0,{value:m},o):null;return rs.createElement("div",Object.assign({},u,{ref:a}),rs.createElement("div",{className:"sigma-container",ref:l}),y)});var H={};const b0=Object.prototype.toString;function oi(t){const e=b0.call(t);return e.endsWith("Array]")&&!e.includes("Big")}const L0=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:oi},Symbol.toStringTag,{value:"Module"})),D0=zc(L0);function M0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!oi(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,o=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],a=r+1;a<o;a++)t[a]>s&&(s=t[a]);return s}function P0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!oi(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,o=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],a=r+1;a<o;a++)t[a]<s&&(s=t[a]);return s}function A0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(oi(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(e.output!==void 0){if(!oi(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=P0(t),i=M0(t);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=e.min,s=o===void 0?e.autoMinMax?r:0:o,a=e.max,l=a===void 0?e.autoMinMax?i:1:a;if(s>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-s)/(i-r),h=0;h<t.length;h++)n[h]=(t[h]-r)*u+s;return n}const F0=Object.freeze(Object.defineProperty({__proto__:null,default:A0},Symbol.toStringTag,{value:"Module"})),I0=zc(F0);Object.defineProperty(H,"__esModule",{value:!0});var Oe=D0,bc=I0;const zi=" ".repeat(2),Vd=" ".repeat(4);function z0(){return Yd(this)}function Yd(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:o="auto"}=e;return`${t.constructor.name} {
${zi}[
${Vd}${G0(t,n,r,i,o)}
${zi}]
${zi}rows: ${t.rows}
${zi}columns: ${t.columns}
}`}function G0(t,e,n,r,i){const{rows:o,columns:s}=t,a=Math.min(o,e),l=Math.min(s,n),u=[];if(i==="auto"){i=!1;e:for(let h=0;h<a;h++)for(let c=0;c<l;c++)if(t.get(h,c)<0){i=!0;break e}}for(let h=0;h<a;h++){let c=[];for(let f=0;f<l;f++)c.push(O0(t.get(h,f),r,i));u.push(`${c.join(" ")}`)}return l!==s&&(u[u.length-1]+=` ... ${s-n} more columns`),a!==o&&u.push(`... ${o-e} more rows`),u.join(`
${Vd}`)}function O0(t,e,n){return(t>=0&&n?` ${Lc(t,e-1)}`:Lc(t,e)).padEnd(e)}function Lc(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function j0(t,e){t.prototype.add=function(r){return typeof r=="number"?this.addS(r):this.addM(r)},t.prototype.addS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)+r);return this},t.prototype.addM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)+r.get(i,o));return this},t.add=function(r,i){return new e(r).add(i)},t.prototype.sub=function(r){return typeof r=="number"?this.subS(r):this.subM(r)},t.prototype.subS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)-r);return this},t.prototype.subM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)-r.get(i,o));return this},t.sub=function(r,i){return new e(r).sub(i)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(r){return typeof r=="number"?this.mulS(r):this.mulM(r)},t.prototype.mulS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)*r);return this},t.prototype.mulM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)*r.get(i,o));return this},t.mul=function(r,i){return new e(r).mul(i)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(r){return typeof r=="number"?this.divS(r):this.divM(r)},t.prototype.divS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)/r);return this},t.prototype.divM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)/r.get(i,o));return this},t.div=function(r,i){return new e(r).div(i)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(r){return typeof r=="number"?this.modS(r):this.modM(r)},t.prototype.modS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)%r);return this},t.prototype.modM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)%r.get(i,o));return this},t.mod=function(r,i){return new e(r).mod(i)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(r){return typeof r=="number"?this.andS(r):this.andM(r)},t.prototype.andS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)&r);return this},t.prototype.andM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)&r.get(i,o));return this},t.and=function(r,i){return new e(r).and(i)},t.prototype.or=function(r){return typeof r=="number"?this.orS(r):this.orM(r)},t.prototype.orS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)|r);return this},t.prototype.orM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)|r.get(i,o));return this},t.or=function(r,i){return new e(r).or(i)},t.prototype.xor=function(r){return typeof r=="number"?this.xorS(r):this.xorM(r)},t.prototype.xorS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)^r);return this},t.prototype.xorM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)^r.get(i,o));return this},t.xor=function(r,i){return new e(r).xor(i)},t.prototype.leftShift=function(r){return typeof r=="number"?this.leftShiftS(r):this.leftShiftM(r)},t.prototype.leftShiftS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)<<r);return this},t.prototype.leftShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)<<r.get(i,o));return this},t.leftShift=function(r,i){return new e(r).leftShift(i)},t.prototype.signPropagatingRightShift=function(r){return typeof r=="number"?this.signPropagatingRightShiftS(r):this.signPropagatingRightShiftM(r)},t.prototype.signPropagatingRightShiftS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)>>r);return this},t.prototype.signPropagatingRightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)>>r.get(i,o));return this},t.signPropagatingRightShift=function(r,i){return new e(r).signPropagatingRightShift(i)},t.prototype.rightShift=function(r){return typeof r=="number"?this.rightShiftS(r):this.rightShiftM(r)},t.prototype.rightShiftS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)>>>r);return this},t.prototype.rightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)>>>r.get(i,o));return this},t.rightShift=function(r,i){return new e(r).rightShift(i)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,~this.get(r,i));return this},t.not=function(r){return new e(r).not()},t.prototype.abs=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.abs(this.get(r,i)));return this},t.abs=function(r){return new e(r).abs()},t.prototype.acos=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.acos(this.get(r,i)));return this},t.acos=function(r){return new e(r).acos()},t.prototype.acosh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.acosh(this.get(r,i)));return this},t.acosh=function(r){return new e(r).acosh()},t.prototype.asin=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.asin(this.get(r,i)));return this},t.asin=function(r){return new e(r).asin()},t.prototype.asinh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.asinh(this.get(r,i)));return this},t.asinh=function(r){return new e(r).asinh()},t.prototype.atan=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.atan(this.get(r,i)));return this},t.atan=function(r){return new e(r).atan()},t.prototype.atanh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.atanh(this.get(r,i)));return this},t.atanh=function(r){return new e(r).atanh()},t.prototype.cbrt=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.cbrt(this.get(r,i)));return this},t.cbrt=function(r){return new e(r).cbrt()},t.prototype.ceil=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.ceil(this.get(r,i)));return this},t.ceil=function(r){return new e(r).ceil()},t.prototype.clz32=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.clz32(this.get(r,i)));return this},t.clz32=function(r){return new e(r).clz32()},t.prototype.cos=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.cos(this.get(r,i)));return this},t.cos=function(r){return new e(r).cos()},t.prototype.cosh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.cosh(this.get(r,i)));return this},t.cosh=function(r){return new e(r).cosh()},t.prototype.exp=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.exp(this.get(r,i)));return this},t.exp=function(r){return new e(r).exp()},t.prototype.expm1=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.expm1(this.get(r,i)));return this},t.expm1=function(r){return new e(r).expm1()},t.prototype.floor=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.floor(this.get(r,i)));return this},t.floor=function(r){return new e(r).floor()},t.prototype.fround=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.fround(this.get(r,i)));return this},t.fround=function(r){return new e(r).fround()},t.prototype.log=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log(this.get(r,i)));return this},t.log=function(r){return new e(r).log()},t.prototype.log1p=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log1p(this.get(r,i)));return this},t.log1p=function(r){return new e(r).log1p()},t.prototype.log10=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log10(this.get(r,i)));return this},t.log10=function(r){return new e(r).log10()},t.prototype.log2=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log2(this.get(r,i)));return this},t.log2=function(r){return new e(r).log2()},t.prototype.round=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.round(this.get(r,i)));return this},t.round=function(r){return new e(r).round()},t.prototype.sign=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sign(this.get(r,i)));return this},t.sign=function(r){return new e(r).sign()},t.prototype.sin=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sin(this.get(r,i)));return this},t.sin=function(r){return new e(r).sin()},t.prototype.sinh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sinh(this.get(r,i)));return this},t.sinh=function(r){return new e(r).sinh()},t.prototype.sqrt=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sqrt(this.get(r,i)));return this},t.sqrt=function(r){return new e(r).sqrt()},t.prototype.tan=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.tan(this.get(r,i)));return this},t.tan=function(r){return new e(r).tan()},t.prototype.tanh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.tanh(this.get(r,i)));return this},t.tanh=function(r){return new e(r).tanh()},t.prototype.trunc=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.trunc(this.get(r,i)));return this},t.trunc=function(r){return new e(r).trunc()},t.pow=function(r,i){return new e(r).pow(i)},t.prototype.pow=function(r){return typeof r=="number"?this.powS(r):this.powM(r)},t.prototype.powS=function(r){for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)**r);return this},t.prototype.powM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let o=0;o<this.columns;o++)this.set(i,o,this.get(i,o)**r.get(i,o));return this}}function Ze(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function Je(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Dn(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Mn(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function $l(t,e){if(!Oe.isAnyArray(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function Ul(t,e){if(!Oe.isAnyArray(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function Aa(t,e,n,r,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Gi("startRow",e),Gi("endRow",n),Gi("startColumn",r),Gi("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function Ho(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Gi(t,e){if(typeof e!="number")throw new TypeError(`${t} must be a number`)}function Ln(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function $0(t){let e=Ho(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}function U0(t){let e=Ho(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}function B0(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}function W0(t){let e=Ho(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}function V0(t){let e=Ho(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}function Y0(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}function K0(t,e,n){const r=t.rows,i=t.columns,o=[];for(let s=0;s<r;s++){let a=0,l=0,u=0;for(let h=0;h<i;h++)u=t.get(s,h)-n[s],a+=u,l+=u*u;e?o.push((l-a*a/i)/(i-1)):o.push((l-a*a/i)/i)}return o}function q0(t,e,n){const r=t.rows,i=t.columns,o=[];for(let s=0;s<i;s++){let a=0,l=0,u=0;for(let h=0;h<r;h++)u=t.get(h,s)-n[s],a+=u,l+=u*u;e?o.push((l-a*a/r)/(r-1)):o.push((l-a*a/r)/r)}return o}function Q0(t,e,n){const r=t.rows,i=t.columns,o=r*i;let s=0,a=0,l=0;for(let u=0;u<r;u++)for(let h=0;h<i;h++)l=t.get(u,h)-n,s+=l,a+=l*l;return e?(a-s*s/o)/(o-1):(a-s*s/o)/o}function H0(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function X0(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function Z0(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function J0(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let i=0;i<t.columns;i++)r+=t.get(n,i)**2/(t.columns-1);e.push(Math.sqrt(r))}return e}function ew(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function tw(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let i=0;i<t.rows;i++)r+=t.get(i,n)**2/(t.rows-1);e.push(Math.sqrt(r))}return e}function nw(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function rw(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=t.get(i,r)**2/e;return Math.sqrt(n)}function iw(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}class W{static from1DArray(e,n,r){if(e*n!==r.length)throw new RangeError("data length does not match given dimensions");let o=new A(e,n);for(let s=0;s<e;s++)for(let a=0;a<n;a++)o.set(s,a,r[s*n+a]);return o}static rowVector(e){let n=new A(1,e.length);for(let r=0;r<e.length;r++)n.set(0,r,e[r]);return n}static columnVector(e){let n=new A(e.length,1);for(let r=0;r<e.length;r++)n.set(r,0,e[r]);return n}static zeros(e,n){return new A(e,n)}static ones(e,n){return new A(e,n).fill(1)}static rand(e,n,r={}){if(typeof r!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=r;let o=new A(e,n);for(let s=0;s<e;s++)for(let a=0;a<n;a++)o.set(s,a,i());return o}static randInt(e,n,r={}){if(typeof r!="object")throw new TypeError("options must be an object");const{min:i=0,max:o=1e3,random:s=Math.random}=r;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(i>=o)throw new RangeError("min must be smaller than max");let a=o-i,l=new A(e,n);for(let u=0;u<e;u++)for(let h=0;h<n;h++){let c=i+Math.round(s()*a);l.set(u,h,c)}return l}static eye(e,n,r){n===void 0&&(n=e),r===void 0&&(r=1);let i=Math.min(e,n),o=this.zeros(e,n);for(let s=0;s<i;s++)o.set(s,s,r);return o}static diag(e,n,r){let i=e.length;n===void 0&&(n=i),r===void 0&&(r=n);let o=Math.min(i,n,r),s=this.zeros(n,r);for(let a=0;a<o;a++)s.set(a,a,e[a]);return s}static min(e,n){e=this.checkMatrix(e),n=this.checkMatrix(n);let r=e.rows,i=e.columns,o=new A(r,i);for(let s=0;s<r;s++)for(let a=0;a<i;a++)o.set(s,a,Math.min(e.get(s,a),n.get(s,a)));return o}static max(e,n){e=this.checkMatrix(e),n=this.checkMatrix(n);let r=e.rows,i=e.columns,o=new this(r,i);for(let s=0;s<r;s++)for(let a=0;a<i;a++)o.set(s,a,Math.max(e.get(s,a),n.get(s,a)));return o}static checkMatrix(e){return W.isMatrix(e)?e:new A(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e.call(this,n,r);return this}to1DArray(){let e=[];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e.push(this.get(n,r));return e}to2DArray(){let e=[];for(let n=0;n<this.rows;n++){e.push([]);for(let r=0;r<this.columns;r++)e[n].push(this.get(n,r))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let n=0;n<=e;n++)if(this.get(e,n)!==this.get(n,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,n=0,r=-1,i=!0,o=!1;for(;e<this.rows&&i;){for(n=0,o=!1;n<this.columns&&o===!1;)this.get(e,n)===0?n++:this.get(e,n)===1&&n>r?(o=!0,r=n):(i=!1,o=!0);e++}return i}isReducedEchelonForm(){let e=0,n=0,r=-1,i=!0,o=!1;for(;e<this.rows&&i;){for(n=0,o=!1;n<this.columns&&o===!1;)this.get(e,n)===0?n++:this.get(e,n)===1&&n>r?(o=!0,r=n):(i=!1,o=!0);for(let s=n+1;s<this.rows;s++)this.get(e,s)!==0&&(i=!1);e++}return i}echelonForm(){let e=this.clone(),n=0,r=0;for(;n<e.rows&&r<e.columns;){let i=n;for(let o=n;o<e.rows;o++)e.get(o,r)>e.get(i,r)&&(i=o);if(e.get(i,r)===0)r++;else{e.swapRows(n,i);let o=e.get(n,r);for(let s=r;s<e.columns;s++)e.set(n,s,e.get(n,s)/o);for(let s=n+1;s<e.rows;s++){let a=e.get(s,r)/e.get(n,r);e.set(s,r,0);for(let l=r+1;l<e.columns;l++)e.set(s,l,e.get(s,l)-e.get(n,l)*a)}n++,r++}}return e}reducedEchelonForm(){let e=this.echelonForm(),n=e.columns,r=e.rows,i=r-1;for(;i>=0;)if(e.maxRow(i)===0)i--;else{let o=0,s=!1;for(;o<r&&s===!1;)e.get(i,o)===1?s=!0:o++;for(let a=0;a<i;a++){let l=e.get(a,o);for(let u=o;u<n;u++){let h=e.get(a,u)-l*e.get(i,u);e.set(a,u,h)}}i--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:n=1,columns:r=1}=e;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let i=new A(this.rows*n,this.columns*r);for(let o=0;o<n;o++)for(let s=0;s<r;s++)i.setSubMatrix(this,this.rows*o,this.columns*s);return i}fill(e){for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,e);return this}neg(){return this.mulS(-1)}getRow(e){Ze(this,e);let n=[];for(let r=0;r<this.columns;r++)n.push(this.get(e,r));return n}getRowVector(e){return A.rowVector(this.getRow(e))}setRow(e,n){Ze(this,e),n=Dn(this,n);for(let r=0;r<this.columns;r++)this.set(e,r,n[r]);return this}swapRows(e,n){Ze(this,e),Ze(this,n);for(let r=0;r<this.columns;r++){let i=this.get(e,r);this.set(e,r,this.get(n,r)),this.set(n,r,i)}return this}getColumn(e){Je(this,e);let n=[];for(let r=0;r<this.rows;r++)n.push(this.get(r,e));return n}getColumnVector(e){return A.columnVector(this.getColumn(e))}setColumn(e,n){Je(this,e),n=Mn(this,n);for(let r=0;r<this.rows;r++)this.set(r,e,n[r]);return this}swapColumns(e,n){Je(this,e),Je(this,n);for(let r=0;r<this.rows;r++){let i=this.get(r,e);this.set(r,e,this.get(r,n)),this.set(r,n,i)}return this}addRowVector(e){e=Dn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+e[r]);return this}subRowVector(e){e=Dn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-e[r]);return this}mulRowVector(e){e=Dn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*e[r]);return this}divRowVector(e){e=Dn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/e[r]);return this}addColumnVector(e){e=Mn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+e[n]);return this}subColumnVector(e){e=Mn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-e[n]);return this}mulColumnVector(e){e=Mn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*e[n]);return this}divColumnVector(e){e=Mn(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/e[n]);return this}mulRow(e,n){Ze(this,e);for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*n);return this}mulColumn(e,n){Je(this,e);for(let r=0;r<this.rows;r++)this.set(r,e,this.get(r,e)*n);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const n=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>n[r]&&(n[r]=this.get(r,i));return n}case"column":{const n=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>n[i]&&(n[i]=this.get(r,i));return n}case void 0:{let n=this.get(0,0);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>n&&(n=this.get(r,i));return n}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){Ln(this);let e=this.get(0,0),n=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>e&&(e=this.get(r,i),n[0]=r,n[1]=i);return n}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const n=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<n[r]&&(n[r]=this.get(r,i));return n}case"column":{const n=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<n[i]&&(n[i]=this.get(r,i));return n}case void 0:{let n=this.get(0,0);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<n&&(n=this.get(r,i));return n}default:throw new Error(`invalid option: ${e}`)}}minIndex(){Ln(this);let e=this.get(0,0),n=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<e&&(e=this.get(r,i),n[0]=r,n[1]=i);return n}maxRow(e){if(Ze(this,e),this.isEmpty())return NaN;let n=this.get(e,0);for(let r=1;r<this.columns;r++)this.get(e,r)>n&&(n=this.get(e,r));return n}maxRowIndex(e){Ze(this,e),Ln(this);let n=this.get(e,0),r=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)>n&&(n=this.get(e,i),r[1]=i);return r}minRow(e){if(Ze(this,e),this.isEmpty())return NaN;let n=this.get(e,0);for(let r=1;r<this.columns;r++)this.get(e,r)<n&&(n=this.get(e,r));return n}minRowIndex(e){Ze(this,e),Ln(this);let n=this.get(e,0),r=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)<n&&(n=this.get(e,i),r[1]=i);return r}maxColumn(e){if(Je(this,e),this.isEmpty())return NaN;let n=this.get(0,e);for(let r=1;r<this.rows;r++)this.get(r,e)>n&&(n=this.get(r,e));return n}maxColumnIndex(e){Je(this,e),Ln(this);let n=this.get(0,e),r=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)>n&&(n=this.get(i,e),r[0]=i);return r}minColumn(e){if(Je(this,e),this.isEmpty())return NaN;let n=this.get(0,e);for(let r=1;r<this.rows;r++)this.get(r,e)<n&&(n=this.get(r,e));return n}minColumnIndex(e){Je(this,e),Ln(this);let n=this.get(0,e),r=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)<n&&(n=this.get(i,e),r[0]=i);return r}diag(){let e=Math.min(this.rows,this.columns),n=[];for(let r=0;r<e;r++)n.push(this.get(r,r));return n}norm(e="frobenius"){switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e+=this.get(n,r),this.set(n,r,e);return this}dot(e){W.isMatrix(e)&&(e=e.to1DArray());let n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");let r=0;for(let i=0;i<n.length;i++)r+=n[i]*e[i];return r}mmul(e){e=A.checkMatrix(e);let n=this.rows,r=this.columns,i=e.columns,o=new A(n,i),s=new Float64Array(r);for(let a=0;a<i;a++){for(let l=0;l<r;l++)s[l]=e.get(l,a);for(let l=0;l<n;l++){let u=0;for(let h=0;h<r;h++)u+=this.get(l,h)*s[h];o.set(l,a,u)}}return o}mpow(e){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(e)||e<0)throw new RangeError("Exponent must be a non-negative integer");let n=A.eye(this.rows),r=this;for(let i=e;i>1;i/=2)i&1&&(n=n.mmul(r)),r=r.mmul(r);return n}strassen2x2(e){e=A.checkMatrix(e);let n=new A(2,2);const r=this.get(0,0),i=e.get(0,0),o=this.get(0,1),s=e.get(0,1),a=this.get(1,0),l=e.get(1,0),u=this.get(1,1),h=e.get(1,1),c=(r+u)*(i+h),f=(a+u)*i,g=r*(s-h),m=u*(l-i),y=(r+o)*h,S=(a-r)*(i+s),d=(o-u)*(l+h),p=c+m-y+d,v=g+y,E=f+m,_=c-f+g+S;return n.set(0,0,p),n.set(0,1,v),n.set(1,0,E),n.set(1,1,_),n}strassen3x3(e){e=A.checkMatrix(e);let n=new A(3,3);const r=this.get(0,0),i=this.get(0,1),o=this.get(0,2),s=this.get(1,0),a=this.get(1,1),l=this.get(1,2),u=this.get(2,0),h=this.get(2,1),c=this.get(2,2),f=e.get(0,0),g=e.get(0,1),m=e.get(0,2),y=e.get(1,0),S=e.get(1,1),d=e.get(1,2),p=e.get(2,0),v=e.get(2,1),E=e.get(2,2),_=(r+i+o-s-a-h-c)*S,T=(r-s)*(-g+S),k=a*(-f+g+y-S-d-p+E),x=(-r+s+a)*(f-g+S),O=(s+a)*(-f+g),w=r*f,C=(-r+u+h)*(f-m+d),b=(-r+u)*(m-d),R=(u+h)*(-f+m),Y=(r+i+o-a-l-u-h)*d,B=h*(-f+m+y-S-d-p+v),q=(-o+h+c)*(S+p-v),X=(o-c)*(S-v),D=o*p,G=(h+c)*(-p+v),I=(-o+a+l)*(d+p-E),K=(o-l)*(d-E),ee=(a+l)*(-p+E),$=i*y,ie=l*v,pe=s*m,ge=u*g,le=c*E,Jd=w+D+$,ep=_+x+O+w+q+D+G,tp=w+C+R+Y+D+I+ee,np=T+k+x+w+D+I+K,rp=T+x+O+w+ie,ip=D+I+K+ee+pe,op=w+C+b+B+q+X+D,sp=q+X+D+G+ge,ap=w+C+b+R+le;return n.set(0,0,Jd),n.set(0,1,ep),n.set(0,2,tp),n.set(1,0,np),n.set(1,1,rp),n.set(1,2,ip),n.set(2,0,op),n.set(2,1,sp),n.set(2,2,ap),n}mmulStrassen(e){e=A.checkMatrix(e);let n=this.clone(),r=n.rows,i=n.columns,o=e.rows,s=e.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);function a(c,f,g){let m=c.rows,y=c.columns;if(m===f&&y===g)return c;{let S=W.zeros(f,g);return S=S.setSubMatrix(c,0,0),S}}let l=Math.max(r,o),u=Math.max(i,s);n=a(n,l,u),e=a(e,l,u);function h(c,f,g,m){if(g<=512||m<=512)return c.mmul(f);g%2===1&&m%2===1?(c=a(c,g+1,m+1),f=a(f,g+1,m+1)):g%2===1?(c=a(c,g+1,m),f=a(f,g+1,m)):m%2===1&&(c=a(c,g,m+1),f=a(f,g,m+1));let y=parseInt(c.rows/2,10),S=parseInt(c.columns/2,10),d=c.subMatrix(0,y-1,0,S-1),p=f.subMatrix(0,y-1,0,S-1),v=c.subMatrix(0,y-1,S,c.columns-1),E=f.subMatrix(0,y-1,S,f.columns-1),_=c.subMatrix(y,c.rows-1,0,S-1),T=f.subMatrix(y,f.rows-1,0,S-1),k=c.subMatrix(y,c.rows-1,S,c.columns-1),x=f.subMatrix(y,f.rows-1,S,f.columns-1),O=h(W.add(d,k),W.add(p,x),y,S),w=h(W.add(_,k),p,y,S),C=h(d,W.sub(E,x),y,S),b=h(k,W.sub(T,p),y,S),R=h(W.add(d,v),x,y,S),Y=h(W.sub(_,d),W.add(p,E),y,S),B=h(W.sub(v,k),W.add(T,x),y,S),q=W.add(O,b);q.sub(R),q.add(B);let X=W.add(C,R),D=W.add(w,b),G=W.sub(O,w);G.add(C),G.add(Y);let I=W.zeros(2*q.rows,2*q.columns);return I=I.setSubMatrix(q,0,0),I=I.setSubMatrix(X,q.rows,0),I=I.setSubMatrix(D,0,q.columns),I=I.setSubMatrix(G,q.rows,q.columns),I.subMatrix(0,g-1,0,m-1)}return h(n,e,l,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:n=0,max:r=1}=e;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(n>=r)throw new RangeError("min must be smaller than max");let i=new A(this.rows,this.columns);for(let o=0;o<this.rows;o++){const s=this.getRow(o);s.length>0&&bc(s,{min:n,max:r,output:s}),i.setRow(o,s)}return i}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:n=0,max:r=1}=e;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(n>=r)throw new RangeError("min must be smaller than max");let i=new A(this.rows,this.columns);for(let o=0;o<this.columns;o++){const s=this.getColumn(o);s.length&&bc(s,{min:n,max:r,output:s}),i.setColumn(o,s)}return i}flipRows(){const e=Math.ceil(this.columns/2);for(let n=0;n<this.rows;n++)for(let r=0;r<e;r++){let i=this.get(n,r),o=this.get(n,this.columns-1-r);this.set(n,r,o),this.set(n,this.columns-1-r,i)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let n=0;n<this.columns;n++)for(let r=0;r<e;r++){let i=this.get(r,n),o=this.get(this.rows-1-r,n);this.set(r,n,o),this.set(this.rows-1-r,n,i)}return this}kroneckerProduct(e){e=A.checkMatrix(e);let n=this.rows,r=this.columns,i=e.rows,o=e.columns,s=new A(n*i,r*o);for(let a=0;a<n;a++)for(let l=0;l<r;l++)for(let u=0;u<i;u++)for(let h=0;h<o;h++)s.set(i*a+u,o*l+h,this.get(a,l)*e.get(u,h));return s}kroneckerSum(e){if(e=A.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let n=this.rows,r=e.rows,i=this.kroneckerProduct(A.eye(r,r)),o=A.eye(n,n).kroneckerProduct(e);return i.add(o)}transpose(){let e=new A(this.columns,this.rows);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e.set(r,n,this.get(n,r));return e}sortRows(e=Dc){for(let n=0;n<this.rows;n++)this.setRow(n,this.getRow(n).sort(e));return this}sortColumns(e=Dc){for(let n=0;n<this.columns;n++)this.setColumn(n,this.getColumn(n).sort(e));return this}subMatrix(e,n,r,i){Aa(this,e,n,r,i);let o=new A(n-e+1,i-r+1);for(let s=e;s<=n;s++)for(let a=r;a<=i;a++)o.set(s-e,a-r,this.get(s,a));return o}subMatrixRow(e,n,r){if(n===void 0&&(n=0),r===void 0&&(r=this.columns-1),n>r||n<0||n>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let i=new A(e.length,r-n+1);for(let o=0;o<e.length;o++)for(let s=n;s<=r;s++){if(e[o]<0||e[o]>=this.rows)throw new RangeError(`Row index out of range: ${e[o]}`);i.set(o,s-n,this.get(e[o],s))}return i}subMatrixColumn(e,n,r){if(n===void 0&&(n=0),r===void 0&&(r=this.rows-1),n>r||n<0||n>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let i=new A(r-n+1,e.length);for(let o=0;o<e.length;o++)for(let s=n;s<=r;s++){if(e[o]<0||e[o]>=this.columns)throw new RangeError(`Column index out of range: ${e[o]}`);i.set(s-n,o,this.get(s,e[o]))}return i}setSubMatrix(e,n,r){if(e=A.checkMatrix(e),e.isEmpty())return this;let i=n+e.rows-1,o=r+e.columns-1;Aa(this,n,i,r,o);for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)this.set(n+s,r+a,e.get(s,a));return this}selection(e,n){$l(this,e),Ul(this,n);let r=new A(e.length,n.length);for(let i=0;i<e.length;i++){let o=e[i];for(let s=0;s<n.length;s++){let a=n[s];r.set(i,s,this.get(o,a))}}return r}trace(){let e=Math.min(this.rows,this.columns),n=0;for(let r=0;r<e;r++)n+=this.get(r,r);return n}clone(){return this.constructor.copy(this,new A(this.rows,this.columns))}static copy(e,n){for(const[r,i,o]of e.entries())n.set(r,i,o);return n}sum(e){switch(e){case"row":return $0(this);case"column":return U0(this);case void 0:return B0(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return W0(this);case"column":return V0(this);case void 0:return Y0(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const n=this.sum(e);switch(e){case"row":{for(let r=0;r<this.rows;r++)n[r]/=this.columns;return n}case"column":{for(let r=0;r<this.columns;r++)n[r]/=this.rows;return n}case void 0:return n/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,n={}){if(typeof e=="object"&&(n=e,e=void 0),typeof n!="object")throw new TypeError("options must be an object");const{unbiased:r=!0,mean:i=this.mean(e)}=n;if(typeof r!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Oe.isAnyArray(i))throw new TypeError("mean must be an array");return K0(this,r,i)}case"column":{if(!Oe.isAnyArray(i))throw new TypeError("mean must be an array");return q0(this,r,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return Q0(this,r,i)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,n){typeof e=="object"&&(n=e,e=void 0);const r=this.variance(e,n);if(e===void 0)return Math.sqrt(r);for(let i=0;i<r.length;i++)r[i]=Math.sqrt(r[i]);return r}center(e,n={}){if(typeof e=="object"&&(n=e,e=void 0),typeof n!="object")throw new TypeError("options must be an object");const{center:r=this.mean(e)}=n;switch(e){case"row":{if(!Oe.isAnyArray(r))throw new TypeError("center must be an array");return H0(this,r),this}case"column":{if(!Oe.isAnyArray(r))throw new TypeError("center must be an array");return X0(this,r),this}case void 0:{if(typeof r!="number")throw new TypeError("center must be a number");return Z0(this,r),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,n={}){if(typeof e=="object"&&(n=e,e=void 0),typeof n!="object")throw new TypeError("options must be an object");let r=n.scale;switch(e){case"row":{if(r===void 0)r=J0(this);else if(!Oe.isAnyArray(r))throw new TypeError("scale must be an array");return ew(this,r),this}case"column":{if(r===void 0)r=tw(this);else if(!Oe.isAnyArray(r))throw new TypeError("scale must be an array");return nw(this,r),this}case void 0:{if(r===void 0)r=rw(this);else if(typeof r!="number")throw new TypeError("scale must be a number");return iw(this,r),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return Yd(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)yield[e,n,this.get(e,n)]}*values(){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)yield this.get(e,n)}}W.prototype.klass="Matrix";typeof Symbol<"u"&&(W.prototype[Symbol.for("nodejs.util.inspect.custom")]=z0);function Dc(t,e){return t-e}function ow(t){return t.every(e=>typeof e=="number")}W.random=W.rand;W.randomInt=W.randInt;W.diagonal=W.diag;W.prototype.diagonal=W.prototype.diag;W.identity=W.eye;W.prototype.negate=W.prototype.neg;W.prototype.tensorProduct=W.prototype.kroneckerProduct;var si,Fa,En;let A=(En=class extends W{constructor(n,r){super();es(this,si);Vl(this,"data");if(En.isMatrix(n))ts(this,si,Fa).call(this,n.rows,n.columns),En.copy(n,this);else if(Number.isInteger(n)&&n>=0)ts(this,si,Fa).call(this,n,r);else if(Oe.isAnyArray(n)){const i=n;if(n=i.length,r=n?i[0].length:0,typeof r!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let o=0;o<n;o++){if(i[o].length!==r)throw new RangeError("Inconsistent array dimensions");if(!ow(i[o]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(i[o]))}this.rows=n,this.columns=r}else throw new TypeError("First argument must be a positive number or an array")}set(n,r,i){return this.data[n][r]=i,this}get(n,r){return this.data[n][r]}removeRow(n){return Ze(this,n),this.data.splice(n,1),this.rows-=1,this}addRow(n,r){return r===void 0&&(r=n,n=this.rows),Ze(this,n,!0),r=Float64Array.from(Dn(this,r)),this.data.splice(n,0,r),this.rows+=1,this}removeColumn(n){Je(this,n);for(let r=0;r<this.rows;r++){const i=new Float64Array(this.columns-1);for(let o=0;o<n;o++)i[o]=this.data[r][o];for(let o=n+1;o<this.columns;o++)i[o-1]=this.data[r][o];this.data[r]=i}return this.columns-=1,this}addColumn(n,r){typeof r>"u"&&(r=n,n=this.columns),Je(this,n,!0),r=Mn(this,r);for(let i=0;i<this.rows;i++){const o=new Float64Array(this.columns+1);let s=0;for(;s<n;s++)o[s]=this.data[i][s];for(o[s++]=r[i];s<this.columns+1;s++)o[s]=this.data[i][s-1];this.data[i]=o}return this.columns+=1,this}},si=new WeakSet,Fa=function(n,r){if(this.data=[],Number.isInteger(r)&&r>=0)for(let i=0;i<n;i++)this.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");this.rows=n,this.columns=r},En);j0(W,A);var be;const bo=class bo extends W{constructor(n){super();es(this,be);if(A.isMatrix(n)){if(!n.isSymmetric())throw new TypeError("not symmetric data");pi(this,be,A.copy(n,new A(n.rows,n.rows)))}else if(Number.isInteger(n)&&n>=0)pi(this,be,new A(n,n));else if(pi(this,be,new A(n)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return ct(this,be).size}get rows(){return ct(this,be).rows}get columns(){return ct(this,be).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(n){return A.isMatrix(n)&&n.klassType==="SymmetricMatrix"}static zeros(n){return new this(n)}static ones(n){return new this(n).fill(1)}clone(){const n=new bo(this.diagonalSize);for(const[r,i,o]of this.upperRightEntries())n.set(r,i,o);return n}toMatrix(){return new A(this)}get(n,r){return ct(this,be).get(n,r)}set(n,r,i){return ct(this,be).set(n,r,i),ct(this,be).set(r,n,i),this}removeCross(n){return ct(this,be).removeRow(n),ct(this,be).removeColumn(n),this}addCross(n,r){r===void 0&&(r=n,n=this.diagonalSize);const i=r.slice();return i.splice(n,1),ct(this,be).addRow(n,i),ct(this,be).addColumn(n,r),this}applyMask(n){if(n.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const r=[];for(const[i,o]of n.entries())o||r.push(i);r.reverse();for(const i of r)this.removeCross(i);return this}toCompact(){const{diagonalSize:n}=this,r=new Array(n*(n+1)/2);for(let i=0,o=0,s=0;s<r.length;s++)r[s]=this.get(o,i),++i>=n&&(i=++o);return r}static fromCompact(n){const r=n.length,i=(Math.sqrt(8*r+1)-1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(n)}`);const o=new bo(i);for(let s=0,a=0,l=0;l<r;l++)o.set(s,a,n[l]),++s>=i&&(s=++a);return o}*upperRightEntries(){for(let n=0,r=0;n<this.diagonalSize;void 0){const i=this.get(n,r);yield[n,r,i],++r>=this.diagonalSize&&(r=++n)}}*upperRightValues(){for(let n=0,r=0;n<this.diagonalSize;void 0)yield this.get(n,r),++r>=this.diagonalSize&&(r=++n)}};be=new WeakMap;let wn=bo;wn.prototype.klassType="SymmetricMatrix";class Xo extends wn{static isDistanceMatrix(e){return wn.isSymmetricMatrix(e)&&e.klassSubType==="DistanceMatrix"}constructor(e){if(super(e),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(e,n,r){return e===n&&(r=0),super.set(e,n,r)}addCross(e,n){return n===void 0&&(n=e,e=this.diagonalSize),n=n.slice(),n[e]=0,super.addCross(e,n)}toSymmetricMatrix(){return new wn(this)}clone(){const e=new Xo(this.diagonalSize);for(const[n,r,i]of this.upperRightEntries())n!==r&&e.set(n,r,i);return e}toCompact(){const{diagonalSize:e}=this,n=(e-1)*e/2,r=new Array(n);for(let i=1,o=0,s=0;s<r.length;s++)r[s]=this.get(o,i),++i>=e&&(i=++o+1);return r}static fromCompact(e){const n=e.length;if(n===0)return new this(0);const r=(Math.sqrt(8*n+1)+1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);const i=new this(r);for(let o=1,s=0,a=0;a<n;a++)i.set(o,s,e[a]),++o>=r&&(o=++s+1);return i}}Xo.prototype.klassSubType="DistanceMatrix";class Ut extends W{constructor(e,n,r){super(),this.matrix=e,this.rows=n,this.columns=r}}class sw extends Ut{constructor(e,n){Je(e,n),super(e,e.rows,1),this.column=n}set(e,n,r){return this.matrix.set(e,this.column,r),this}get(e){return this.matrix.get(e,this.column)}}class aw extends Ut{constructor(e,n){Ul(e,n),super(e,e.rows,n.length),this.columnIndices=n}set(e,n,r){return this.matrix.set(e,this.columnIndices[n],r),this}get(e,n){return this.matrix.get(e,this.columnIndices[n])}}class lw extends Ut{constructor(e){super(e,e.rows,e.columns)}set(e,n,r){return this.matrix.set(e,this.columns-n-1,r),this}get(e,n){return this.matrix.get(e,this.columns-n-1)}}class uw extends Ut{constructor(e){super(e,e.rows,e.columns)}set(e,n,r){return this.matrix.set(this.rows-e-1,n,r),this}get(e,n){return this.matrix.get(this.rows-e-1,n)}}class cw extends Ut{constructor(e,n){Ze(e,n),super(e,1,e.columns),this.row=n}set(e,n,r){return this.matrix.set(this.row,n,r),this}get(e,n){return this.matrix.get(this.row,n)}}class hw extends Ut{constructor(e,n){$l(e,n),super(e,n.length,e.columns),this.rowIndices=n}set(e,n,r){return this.matrix.set(this.rowIndices[e],n,r),this}get(e,n){return this.matrix.get(this.rowIndices[e],n)}}class to extends Ut{constructor(e,n,r){$l(e,n),Ul(e,r),super(e,n.length,r.length),this.rowIndices=n,this.columnIndices=r}set(e,n,r){return this.matrix.set(this.rowIndices[e],this.columnIndices[n],r),this}get(e,n){return this.matrix.get(this.rowIndices[e],this.columnIndices[n])}}class fw extends Ut{constructor(e,n,r,i,o){Aa(e,n,r,i,o),super(e,r-n+1,o-i+1),this.startRow=n,this.startColumn=i}set(e,n,r){return this.matrix.set(this.startRow+e,this.startColumn+n,r),this}get(e,n){return this.matrix.get(this.startRow+e,this.startColumn+n)}}class dw extends Ut{constructor(e){super(e,e.columns,e.rows)}set(e,n,r){return this.matrix.set(n,e,r),this}get(e,n){return this.matrix.get(n,e)}}class Kd extends W{constructor(e,n={}){const{rows:r=1}=n;if(e.length%r!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=e.length/r,this.data=e}set(e,n,r){let i=this._calculateIndex(e,n);return this.data[i]=r,this}get(e,n){let r=this._calculateIndex(e,n);return this.data[r]}_calculateIndex(e,n){return e*this.columns+n}}class qe extends W{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,n,r){return this.data[e][n]=r,this}get(e,n){return this.data[e][n]}}function pw(t,e){if(Oe.isAnyArray(t))return t[0]&&Oe.isAnyArray(t[0])?new qe(t):new Kd(t,e);throw new Error("the argument is not an array")}class Zo{constructor(e){e=qe.checkMatrix(e);let n=e.clone(),r=n.rows,i=n.columns,o=new Float64Array(r),s=1,a,l,u,h,c,f,g,m,y;for(a=0;a<r;a++)o[a]=a;for(m=new Float64Array(r),l=0;l<i;l++){for(a=0;a<r;a++)m[a]=n.get(a,l);for(a=0;a<r;a++){for(y=Math.min(a,l),c=0,u=0;u<y;u++)c+=n.get(a,u)*m[u];m[a]-=c,n.set(a,l,m[a])}for(h=l,a=l+1;a<r;a++)Math.abs(m[a])>Math.abs(m[h])&&(h=a);if(h!==l){for(u=0;u<i;u++)f=n.get(h,u),n.set(h,u,n.get(l,u)),n.set(l,u,f);g=o[h],o[h]=o[l],o[l]=g,s=-s}if(l<r&&n.get(l,l)!==0)for(a=l+1;a<r;a++)n.set(a,l,n.get(a,l)/n.get(l,l))}this.LU=n,this.pivotVector=o,this.pivotSign=s}isSingular(){let e=this.LU,n=e.columns;for(let r=0;r<n;r++)if(e.get(r,r)===0)return!0;return!1}solve(e){e=A.checkMatrix(e);let n=this.LU;if(n.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let i=e.columns,o=e.subMatrixRow(this.pivotVector,0,i-1),s=n.columns,a,l,u;for(u=0;u<s;u++)for(a=u+1;a<s;a++)for(l=0;l<i;l++)o.set(a,l,o.get(a,l)-o.get(u,l)*n.get(a,u));for(u=s-1;u>=0;u--){for(l=0;l<i;l++)o.set(u,l,o.get(u,l)/n.get(u,u));for(a=0;a<u;a++)for(l=0;l<i;l++)o.set(a,l,o.get(a,l)-o.get(u,l)*n.get(a,u))}return o}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let n=this.pivotSign,r=e.columns;for(let i=0;i<r;i++)n*=e.get(i,i);return n}get lowerTriangularMatrix(){let e=this.LU,n=e.rows,r=e.columns,i=new A(n,r);for(let o=0;o<n;o++)for(let s=0;s<r;s++)o>s?i.set(o,s,e.get(o,s)):o===s?i.set(o,s,1):i.set(o,s,0);return i}get upperTriangularMatrix(){let e=this.LU,n=e.rows,r=e.columns,i=new A(n,r);for(let o=0;o<n;o++)for(let s=0;s<r;s++)o<=s?i.set(o,s,e.get(o,s)):i.set(o,s,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Lt(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):e!==0?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class Bl{constructor(e){e=qe.checkMatrix(e);let n=e.clone(),r=e.rows,i=e.columns,o=new Float64Array(i),s,a,l,u;for(l=0;l<i;l++){let h=0;for(s=l;s<r;s++)h=Lt(h,n.get(s,l));if(h!==0){for(n.get(l,l)<0&&(h=-h),s=l;s<r;s++)n.set(s,l,n.get(s,l)/h);for(n.set(l,l,n.get(l,l)+1),a=l+1;a<i;a++){for(u=0,s=l;s<r;s++)u+=n.get(s,l)*n.get(s,a);for(u=-u/n.get(l,l),s=l;s<r;s++)n.set(s,a,n.get(s,a)+u*n.get(s,l))}}o[l]=-h}this.QR=n,this.Rdiag=o}solve(e){e=A.checkMatrix(e);let n=this.QR,r=n.rows;if(e.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i=e.columns,o=e.clone(),s=n.columns,a,l,u,h;for(u=0;u<s;u++)for(l=0;l<i;l++){for(h=0,a=u;a<r;a++)h+=n.get(a,u)*o.get(a,l);for(h=-h/n.get(u,u),a=u;a<r;a++)o.set(a,l,o.get(a,l)+h*n.get(a,u))}for(u=s-1;u>=0;u--){for(l=0;l<i;l++)o.set(u,l,o.get(u,l)/this.Rdiag[u]);for(a=0;a<u;a++)for(l=0;l<i;l++)o.set(a,l,o.get(a,l)-o.get(u,l)*n.get(a,u))}return o.subMatrix(0,s-1,0,i-1)}isFullRank(){let e=this.QR.columns;for(let n=0;n<e;n++)if(this.Rdiag[n]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,n=e.columns,r=new A(n,n),i,o;for(i=0;i<n;i++)for(o=0;o<n;o++)i<o?r.set(i,o,e.get(i,o)):i===o?r.set(i,o,this.Rdiag[i]):r.set(i,o,0);return r}get orthogonalMatrix(){let e=this.QR,n=e.rows,r=e.columns,i=new A(n,r),o,s,a,l;for(a=r-1;a>=0;a--){for(o=0;o<n;o++)i.set(o,a,0);for(i.set(a,a,1),s=a;s<r;s++)if(e.get(a,a)!==0){for(l=0,o=a;o<n;o++)l+=e.get(o,a)*i.get(o,s);for(l=-l/e.get(a,a),o=a;o<n;o++)i.set(o,s,i.get(o,s)+l*e.get(o,a))}}return i}}class fr{constructor(e,n={}){if(e=qe.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let r=e.rows,i=e.columns;const{computeLeftSingularVectors:o=!0,computeRightSingularVectors:s=!0,autoTranspose:a=!1}=n;let l=!!o,u=!!s,h=!1,c;if(r<i)if(!a)c=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{c=e.transpose(),r=c.rows,i=c.columns,h=!0;let w=l;l=u,u=w}else c=e.clone();let f=Math.min(r,i),g=Math.min(r+1,i),m=new Float64Array(g),y=new A(r,f),S=new A(i,i),d=new Float64Array(i),p=new Float64Array(r),v=new Float64Array(g);for(let w=0;w<g;w++)v[w]=w;let E=Math.min(r-1,i),_=Math.max(0,Math.min(i-2,r)),T=Math.max(E,_);for(let w=0;w<T;w++){if(w<E){m[w]=0;for(let C=w;C<r;C++)m[w]=Lt(m[w],c.get(C,w));if(m[w]!==0){c.get(w,w)<0&&(m[w]=-m[w]);for(let C=w;C<r;C++)c.set(C,w,c.get(C,w)/m[w]);c.set(w,w,c.get(w,w)+1)}m[w]=-m[w]}for(let C=w+1;C<i;C++){if(w<E&&m[w]!==0){let b=0;for(let R=w;R<r;R++)b+=c.get(R,w)*c.get(R,C);b=-b/c.get(w,w);for(let R=w;R<r;R++)c.set(R,C,c.get(R,C)+b*c.get(R,w))}d[C]=c.get(w,C)}if(l&&w<E)for(let C=w;C<r;C++)y.set(C,w,c.get(C,w));if(w<_){d[w]=0;for(let C=w+1;C<i;C++)d[w]=Lt(d[w],d[C]);if(d[w]!==0){d[w+1]<0&&(d[w]=0-d[w]);for(let C=w+1;C<i;C++)d[C]/=d[w];d[w+1]+=1}if(d[w]=-d[w],w+1<r&&d[w]!==0){for(let C=w+1;C<r;C++)p[C]=0;for(let C=w+1;C<r;C++)for(let b=w+1;b<i;b++)p[C]+=d[b]*c.get(C,b);for(let C=w+1;C<i;C++){let b=-d[C]/d[w+1];for(let R=w+1;R<r;R++)c.set(R,C,c.get(R,C)+b*p[R])}}if(u)for(let C=w+1;C<i;C++)S.set(C,w,d[C])}}let k=Math.min(i,r+1);if(E<i&&(m[E]=c.get(E,E)),r<k&&(m[k-1]=0),_+1<k&&(d[_]=c.get(_,k-1)),d[k-1]=0,l){for(let w=E;w<f;w++){for(let C=0;C<r;C++)y.set(C,w,0);y.set(w,w,1)}for(let w=E-1;w>=0;w--)if(m[w]!==0){for(let C=w+1;C<f;C++){let b=0;for(let R=w;R<r;R++)b+=y.get(R,w)*y.get(R,C);b=-b/y.get(w,w);for(let R=w;R<r;R++)y.set(R,C,y.get(R,C)+b*y.get(R,w))}for(let C=w;C<r;C++)y.set(C,w,-y.get(C,w));y.set(w,w,1+y.get(w,w));for(let C=0;C<w-1;C++)y.set(C,w,0)}else{for(let C=0;C<r;C++)y.set(C,w,0);y.set(w,w,1)}}if(u)for(let w=i-1;w>=0;w--){if(w<_&&d[w]!==0)for(let C=w+1;C<i;C++){let b=0;for(let R=w+1;R<i;R++)b+=S.get(R,w)*S.get(R,C);b=-b/S.get(w+1,w);for(let R=w+1;R<i;R++)S.set(R,C,S.get(R,C)+b*S.get(R,w))}for(let C=0;C<i;C++)S.set(C,w,0);S.set(w,w,1)}let x=k-1,O=Number.EPSILON;for(;k>0;){let w,C;for(w=k-2;w>=-1&&w!==-1;w--){const b=Number.MIN_VALUE+O*Math.abs(m[w]+Math.abs(m[w+1]));if(Math.abs(d[w])<=b||Number.isNaN(d[w])){d[w]=0;break}}if(w===k-2)C=4;else{let b;for(b=k-1;b>=w&&b!==w;b--){let R=(b!==k?Math.abs(d[b]):0)+(b!==w+1?Math.abs(d[b-1]):0);if(Math.abs(m[b])<=O*R){m[b]=0;break}}b===w?C=3:b===k-1?C=1:(C=2,w=b)}switch(w++,C){case 1:{let b=d[k-2];d[k-2]=0;for(let R=k-2;R>=w;R--){let Y=Lt(m[R],b),B=m[R]/Y,q=b/Y;if(m[R]=Y,R!==w&&(b=-q*d[R-1],d[R-1]=B*d[R-1]),u)for(let X=0;X<i;X++)Y=B*S.get(X,R)+q*S.get(X,k-1),S.set(X,k-1,-q*S.get(X,R)+B*S.get(X,k-1)),S.set(X,R,Y)}break}case 2:{let b=d[w-1];d[w-1]=0;for(let R=w;R<k;R++){let Y=Lt(m[R],b),B=m[R]/Y,q=b/Y;if(m[R]=Y,b=-q*d[R],d[R]=B*d[R],l)for(let X=0;X<r;X++)Y=B*y.get(X,R)+q*y.get(X,w-1),y.set(X,w-1,-q*y.get(X,R)+B*y.get(X,w-1)),y.set(X,R,Y)}break}case 3:{const b=Math.max(Math.abs(m[k-1]),Math.abs(m[k-2]),Math.abs(d[k-2]),Math.abs(m[w]),Math.abs(d[w])),R=m[k-1]/b,Y=m[k-2]/b,B=d[k-2]/b,q=m[w]/b,X=d[w]/b,D=((Y+R)*(Y-R)+B*B)/2,G=R*B*(R*B);let I=0;(D!==0||G!==0)&&(D<0?I=0-Math.sqrt(D*D+G):I=Math.sqrt(D*D+G),I=G/(D+I));let K=(q+R)*(q-R)+I,ee=q*X;for(let $=w;$<k-1;$++){let ie=Lt(K,ee);ie===0&&(ie=Number.MIN_VALUE);let pe=K/ie,ge=ee/ie;if($!==w&&(d[$-1]=ie),K=pe*m[$]+ge*d[$],d[$]=pe*d[$]-ge*m[$],ee=ge*m[$+1],m[$+1]=pe*m[$+1],u)for(let le=0;le<i;le++)ie=pe*S.get(le,$)+ge*S.get(le,$+1),S.set(le,$+1,-ge*S.get(le,$)+pe*S.get(le,$+1)),S.set(le,$,ie);if(ie=Lt(K,ee),ie===0&&(ie=Number.MIN_VALUE),pe=K/ie,ge=ee/ie,m[$]=ie,K=pe*d[$]+ge*m[$+1],m[$+1]=-ge*d[$]+pe*m[$+1],ee=ge*d[$+1],d[$+1]=pe*d[$+1],l&&$<r-1)for(let le=0;le<r;le++)ie=pe*y.get(le,$)+ge*y.get(le,$+1),y.set(le,$+1,-ge*y.get(le,$)+pe*y.get(le,$+1)),y.set(le,$,ie)}d[k-2]=K;break}case 4:{if(m[w]<=0&&(m[w]=m[w]<0?-m[w]:0,u))for(let b=0;b<=x;b++)S.set(b,w,-S.get(b,w));for(;w<x&&!(m[w]>=m[w+1]);){let b=m[w];if(m[w]=m[w+1],m[w+1]=b,u&&w<i-1)for(let R=0;R<i;R++)b=S.get(R,w+1),S.set(R,w+1,S.get(R,w)),S.set(R,w,b);if(l&&w<r-1)for(let R=0;R<r;R++)b=y.get(R,w+1),y.set(R,w+1,y.get(R,w)),y.set(R,w,b);w++}k--;break}}}if(h){let w=S;S=y,y=w}this.m=r,this.n=i,this.s=m,this.U=y,this.V=S}solve(e){let n=e,r=this.threshold,i=this.s.length,o=A.zeros(i,i);for(let f=0;f<i;f++)Math.abs(this.s[f])<=r?o.set(f,f,0):o.set(f,f,1/this.s[f]);let s=this.U,a=this.rightSingularVectors,l=a.mmul(o),u=a.rows,h=s.rows,c=A.zeros(u,h);for(let f=0;f<u;f++)for(let g=0;g<h;g++){let m=0;for(let y=0;y<i;y++)m+=l.get(f,y)*s.get(g,y);c.set(f,g,m)}return c.mmul(n)}solveForDiagonal(e){return this.solve(A.diag(e))}inverse(){let e=this.V,n=this.threshold,r=e.rows,i=e.columns,o=new A(r,this.s.length);for(let h=0;h<r;h++)for(let c=0;c<i;c++)Math.abs(this.s[c])>n&&o.set(h,c,e.get(h,c)/this.s[c]);let s=this.U,a=s.rows,l=s.columns,u=new A(r,a);for(let h=0;h<r;h++)for(let c=0;c<a;c++){let f=0;for(let g=0;g<l;g++)f+=o.get(h,g)*s.get(c,g);u.set(h,c,f)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,n=0,r=this.s;for(let i=0,o=r.length;i<o;i++)r[i]>e&&n++;return n}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return A.diag(this.s)}}function gw(t,e=!1){return t=qe.checkMatrix(t),e?new fr(t).inverse():qd(t,A.eye(t.rows))}function qd(t,e,n=!1){return t=qe.checkMatrix(t),e=qe.checkMatrix(e),n?new fr(t).solve(e):t.isSquare()?new Zo(t).solve(e):new Bl(t).solve(e)}function no(t){if(t=A.checkMatrix(t),t.isSquare()){if(t.columns===0)return 1;let e,n,r,i;if(t.columns===2)return e=t.get(0,0),n=t.get(0,1),r=t.get(1,0),i=t.get(1,1),e*i-n*r;if(t.columns===3){let o,s,a;return o=new to(t,[1,2],[1,2]),s=new to(t,[1,2],[0,2]),a=new to(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),r=t.get(0,2),e*no(o)-n*no(s)+r*no(a)}else return new Zo(t).determinant}else throw Error("determinant can only be calculated for a square matrix")}function mw(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function vw(t,e,n,r=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let o=e.addRow(n,[0]);for(let s=0;s<o.rows;s++)Math.abs(o.get(s,0))<r&&o.set(s,0,0);return o.to1DArray()}}function yw(t,e={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;t=A.checkMatrix(t);let i=t.rows,o=new A(i,i);for(let s=0;s<i;s++){let a=A.columnVector(t.getRow(s)),l=t.subMatrixRow(mw(i,s)).transpose(),h=new fr(l).solve(a),c=A.sub(a,l.mmul(h)).abs().max();o.setRow(s,vw(c,h,s,n,r))}return o}function ww(t,e=Number.EPSILON){if(t=A.checkMatrix(t),t.isEmpty())return t.transpose();let n=new fr(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal;for(let s=0;s<o.length;s++)Math.abs(o[s])>e?o[s]=1/o[s]:o[s]=0;return i.mmul(A.diag(o).mmul(r.transpose()))}function Ew(t,e=t,n={}){t=new A(t);let r=!1;if(typeof e=="object"&&!A.isMatrix(e)&&!Oe.isAnyArray(e)?(n=e,e=t,r=!0):e=new A(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=n;i&&(t=t.center("column"),r||(e=e.center("column")));const o=t.transpose().mmul(e);for(let s=0;s<o.rows;s++)for(let a=0;a<o.columns;a++)o.set(s,a,o.get(s,a)*(1/(t.rows-1)));return o}function Sw(t,e=t,n={}){t=new A(t);let r=!1;if(typeof e=="object"&&!A.isMatrix(e)&&!Oe.isAnyArray(e)?(n=e,e=t,r=!0):e=new A(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:o=!0}=n;i&&(t.center("column"),r||e.center("column")),o&&(t.scale("column"),r||e.scale("column"));const s=t.standardDeviation("column",{unbiased:!0}),a=r?s:e.standardDeviation("column",{unbiased:!0}),l=t.transpose().mmul(e);for(let u=0;u<l.rows;u++)for(let h=0;h<l.columns;h++)l.set(u,h,l.get(u,h)*(1/(s[u]*a[h]))*(1/(t.rows-1)));return l}class Qd{constructor(e,n={}){const{assumeSymmetric:r=!1}=n;if(e=qe.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let i=e.columns,o=new A(i,i),s=new Float64Array(i),a=new Float64Array(i),l=e,u,h,c=!1;if(r?c=!0:c=e.isSymmetric(),c){for(u=0;u<i;u++)for(h=0;h<i;h++)o.set(u,h,l.get(u,h));kw(i,a,s,o),_w(i,a,s,o)}else{let f=new A(i,i),g=new Float64Array(i);for(h=0;h<i;h++)for(u=0;u<i;u++)f.set(u,h,l.get(u,h));Cw(i,f,g,o),xw(i,a,s,o,f)}this.n=i,this.e=a,this.d=s,this.V=o}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,n=this.e,r=this.d,i=new A(e,e),o,s;for(o=0;o<e;o++){for(s=0;s<e;s++)i.set(o,s,0);i.set(o,o,r[o]),n[o]>0?i.set(o,o+1,n[o]):n[o]<0&&i.set(o,o-1,n[o])}return i}}function kw(t,e,n,r){let i,o,s,a,l,u,h,c;for(l=0;l<t;l++)n[l]=r.get(t-1,l);for(a=t-1;a>0;a--){for(c=0,s=0,u=0;u<a;u++)c=c+Math.abs(n[u]);if(c===0)for(e[a]=n[a-1],l=0;l<a;l++)n[l]=r.get(a-1,l),r.set(a,l,0),r.set(l,a,0);else{for(u=0;u<a;u++)n[u]/=c,s+=n[u]*n[u];for(i=n[a-1],o=Math.sqrt(s),i>0&&(o=-o),e[a]=c*o,s=s-i*o,n[a-1]=i-o,l=0;l<a;l++)e[l]=0;for(l=0;l<a;l++){for(i=n[l],r.set(l,a,i),o=e[l]+r.get(l,l)*i,u=l+1;u<=a-1;u++)o+=r.get(u,l)*n[u],e[u]+=r.get(u,l)*i;e[l]=o}for(i=0,l=0;l<a;l++)e[l]/=s,i+=e[l]*n[l];for(h=i/(s+s),l=0;l<a;l++)e[l]-=h*n[l];for(l=0;l<a;l++){for(i=n[l],o=e[l],u=l;u<=a-1;u++)r.set(u,l,r.get(u,l)-(i*e[u]+o*n[u]));n[l]=r.get(a-1,l),r.set(a,l,0)}}n[a]=s}for(a=0;a<t-1;a++){if(r.set(t-1,a,r.get(a,a)),r.set(a,a,1),s=n[a+1],s!==0){for(u=0;u<=a;u++)n[u]=r.get(u,a+1)/s;for(l=0;l<=a;l++){for(o=0,u=0;u<=a;u++)o+=r.get(u,a+1)*r.get(u,l);for(u=0;u<=a;u++)r.set(u,l,r.get(u,l)-o*n[u])}}for(u=0;u<=a;u++)r.set(u,a+1,0)}for(l=0;l<t;l++)n[l]=r.get(t-1,l),r.set(t-1,l,0);r.set(t-1,t-1,1),e[0]=0}function _w(t,e,n,r){let i,o,s,a,l,u,h,c,f,g,m,y,S,d,p,v;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;let E=0,_=0,T=Number.EPSILON;for(u=0;u<t;u++){for(_=Math.max(_,Math.abs(n[u])+Math.abs(e[u])),h=u;h<t&&!(Math.abs(e[h])<=T*_);)h++;if(h>u)do{for(i=n[u],c=(n[u+1]-i)/(2*e[u]),f=Lt(c,1),c<0&&(f=-f),n[u]=e[u]/(c+f),n[u+1]=e[u]*(c+f),g=n[u+1],o=i-n[u],s=u+2;s<t;s++)n[s]-=o;for(E=E+o,c=n[h],m=1,y=m,S=m,d=e[u+1],p=0,v=0,s=h-1;s>=u;s--)for(S=y,y=m,v=p,i=m*e[s],o=m*c,f=Lt(c,e[s]),e[s+1]=p*f,p=e[s]/f,m=c/f,c=m*n[s]-p*i,n[s+1]=o+p*(m*i+p*n[s]),l=0;l<t;l++)o=r.get(l,s+1),r.set(l,s+1,p*r.get(l,s)+m*o),r.set(l,s,m*r.get(l,s)-p*o);c=-p*v*S*d*e[u]/g,e[u]=p*c,n[u]=m*c}while(Math.abs(e[u])>T*_);n[u]=n[u]+E,e[u]=0}for(s=0;s<t-1;s++){for(l=s,c=n[s],a=s+1;a<t;a++)n[a]<c&&(l=a,c=n[a]);if(l!==s)for(n[l]=n[s],n[s]=c,a=0;a<t;a++)c=r.get(a,s),r.set(a,s,r.get(a,l)),r.set(a,l,c)}}function Cw(t,e,n,r){let i=0,o=t-1,s,a,l,u,h,c,f;for(c=i+1;c<=o-1;c++){for(f=0,u=c;u<=o;u++)f=f+Math.abs(e.get(u,c-1));if(f!==0){for(l=0,u=o;u>=c;u--)n[u]=e.get(u,c-1)/f,l+=n[u]*n[u];for(a=Math.sqrt(l),n[c]>0&&(a=-a),l=l-n[c]*a,n[c]=n[c]-a,h=c;h<t;h++){for(s=0,u=o;u>=c;u--)s+=n[u]*e.get(u,h);for(s=s/l,u=c;u<=o;u++)e.set(u,h,e.get(u,h)-s*n[u])}for(u=0;u<=o;u++){for(s=0,h=o;h>=c;h--)s+=n[h]*e.get(u,h);for(s=s/l,h=c;h<=o;h++)e.set(u,h,e.get(u,h)-s*n[h])}n[c]=f*n[c],e.set(c,c-1,f*a)}}for(u=0;u<t;u++)for(h=0;h<t;h++)r.set(u,h,u===h?1:0);for(c=o-1;c>=i+1;c--)if(e.get(c,c-1)!==0){for(u=c+1;u<=o;u++)n[u]=e.get(u,c-1);for(h=c;h<=o;h++){for(a=0,u=c;u<=o;u++)a+=n[u]*r.get(u,h);for(a=a/n[c]/e.get(c,c-1),u=c;u<=o;u++)r.set(u,h,r.get(u,h)+a*n[u])}}}function xw(t,e,n,r,i){let o=t-1,s=0,a=t-1,l=Number.EPSILON,u=0,h=0,c=0,f=0,g=0,m=0,y=0,S=0,d,p,v,E,_,T,k,x,O,w,C,b,R,Y,B;for(d=0;d<t;d++)for((d<s||d>a)&&(n[d]=i.get(d,d),e[d]=0),p=Math.max(d-1,0);p<t;p++)h=h+Math.abs(i.get(d,p));for(;o>=s;){for(E=o;E>s&&(m=Math.abs(i.get(E-1,E-1))+Math.abs(i.get(E,E)),m===0&&(m=h),!(Math.abs(i.get(E,E-1))<l*m));)E--;if(E===o)i.set(o,o,i.get(o,o)+u),n[o]=i.get(o,o),e[o]=0,o--,S=0;else if(E===o-1){if(k=i.get(o,o-1)*i.get(o-1,o),c=(i.get(o-1,o-1)-i.get(o,o))/2,f=c*c+k,y=Math.sqrt(Math.abs(f)),i.set(o,o,i.get(o,o)+u),i.set(o-1,o-1,i.get(o-1,o-1)+u),x=i.get(o,o),f>=0){for(y=c>=0?c+y:c-y,n[o-1]=x+y,n[o]=n[o-1],y!==0&&(n[o]=x-k/y),e[o-1]=0,e[o]=0,x=i.get(o,o-1),m=Math.abs(x)+Math.abs(y),c=x/m,f=y/m,g=Math.sqrt(c*c+f*f),c=c/g,f=f/g,p=o-1;p<t;p++)y=i.get(o-1,p),i.set(o-1,p,f*y+c*i.get(o,p)),i.set(o,p,f*i.get(o,p)-c*y);for(d=0;d<=o;d++)y=i.get(d,o-1),i.set(d,o-1,f*y+c*i.get(d,o)),i.set(d,o,f*i.get(d,o)-c*y);for(d=s;d<=a;d++)y=r.get(d,o-1),r.set(d,o-1,f*y+c*r.get(d,o)),r.set(d,o,f*r.get(d,o)-c*y)}else n[o-1]=x+c,n[o]=x+c,e[o-1]=y,e[o]=-y;o=o-2,S=0}else{if(x=i.get(o,o),O=0,k=0,E<o&&(O=i.get(o-1,o-1),k=i.get(o,o-1)*i.get(o-1,o)),S===10){for(u+=x,d=s;d<=o;d++)i.set(d,d,i.get(d,d)-x);m=Math.abs(i.get(o,o-1))+Math.abs(i.get(o-1,o-2)),x=O=.75*m,k=-.4375*m*m}if(S===30&&(m=(O-x)/2,m=m*m+k,m>0)){for(m=Math.sqrt(m),O<x&&(m=-m),m=x-k/((O-x)/2+m),d=s;d<=o;d++)i.set(d,d,i.get(d,d)-m);u+=m,x=O=k=.964}for(S=S+1,_=o-2;_>=E&&(y=i.get(_,_),g=x-y,m=O-y,c=(g*m-k)/i.get(_+1,_)+i.get(_,_+1),f=i.get(_+1,_+1)-y-g-m,g=i.get(_+2,_+1),m=Math.abs(c)+Math.abs(f)+Math.abs(g),c=c/m,f=f/m,g=g/m,!(_===E||Math.abs(i.get(_,_-1))*(Math.abs(f)+Math.abs(g))<l*(Math.abs(c)*(Math.abs(i.get(_-1,_-1))+Math.abs(y)+Math.abs(i.get(_+1,_+1))))));)_--;for(d=_+2;d<=o;d++)i.set(d,d-2,0),d>_+2&&i.set(d,d-3,0);for(v=_;v<=o-1&&(Y=v!==o-1,v!==_&&(c=i.get(v,v-1),f=i.get(v+1,v-1),g=Y?i.get(v+2,v-1):0,x=Math.abs(c)+Math.abs(f)+Math.abs(g),x!==0&&(c=c/x,f=f/x,g=g/x)),x!==0);v++)if(m=Math.sqrt(c*c+f*f+g*g),c<0&&(m=-m),m!==0){for(v!==_?i.set(v,v-1,-m*x):E!==_&&i.set(v,v-1,-i.get(v,v-1)),c=c+m,x=c/m,O=f/m,y=g/m,f=f/c,g=g/c,p=v;p<t;p++)c=i.get(v,p)+f*i.get(v+1,p),Y&&(c=c+g*i.get(v+2,p),i.set(v+2,p,i.get(v+2,p)-c*y)),i.set(v,p,i.get(v,p)-c*x),i.set(v+1,p,i.get(v+1,p)-c*O);for(d=0;d<=Math.min(o,v+3);d++)c=x*i.get(d,v)+O*i.get(d,v+1),Y&&(c=c+y*i.get(d,v+2),i.set(d,v+2,i.get(d,v+2)-c*g)),i.set(d,v,i.get(d,v)-c),i.set(d,v+1,i.get(d,v+1)-c*f);for(d=s;d<=a;d++)c=x*r.get(d,v)+O*r.get(d,v+1),Y&&(c=c+y*r.get(d,v+2),r.set(d,v+2,r.get(d,v+2)-c*g)),r.set(d,v,r.get(d,v)-c),r.set(d,v+1,r.get(d,v+1)-c*f)}}}if(h!==0){for(o=t-1;o>=0;o--)if(c=n[o],f=e[o],f===0)for(E=o,i.set(o,o,1),d=o-1;d>=0;d--){for(k=i.get(d,d)-c,g=0,p=E;p<=o;p++)g=g+i.get(d,p)*i.get(p,o);if(e[d]<0)y=k,m=g;else if(E=d,e[d]===0?i.set(d,o,k!==0?-g/k:-g/(l*h)):(x=i.get(d,d+1),O=i.get(d+1,d),f=(n[d]-c)*(n[d]-c)+e[d]*e[d],T=(x*m-y*g)/f,i.set(d,o,T),i.set(d+1,o,Math.abs(x)>Math.abs(y)?(-g-k*T)/x:(-m-O*T)/y)),T=Math.abs(i.get(d,o)),l*T*T>1)for(p=d;p<=o;p++)i.set(p,o,i.get(p,o)/T)}else if(f<0)for(E=o-1,Math.abs(i.get(o,o-1))>Math.abs(i.get(o-1,o))?(i.set(o-1,o-1,f/i.get(o,o-1)),i.set(o-1,o,-(i.get(o,o)-c)/i.get(o,o-1))):(B=Oi(0,-i.get(o-1,o),i.get(o-1,o-1)-c,f),i.set(o-1,o-1,B[0]),i.set(o-1,o,B[1])),i.set(o,o-1,0),i.set(o,o,1),d=o-2;d>=0;d--){for(w=0,C=0,p=E;p<=o;p++)w=w+i.get(d,p)*i.get(p,o-1),C=C+i.get(d,p)*i.get(p,o);if(k=i.get(d,d)-c,e[d]<0)y=k,g=w,m=C;else if(E=d,e[d]===0?(B=Oi(-w,-C,k,f),i.set(d,o-1,B[0]),i.set(d,o,B[1])):(x=i.get(d,d+1),O=i.get(d+1,d),b=(n[d]-c)*(n[d]-c)+e[d]*e[d]-f*f,R=(n[d]-c)*2*f,b===0&&R===0&&(b=l*h*(Math.abs(k)+Math.abs(f)+Math.abs(x)+Math.abs(O)+Math.abs(y))),B=Oi(x*g-y*w+f*C,x*m-y*C-f*w,b,R),i.set(d,o-1,B[0]),i.set(d,o,B[1]),Math.abs(x)>Math.abs(y)+Math.abs(f)?(i.set(d+1,o-1,(-w-k*i.get(d,o-1)+f*i.get(d,o))/x),i.set(d+1,o,(-C-k*i.get(d,o)-f*i.get(d,o-1))/x)):(B=Oi(-g-O*i.get(d,o-1),-m-O*i.get(d,o),y,f),i.set(d+1,o-1,B[0]),i.set(d+1,o,B[1]))),T=Math.max(Math.abs(i.get(d,o-1)),Math.abs(i.get(d,o))),l*T*T>1)for(p=d;p<=o;p++)i.set(p,o-1,i.get(p,o-1)/T),i.set(p,o,i.get(p,o)/T)}for(d=0;d<t;d++)if(d<s||d>a)for(p=d;p<t;p++)r.set(d,p,i.get(d,p));for(p=t-1;p>=s;p--)for(d=s;d<=a;d++){for(y=0,v=s;v<=Math.min(p,a);v++)y=y+r.get(d,v)*i.get(v,p);r.set(d,p,y)}}}function Oi(t,e,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(t+i*e)/o,(e-i*t)/o]):(i=n/r,o=r+i*n,[(i*t+e)/o,(i*e-t)/o])}class Hd{constructor(e){if(e=qe.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let n=e,r=n.rows,i=new A(r,r),o=!0,s,a,l;for(a=0;a<r;a++){let u=0;for(l=0;l<a;l++){let h=0;for(s=0;s<l;s++)h+=i.get(l,s)*i.get(a,s);h=(n.get(a,l)-h)/i.get(l,l),i.set(a,l,h),u=u+h*h}for(u=n.get(a,a)-u,o&&(o=u>0),i.set(a,a,Math.sqrt(Math.max(u,0))),l=a+1;l<r;l++)i.set(a,l,0)}this.L=i,this.positiveDefinite=o}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=qe.checkMatrix(e);let n=this.L,r=n.rows;if(e.rows!==r)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i=e.columns,o=e.clone(),s,a,l;for(l=0;l<r;l++)for(a=0;a<i;a++){for(s=0;s<l;s++)o.set(l,a,o.get(l,a)-o.get(s,a)*n.get(l,s));o.set(l,a,o.get(l,a)/n.get(l,l))}for(l=r-1;l>=0;l--)for(a=0;a<i;a++){for(s=l+1;s<r;s++)o.set(l,a,o.get(l,a)-o.get(s,a)*n.get(s,l));o.set(l,a,o.get(l,a)/n.get(l,l))}return o}get lowerTriangularMatrix(){return this.L}}class Xd{constructor(e,n={}){e=qe.checkMatrix(e);let{Y:r}=n;const{scaleScores:i=!1,maxIterations:o=1e3,terminationCriteria:s=1e-10}=n;let a;if(r){if(Oe.isAnyArray(r)&&typeof r[0]=="number"?r=A.columnVector(r):r=qe.checkMatrix(r),r.rows!==e.rows)throw new Error("Y should have the same number of rows as X");a=r.getColumnVector(0)}else a=e.getColumnVector(0);let l=1,u,h,c,f;for(let g=0;g<o&&l>s;g++)c=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),c=c.div(c.norm()),u=e.mmul(c).div(c.transpose().mmul(c).get(0,0)),g>0&&(l=u.clone().sub(f).pow(2).sum()),f=u.clone(),r?(h=r.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),h=h.div(h.norm()),a=r.mmul(h).div(h.transpose().mmul(h).get(0,0))):a=u;if(r){let g=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));g=g.div(g.norm());let m=e.clone().sub(u.clone().mmul(g.transpose())),y=a.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),S=r.clone().sub(u.clone().mulS(y.get(0,0)).mmul(h.transpose()));this.t=u,this.p=g.transpose(),this.w=c.transpose(),this.q=h,this.u=a,this.s=u.transpose().mmul(u),this.xResidual=m,this.yResidual=S,this.betas=y}else this.w=c.transpose(),this.s=u.transpose().mmul(u).sqrt(),i?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(c.transpose()))}}H.AbstractMatrix=W;H.CHO=Hd;H.CholeskyDecomposition=Hd;H.DistanceMatrix=Xo;H.EVD=Qd;H.EigenvalueDecomposition=Qd;H.LU=Zo;H.LuDecomposition=Zo;var Zd=H.Matrix=A;H.MatrixColumnSelectionView=aw;H.MatrixColumnView=sw;H.MatrixFlipColumnView=lw;H.MatrixFlipRowView=uw;H.MatrixRowSelectionView=hw;H.MatrixRowView=cw;H.MatrixSelectionView=to;H.MatrixSubView=fw;H.MatrixTransposeView=dw;H.NIPALS=Xd;H.Nipals=Xd;H.QR=Bl;H.QrDecomposition=Bl;H.SVD=fr;H.SingularValueDecomposition=fr;H.SymmetricMatrix=wn;H.WrapperMatrix1D=Kd;H.WrapperMatrix2D=qe;H.correlation=Sw;H.covariance=Ew;var Mc=H.default=A;H.determinant=no;H.inverse=gw;H.linearDependencies=yw;var Tw=H.pseudoInverse=ww;H.solve=qd;H.wrap=pw;const Rw=Zd;Mc.Matrix&&Mc.Matrix;const Nw=Tw;class bw{constructor(){this.energies=[],this.total=0}newEnergy(e,n){this.total+=e,this.addEnergy(e,n)}addEnergy(e,n){for(;n+1>this.energies.length;)this.energies.push(0);this.energies[n]=e}setEnergy(e,n){this.energies=[...n],this.total=e}multEnergies(e){return this.energies.map(n=>e*n)}getNodeEnergies(){return this.energies.map(e=>Math.abs(e))}getNumberOfSteps(){return this.energies.length}}class Pc{constructor(e,n=.9,r=.2){this.reservoirSize=parseInt(e),this.W_res=this.randomMatrix(e,e,n),this.W_in=this.randomMatrix(e,1,.01),this.energy_percentages=this.applyConnectionPercentage(this.W_res,r),this.applyConnectionPercentage(this.W_in,.01),this.W_out=null}getReservoirSize(){return this.reservoirSize}getReservoirConnections(){return this.W_res}randomMatrix(e,n,r){return Array.from({length:e},()=>Array.from({length:n},()=>Math.random()-.5)).map(o=>o.map(s=>Math.random()>r?s:0))}applyConnectionPercentage(e,n){for(let r of e)for(let i=0;i<r.length;i++)Math.random()>n&&(r[i]=0)}async train(e,n){const r=this.runReservoir(e);var i=new Rw(r),o=Nw(i);this.W_out=this.matMult(o.data,n)}predict(e,n,r){const i=this.runReservoir(e);n(i);let o=this.nodeEnergies.reduce((s,a)=>(console.log(a.getNodeEnergies()),this.addVectors(s,a.getNodeEnergies())),Array.from({length:e.length},()=>0));return r(o),this.matMult(i,this.W_out)}runReservoir(e){const n=Array.from({length:e.length},()=>Array(parseInt(this.reservoirSize)).fill(0));this.nodeEnergies=Array.from({length:this.reservoirSize},()=>new bw);for(let r=1;r<e.length;r++){n[r]=this.activationFunction(this.addVectors(this.multiplyMatrixVector(this.W_res,n[r-1],!1,r),this.multiplyMatrixVector(this.W_in,e[r],!0,r)));let i=this.nodeEnergies.reduce((o,s)=>this.addVectors(o,s.getNodeEnergies()),Array.from({length:r},()=>0));console.log(i)}return n}setActivationFunction(e){console.log(e),e=="Relu"?this.activationFunction=n=>this.relu(n):e=="Tanh"&&(this.activationFunction=n=>this.tanh(n))}tanh(e){return e.map(n=>Math.tanh(n))}relu(e){return console.log("=============="),console.log(e),console.log(e.map(n=>Math.max(0,n))),e.map(n=>Math.max(0,n))}addVectors(e,n){return e.map((r,i)=>r+n[i])}multiplyMatrixVector(e,n,r,i){const o=[],s=e.map(a=>{let l=r?null:Array.from({length:i},()=>0);const u=a.reduce((h,c,f)=>(r||(l=this.addVectors(this.nodeEnergies[f].multEnergies(c),l)),h+c*n[f]),0);return r||o.push(l),u});r||console.log("new energy added at step "+i+": "+s.reduce((a,l)=>a+Math.abs(l)),()=>0);for(let a=0;a<s.length;a++)r?this.nodeEnergies[a].newEnergy(s[a],i):this.nodeEnergies[a].setEnergy(s[a],o[a]);return console.log("Sample: from result "+s[s.length-1]+" from energies "+this.nodeEnergies),s}multiplyMatrices(e,n){return e.map(r=>r.map((i,o)=>r.reduce((s,a,l)=>s+a*n[l][o],0)))}matMult(e,n){return e.map((r,i)=>n[0].map((o,s)=>r.reduce((a,l,u)=>a+l*n[u][s],0)))}pseudoInverse(e){const{U:n,S:r,V:i}=svd(e),o=create(r.length,r.length,0);for(let s=0;s<r.length;s++)r[s]!==0&&(o[s][s]=1/r[s]);return multiply(multiply(i,o),transpose(n))}}const Lw=(t,e,n,r,i,o,s,a)=>{t.setActivationFunction(o);const l=Array.from({length:i},(m,y)=>y*.1),u=l.map(()=>.1*Math.random()),h={Sin:m=>Math.sin(m),Cos:m=>Math.cos(m),Tan:m=>Math.tan(m)};console.log(r),console.log(typeof h[r]);const c=l.map(m=>h[r](m)),f=u.map(m=>[m]),g=c.map(m=>[m]);t.train(f,g).then(()=>{const m=u.map(S=>[S]);console.log(m);const y=t.predict(m,s,a);e(g),n(y)})},Dw=(t,e,n,r,i,o)=>{t.setActivationFunction(r);const l=Array.from({length:n},(h,c)=>c*.1).map(()=>.1*Math.random()).map(h=>[h]);console.log(l);const u=t.predict(l,i,o);console.log(u),e(u)};function Ia(){return Ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ia.apply(null,arguments)}var ji=255,Ac=100,Mw=t=>{var{r:e,g:n,b:r}=t,i=e<<16|n<<8|r;return"#"+(o=>new Array(7-o.length).join("0")+o)(i.toString(16))},Pw=t=>{var{h:e,s:n,v:r,a:i}=t,o=e/60,s=n/Ac,a=r/Ac,l=Math.floor(o)%6,u=o-Math.floor(o),h=ji*a*(1-s),c=ji*a*(1-s*u),f=ji*a*(1-s*(1-u));a*=ji;var g={};switch(l){case 0:g.r=a,g.g=f,g.b=h;break;case 1:g.r=c,g.g=a,g.b=h;break;case 2:g.r=h,g.g=a,g.b=f;break;case 3:g.r=h,g.g=c,g.b=a;break;case 4:g.r=f,g.g=h,g.b=a;break;case 5:g.r=a,g.g=h,g.b=c;break}return g.r=Math.round(g.r),g.g=Math.round(g.g),g.b=Math.round(g.b),Ia({},g,{a:i})},Fc=t=>Mw(Pw(t));const Rr=({stateValue:t,setStateValue:e,text:n})=>V.jsxs("div",{children:[V.jsx("label",{children:n}),V.jsx("input",{type:"number",value:t,onChange:r=>e(parseFloat(r.target.value))})]}),Aw=({esn:t,setTargetData:e,setPredictionsData:n,targetFunction:r,length:i,activationFunction:o,setNetworkStates:s,setNetworkStepEnergies:a})=>V.jsx("button",{onClick:()=>Lw(t,e,n,r,i,o,s,a),children:"Run"}),Fw=({esn:t,setPredictionsData:e,length:n,activationFunction:r,setNetworkStates:i,setNetworkStepEnergies:o})=>V.jsx("button",{onClick:()=>Dw(t,e,n,r,i,o),children:"Impulse"}),Ic=({text:t,options:e,selectedOption:n,setSelectedOption:r})=>V.jsxs("label",{children:[t,V.jsx("select",{value:n,onChange:i=>r(i.target.value),children:e.map(i=>V.jsx("option",{value:i,children:i},i))})]}),Iw=t=>{if(t>=0){let n=Math.min(Math.ceil(100*Math.min(t,1))*1.5,100);return Fc({h:110,s:100,v:n,a:1})}else{let n=Math.min(Math.ceil(100*Math.min(-1*t,1))*1.5,100);return Fc({h:0,s:100,v:n,a:1})}},zw=t=>{t(e=>e+1)},Gw=t=>{t(0)},Ow=async(t,e,n,r,i,o)=>{console.log(o);let s=parseInt(i);const a=20,l=8;Gw(r),e.forEach((u,h)=>{setTimeout(()=>{console.log(u),u.forEach((c,f)=>{const g=f/o*2*Math.PI;t.updateNode(f,m=>({...m,label:c,color:Iw(c),x:Math.cos(g)*(a+c*l),y:Math.sin(g)*(a+c*l)}))}),n(t),zw(r)},h*s)})},jw=({esn:t,numHidden:e,setNumHidden:n,spectralRad:r,setSpectralRad:i,connectionChance:o,setConnectionChance:s,setTargetData:a,setPredictionsData:l,setActivationFunction:u,activationFunction:h,activationFunctions:c,setTargetFunction:f,targetFunctions:g,targetFunction:m,length:y,setLength:S,setNetworkStates:d,animationSpeed:p,setAnimationSpeed:v,setNetworkStepEnergies:E,graph:_,setAnimationFrame:T,setGraph:k,networkStates:x})=>V.jsxs("div",{children:[V.jsx("h1",{children:"Configure Reservoir"}),V.jsx(Rr,{text:"Number of hidden units:",stateValue:e,setStateValue:n}),V.jsx(Rr,{text:"Spectral radius:",stateValue:r,setStateValue:i}),V.jsx(Rr,{text:"Connection chance:",stateValue:o,setStateValue:s}),V.jsx(Rr,{text:"Length:",stateValue:y,setStateValue:S}),V.jsx(Ic,{text:"Activation function",options:c,selectedOption:h,setSelectedOption:u}),V.jsx(Ic,{text:"Target function",options:g,selectedOption:m,setSelectedOption:f}),V.jsx(Rr,{text:"Animation speed:",stateValue:p,setStateValue:v}),V.jsx(Aw,{esn:t,setTargetData:a,setPredictionsData:l,targetFunction:m,length:y,activationFunction:h,setNetworkStates:d,setNetworkStepEnergies:E}),V.jsx(Fw,{esn:t,setPredictionsData:l,length:y,setNetworkStates:d,activationFunction:h,setNetworkStepEnergies:E}),V.jsx("button",{onClick:()=>Ow(_,x,k,T,p,t.getReservoirSize()),children:"Animate"})]}),$w=({time:t,targetData:e,predictions:n,length:r,animationFrame:i})=>{const a=h=>Math.floor(h/(parseInt(r)/10)*800),l=h=>400-(h+1)/2*400;console.log(i);let u=Math.floor(i/r*800);return console.log("offset: "+u),V.jsxs("div",{style:{position:"relative"},children:[V.jsx("div",{style:{width:"3px",height:400,backgroundColor:"black",position:"absolute",left:u,top:0}}),V.jsxs("svg",{width:800,height:400,children:[e.map((h,c)=>V.jsx("circle",{cx:a(t[c]),cy:l(h[0]),r:3,fill:"blue"},`true-${c}`)),n.map((h,c)=>V.jsx("circle",{cx:a(t[c]),cy:l(h[0]),r:3,fill:"red"},`pred-${c}`)),V.jsx("text",{x:800/2,y:20,textAnchor:"middle",children:"ESN Prediction (red) vs Real (blue)"})]})]})},Uw=({time:t,targetData:e,length:n})=>{const o=Math.min(...e),s=Math.max(...e),a=u=>Math.floor(u/(parseInt(n)/10)*800),l=u=>400-(u-o)/(s-o)*400;return console.log(e),V.jsx("div",{style:{position:"relative"},children:V.jsxs("svg",{width:800,height:400,children:[e.map((u,h)=>V.jsx("circle",{cx:a(t[h]),cy:l(u),r:3,fill:"blue"},`true-${h}`)),V.jsx("text",{x:800/2,y:20,textAnchor:"middle",children:"Energy from previous states in reservoir at final output"})]})})},Bw=({colour:t,esn:e,setGraph:n,triggerAnimation:r,graph:i})=>{const o=R0(),s=0,a=0,l=20;return Z.useEffect(()=>{console.log("old update");const u=new ne,h=e.getReservoirSize();for(let f=0;f<h;f++){const g=f/h*2*Math.PI;u.addNode(f,{label:f,size:8,color:t,x:s+l*Math.cos(g),y:a+l*Math.sin(g)})}let c=e.getReservoirConnections();for(let f=0;f<h;f++)for(let g=f+1;g<h;g++)c[f][g]!=0&&u.addDirectedEdge(f,g);n(u),o(u)},[o,t,e]),Z.useEffect(()=>{console.log("reloaded graph"),o(i)},[r,i]),null},Ww=({esn:t,style:e,colour:n,setGraph:r,triggerAnimation:i,setLoadGraph:o,graph:s})=>V.jsx(N0,{style:e,settings:{allowInvalidContainer:!0},children:V.jsx(Bw,{colour:n,esn:t,setGraph:r,setLoadGraph:o,triggerAnimation:i,graph:s})}),Vw={height:"500px",width:"500px",backgroundColor:"white",border:"2px solid black"};function Yw(){const[t,e]=Z.useState([]),[n,r]=Z.useState([]),[i,o]=Z.useState("green"),[s,a]=Z.useState(80),[l,u]=Z.useState(.2),[h,c]=Z.useState(.2),[f,g]=Z.useState(new Pc(s,l,h)),[m,y]=Z.useState("Tanh"),S=["Tanh","Relu"],d=["Sin","Cos","Tan"],[p,v]=Z.useState("Sin"),[E,_]=Z.useState(100),[T,k]=Z.useState([[]]),[x,O]=Z.useState(),[w,C]=Z.useState(0),[b,R]=Z.useState(100),[Y,B]=Z.useState([]),q=Array.from({length:E},(X,D)=>D*.1);return Z.useEffect(()=>{g(new Pc(s,l,h))},[s,l,h]),V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"split",children:[V.jsx("div",{children:V.jsx(Ww,{style:Vw,colour:i,esn:f,numHidden:s,setGraph:O,graph:x,networkStates:T,triggerAnimation:w})}),V.jsx(jw,{esn:f,numHidden:s,setNumHidden:a,spectralRad:l,setSpectralRad:u,connectionChance:h,setConnectionChance:c,setTargetData:e,setPredictionsData:r,setTargetFunction:v,targetFunction:p,targetFunctions:d,activationFunctions:S,length:E,setLength:_,activationFunction:m,setActivationFunction:y,setNetworkStates:k,animationSpeed:b,setAnimationSpeed:R,setNetworkStepEnergies:B,graph:x,setAnimationFrame:C,setGraph:O,networkStates:T})]}),V.jsx(Uw,{time:q,targetData:Y,length:E}),V.jsx($w,{time:q,targetData:t,predictions:n,length:E,animationFrame:w})]})}Xf(document.getElementById("root")).render(V.jsx(Z.StrictMode,{children:V.jsx(Yw,{})}));
